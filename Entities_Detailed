\documentclass[11pt,a4paper]{article}

% Packages
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{geometry}
\usepackage{xcolor}
\usepackage{titlesec}
\usepackage{enumitem}
\usepackage{fancyhdr}
\usepackage{hyperref}
\usepackage{tcolorbox}
\usepackage{longtable}
\usepackage{array}
\usepackage{booktabs}
\usepackage{tikz}

% Page geometry
\geometry{
    left=2cm,
    right=2cm,
    top=2.5cm,
    bottom=2.5cm
}

% Color definitions
\definecolor{primaryBlue}{RGB}{0, 102, 204}
\definecolor{accentOrange}{RGB}{255, 127, 0}
\definecolor{darkGray}{RGB}{51, 51, 51}
\definecolor{lightGray}{RGB}{245, 245, 245}
\definecolor{tableHeader}{RGB}{25, 118, 210}

% Title formatting
\titleformat{\section}
  {\color{primaryBlue}\Large\bfseries}
  {\thesection}{1em}{}[\titlerule]

\titleformat{\subsection}
  {\color{accentOrange}\large\bfseries}
  {\thesubsection}{1em}{}

% Hyperref setup
\hypersetup{
    colorlinks=true,
    linkcolor=primaryBlue,
    filecolor=accentOrange,
    urlcolor=primaryBlue,
    pdftitle={SavoyConnect Database Tables},
    pdfauthor={Rifaf Rahman}
}

% Header and footer
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\color{primaryBlue}\textbf{SavoyConnect Database - Part 1}}
\fancyhead[R]{\color{darkGray}\thepage}
\fancyfoot[C]{\color{darkGray}\small Tables 1-10 | Prepared by Rifaf Rahman | November 2025}
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0.5pt}

% Custom boxes
\newtcolorbox{tablebox}[1]{
  colback=lightGray,
  colframe=primaryBlue,
  fonttitle=\bfseries\large,
  title=#1,
  arc=2mm,
  boxrule=1mm
}

\begin{document}

% Title page
\begin{titlepage}
    \begin{tikzpicture}[remember picture,overlay]
        \fill[primaryBlue] (current page.north west) rectangle ([yshift=-8cm]current page.north east);
    \end{tikzpicture}
    
    \vspace*{2cm}
    
    {\color{white}\Huge\bfseries SavoyConnect}\\[0.5cm]
    {\color{white}\LARGE Database Schema}\\[0.3cm]
    {\color{white}\Large Detailed Table Properties}\\[2cm]
    
    \vspace{3cm}
    
    \begin{tcolorbox}[colback=white,colframe=accentOrange,width=0.8\textwidth,arc=3mm,boxrule=1mm]
        \begin{tabular}{ll}
            \textbf{\color{primaryBlue}Prepared by:} & Rifaf Rahman \\[0.3cm]
            \textbf{\color{primaryBlue}Document:} & Part 1 of 8 \\[0.3cm]
            \textbf{\color{primaryBlue}Tables:} & 1-10 (MVP Phase) \\[0.3cm]
            \textbf{\color{primaryBlue}Date:} & November 9, 2025 \\
        \end{tabular}
    \end{tcolorbox}
    
    \vfill
    
    {\large\color{darkGray} Complete Column Definitions with Data Types \& Constraints}
    
\end{titlepage}

\tableofcontents
\newpage

\section{User Management \& Authentication Tables}

\subsection{Table 1: users}

\begin{tablebox}{users - Core User Accounts}
\textbf{Purpose:} Stores core user authentication and account information.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} email (unique), phone (unique), created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
email & VARCHAR(255) & UNIQUE, NOT NULL, Valid email format \\
\hline
phone & VARCHAR(20) & UNIQUE, NOT NULL, E.164 format (+880...) \\
\hline
password\_hash & VARCHAR(255) & NOT NULL, Bcrypt/Argon2 hashed password \\
\hline
email\_verified\_at & TIMESTAMP & NULL, Timestamp when email was verified \\
\hline
phone\_verified\_at & TIMESTAMP & NULL, Timestamp when phone was verified \\
\hline
status & ENUM & NOT NULL, DEFAULT 'active', Values: 'active', 'suspended', 'deactivated', 'pending' \\
\hline
last\_login\_at & TIMESTAMP & NULL, Last successful login timestamp \\
\hline
login\_attempts & INT & NOT NULL, DEFAULT 0, Failed login counter for security \\
\hline
locked\_until & TIMESTAMP & NULL, Account lock expiration for security \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
deleted\_at & TIMESTAMP & NULL, Soft delete timestamp \\
\hline
\caption{users table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item One-to-One: user\_profiles, wallet\_accounts, health\_profiles
    \item One-to-Many: orders, reviews, community\_posts, user\_addresses
\end{itemize}

\newpage

\subsection{Table 2: user\_profiles}

\begin{tablebox}{user\_profiles - Extended User Information}
\textbf{Purpose:} Stores detailed user profile information and personal data.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id (references users.id)\\
\textbf{Indexes:} user\_id (unique), date\_of\_birth
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, UNIQUE, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
full\_name & VARCHAR(255) & NOT NULL, User's full name \\
\hline
date\_of\_birth & DATE & NULL, User's birth date for age verification and birthday features \\
\hline
gender & ENUM & NULL, Values: 'male', 'female', 'other', 'prefer\_not\_to\_say' \\
\hline
city & VARCHAR(100) & NULL, User's city for location-based features \\
\hline
profile\_picture\_url & VARCHAR(500) & NULL, URL to profile image stored in cloud storage \\
\hline
bio & TEXT & NULL, User bio/description (max 500 characters) \\
\hline
language\_preference & VARCHAR(10) & NOT NULL, DEFAULT 'en', ISO 639-1 language code \\
\hline
timezone & VARCHAR(50) & NOT NULL, DEFAULT 'Asia/Dhaka', IANA timezone identifier \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{user\_profiles table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id)
\end{itemize}

\newpage

\subsection{Table 3: user\_preferences}

\begin{tablebox}{user\_preferences - User Settings \& Preferences}
\textbf{Purpose:} Stores user preferences for notifications, dietary restrictions, and app settings.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id (references users.id)\\
\textbf{Indexes:} user\_id (unique)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, UNIQUE, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
dietary\_preferences & JSON & NULL, Array of dietary preferences: ['vegetarian', 'vegan', 'low-sugar', 'keto', etc.] \\
\hline
allergen\_restrictions & JSON & NULL, Array of allergens to avoid: ['dairy', 'nuts', 'gluten', 'soy', etc.] \\
\hline
push\_notifications & BOOLEAN & NOT NULL, DEFAULT TRUE, Enable/disable push notifications \\
\hline
email\_notifications & BOOLEAN & NOT NULL, DEFAULT TRUE, Enable/disable email notifications \\
\hline
sms\_notifications & BOOLEAN & NOT NULL, DEFAULT FALSE, Enable/disable SMS notifications \\
\hline
marketing\_emails & BOOLEAN & NOT NULL, DEFAULT TRUE, Consent for marketing communications \\
\hline
order\_updates & BOOLEAN & NOT NULL, DEFAULT TRUE, Notifications for order status changes \\
\hline
promotional\_offers & BOOLEAN & NOT NULL, DEFAULT TRUE, Notifications for promotions and deals \\
\hline
challenge\_reminders & BOOLEAN & NOT NULL, DEFAULT TRUE, Reminders for active challenges \\
\hline
theme\_preference & ENUM & NOT NULL, DEFAULT 'system', Values: 'light', 'dark', 'system' \\
\hline
default\_payment\_method & VARCHAR(50) & NULL, Default payment method preference \\
\hline
data\_sharing\_consent & BOOLEAN & NOT NULL, DEFAULT FALSE, Consent for analytics and personalization \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{user\_preferences table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id)
\end{itemize}

\newpage

\subsection{Table 4: user\_addresses}

\begin{tablebox}{user\_addresses - Delivery Address Management}
\textbf{Purpose:} Stores multiple delivery addresses for users with geocoding support.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id (references users.id)\\
\textbf{Indexes:} user\_id, is\_default
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
label & VARCHAR(50) & NOT NULL, Address label: 'Home', 'Office', 'Other' \\
\hline
address\_line\_1 & VARCHAR(255) & NOT NULL, Street address, building name/number \\
\hline
address\_line\_2 & VARCHAR(255) & NULL, Apartment, suite, floor details \\
\hline
city & VARCHAR(100) & NOT NULL, City name \\
\hline
postal\_code & VARCHAR(20) & NULL, Postal/ZIP code \\
\hline
district & VARCHAR(100) & NULL, District/state/province \\
\hline
country & VARCHAR(100) & NOT NULL, DEFAULT 'Bangladesh', Country name \\
\hline
latitude & DECIMAL(10, 8) & NULL, GPS latitude for geocoding and delivery routing \\
\hline
longitude & DECIMAL(11, 8) & NULL, GPS longitude for geocoding and delivery routing \\
\hline
landmark & VARCHAR(255) & NULL, Nearby landmark for easier navigation \\
\hline
phone & VARCHAR(20) & NULL, Contact phone for this address \\
\hline
is\_default & BOOLEAN & NOT NULL, DEFAULT FALSE, Primary delivery address flag \\
\hline
is\_verified & BOOLEAN & NOT NULL, DEFAULT FALSE, Address verification status \\
\hline
delivery\_instructions & TEXT & NULL, Special delivery notes (gate code, directions, etc.) \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
deleted\_at & TIMESTAMP & NULL, Soft delete timestamp \\
\hline
\caption{user\_addresses table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id)
    \item One-to-Many: orders (delivery\_address\_id)
\end{itemize}

\newpage

\subsection{Table 5: sessions}

\begin{tablebox}{sessions - User Session Management}
\textbf{Purpose:} Manages active user sessions with device tracking and security.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id (references users.id)\\
\textbf{Indexes:} user\_id, token (unique), expires\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
token & VARCHAR(255) & UNIQUE, NOT NULL, Session token (JWT or random string) \\
\hline
device\_type & ENUM & NOT NULL, Values: 'mobile', 'tablet', 'desktop', 'unknown' \\
\hline
device\_name & VARCHAR(255) & NULL, Device model/name (e.g., "iPhone 13", "Chrome Browser") \\
\hline
os & VARCHAR(100) & NULL, Operating system (e.g., "iOS 16", "Windows 11") \\
\hline
browser & VARCHAR(100) & NULL, Browser name and version \\
\hline
ip\_address & VARCHAR(45) & NULL, IPv4 or IPv6 address \\
\hline
user\_agent & TEXT & NULL, Full user agent string \\
\hline
last\_activity\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP, Last request timestamp \\
\hline
expires\_at & TIMESTAMP & NOT NULL, Session expiration timestamp \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Session active status \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{sessions table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id)
\end{itemize}

\textbf{Notes:}
\begin{itemize}
    \item Implement automatic cleanup of expired sessions (cron job)
    \item Consider using Redis for session storage in production for better performance
    \item Track concurrent sessions per user for security monitoring
\end{itemize}

\newpage

\subsection{Table 6: password\_resets}

\begin{tablebox}{password\_resets - Password Reset Token Management}
\textbf{Purpose:} Manages password reset tokens with expiration and usage tracking.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} email, token (unique), expires\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
email & VARCHAR(255) & NOT NULL, User email for password reset \\
\hline
token & VARCHAR(255) & UNIQUE, NOT NULL, Secure random reset token (hashed) \\
\hline
expires\_at & TIMESTAMP & NOT NULL, Token expiration (typically 1 hour from creation) \\
\hline
used\_at & TIMESTAMP & NULL, Timestamp when token was used \\
\hline
ip\_address & VARCHAR(45) & NULL, IP address of reset request for security audit \\
\hline
user\_agent & TEXT & NULL, User agent of reset request \\
\hline
is\_used & BOOLEAN & NOT NULL, DEFAULT FALSE, Token usage status \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{password\_resets table structure}
\end{longtable}

\textbf{Security Considerations:}
\begin{itemize}
    \item Tokens should be cryptographically secure random strings
    \item Store hashed version of token in database
    \item Implement rate limiting on reset requests per email/IP
    \item Expire tokens after 1 hour or first use
    \item Clean up expired/used tokens regularly
    \item Send notification email when password is successfully changed
\end{itemize}

\newpage

\section{Product Catalog Tables}

\subsection{Table 7: products}

\begin{tablebox}{products - Ice Cream Products \& SKUs}
\textbf{Purpose:} Core product catalog with pricing, units, and availability.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} sku (unique), name, category\_id, is\_active, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
sku & VARCHAR(100) & UNIQUE, NOT NULL, Stock Keeping Unit identifier \\
\hline
name & VARCHAR(255) & NOT NULL, Product/flavor name \\
\hline
slug & VARCHAR(255) & UNIQUE, NOT NULL, URL-friendly name \\
\hline
description & TEXT & NULL, Detailed product description \\
\hline
short\_description & VARCHAR(500) & NULL, Brief product summary for listings \\
\hline
category\_id & BIGINT & FOREIGN KEY, NULL, References product\_categories(id) \\
\hline
base\_price & DECIMAL(10, 2) & NOT NULL, Base price in local currency (BDT) \\
\hline
unit\_type & ENUM & NOT NULL, Values: 'piece', 'liter', 'box', 'scoop' \\
\hline
units\_per\_package & INT & NOT NULL, DEFAULT 1, Number of units in one package \\
\hline
minimum\_order\_quantity & INT & NOT NULL, DEFAULT 1, Minimum order quantity \\
\hline
weight\_grams & INT & NULL, Product weight in grams for shipping \\
\hline
volume\_ml & INT & NULL, Product volume in milliliters \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Product availability status \\
\hline
is\_featured & BOOLEAN & NOT NULL, DEFAULT FALSE, Featured product flag for promotions \\
\hline
is\_new & BOOLEAN & NOT NULL, DEFAULT FALSE, New product flag \\
\hline
is\_seasonal & BOOLEAN & NOT NULL, DEFAULT FALSE, Seasonal availability \\
\hline
season\_start & DATE & NULL, Season start date for seasonal products \\
\hline
season\_end & DATE & NULL, Season end date for seasonal products \\
\hline
average\_rating & DECIMAL(3, 2) & NULL, DEFAULT 0.00, Calculated average rating (0-5) \\
\hline
total\_reviews & INT & NOT NULL, DEFAULT 0, Total review count \\
\hline
total\_sales & INT & NOT NULL, DEFAULT 0, Lifetime sales count \\
\hline
view\_count & INT & NOT NULL, DEFAULT 0, Product view count \\
\hline
sort\_order & INT & NOT NULL, DEFAULT 0, Display sort order \\
\hline
meta\_title & VARCHAR(255) & NULL, SEO meta title \\
\hline
meta\_description & TEXT & NULL, SEO meta description \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
deleted\_at & TIMESTAMP & NULL, Soft delete timestamp \\
\hline
\caption{products table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: product\_categories (category\_id)
    \item One-to-Many: order\_items, product\_reviews, product\_nutrition, product\_images
    \item One-to-Many: location\_inventory, custom\_box\_items
\end{itemize}

\newpage

\subsection{Table 8: product\_categories}

\begin{tablebox}{product\_categories - Product Categorization}
\textbf{Purpose:} Hierarchical product category structure for organization and filtering.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} slug (unique), parent\_id, is\_active
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
parent\_id & BIGINT & FOREIGN KEY, NULL, References product\_categories(id) for hierarchy \\
\hline
name & VARCHAR(255) & NOT NULL, Category name \\
\hline
slug & VARCHAR(255) & UNIQUE, NOT NULL, URL-friendly category name \\
\hline
description & TEXT & NULL, Category description \\
\hline
icon & VARCHAR(255) & NULL, Icon name or URL for category \\
\hline
image\_url & VARCHAR(500) & NULL, Category banner/header image \\
\hline
color\_code & VARCHAR(7) & NULL, Hex color code for UI theming \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Category visibility status \\
\hline
sort\_order & INT & NOT NULL, DEFAULT 0, Display order within parent \\
\hline
level & INT & NOT NULL, DEFAULT 0, Hierarchy level (0=root, 1=child, etc.) \\
\hline
path & VARCHAR(500) & NULL, Full path for nested set or materialized path (e.g., "/premium/chocolate") \\
\hline
product\_count & INT & NOT NULL, DEFAULT 0, Cached count of products in category \\
\hline
meta\_title & VARCHAR(255) & NULL, SEO meta title \\
\hline
meta\_description & TEXT & NULL, SEO meta description \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
deleted\_at & TIMESTAMP & NULL, Soft delete timestamp \\
\hline
\caption{product\_categories table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Self-referencing: parent\_id references product\_categories(id)
    \item One-to-Many: products (category\_id)
\end{itemize}

\textbf{Example Categories:}
\begin{itemize}
    \item Premium (parent) → Belgian Chocolate, French Vanilla (children)
    \item Classic (parent) → Vanilla, Chocolate, Strawberry (children)
    \item Seasonal (parent) → Summer Special, Winter Collection (children)
    \item Sugar-Free, Vegan Options, Kids Favorites
\end{itemize}

\newpage

\subsection{Table 9: product\_nutrition}

\begin{tablebox}{product\_nutrition - Nutritional Information}
\textbf{Purpose:} Detailed nutritional facts per product for health-conscious features.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} product\_id (references products.id)\\
\textbf{Indexes:} product\_id (unique)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
product\_id & BIGINT & FOREIGN KEY, UNIQUE, NOT NULL, References products(id) ON DELETE CASCADE \\
\hline
serving\_size\_grams & INT & NOT NULL, Standard serving size in grams \\
\hline
servings\_per\_container & DECIMAL(5, 2) & NULL, Number of servings in package \\
\hline
calories & INT & NOT NULL, Calories per serving \\
\hline
calories\_from\_fat & INT & NULL, Calories from fat per serving \\
\hline
total\_fat\_grams & DECIMAL(5, 2) & NOT NULL, Total fat in grams \\
\hline
saturated\_fat\_grams & DECIMAL(5, 2) & NULL, Saturated fat in grams \\
\hline
trans\_fat\_grams & DECIMAL(5, 2) & NULL, Trans fat in grams \\
\hline
cholesterol\_mg & INT & NULL, Cholesterol in milligrams \\
\hline
sodium\_mg & INT & NULL, Sodium in milligrams \\
\hline
total\_carbohydrates\_grams & DECIMAL(5, 2) & NOT NULL, Total carbohydrates in grams \\
\hline
dietary\_fiber\_grams & DECIMAL(5, 2) & NULL, Dietary fiber in grams \\
\hline
total\_sugars\_grams & DECIMAL(5, 2) & NOT NULL, Total sugars in grams \\
\hline
added\_sugars\_grams & DECIMAL(5, 2) & NULL, Added sugars in grams \\
\hline
protein\_grams & DECIMAL(5, 2) & NOT NULL, Protein in grams \\
\hline
vitamin\_d\_mcg & DECIMAL(5, 2) & NULL, Vitamin D in micrograms \\
\hline
calcium\_mg & INT & NULL, Calcium in milligrams \\
\hline
iron\_mg & DECIMAL(5, 2) & NULL, Iron in milligrams \\
\hline
potassium\_mg & INT & NULL, Potassium in milligrams \\
\hline
ingredients & TEXT & NULL, Comma-separated ingredient list \\
\hline
is\_vegetarian & BOOLEAN & NOT NULL, DEFAULT TRUE, Vegetarian status \\
\hline
is\_vegan & BOOLEAN & NOT NULL, DEFAULT FALSE, Vegan status \\
\hline
is\_gluten\_free & BOOLEAN & NOT NULL, DEFAULT FALSE, Gluten-free status \\
\hline
is\_sugar\_free & BOOLEAN & NOT NULL, DEFAULT FALSE, Sugar-free status \\
\hline
is\_organic & BOOLEAN & NOT NULL, DEFAULT FALSE, Organic certification \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{product\_nutrition table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: products (product\_id)
\end{itemize}

\textbf{Notes:}
\begin{itemize}
    \item Nutritional values are per serving size
    \item Supports Health \& Nutrition Hub feature
    \item Enables BMI calculator and calorie tracking
    \item Powers "Perfect Match" recommendations based on user goals
\end{itemize}

\newpage

\subsection{Table 10: product\_allergens}

\begin{tablebox}{product\_allergens - Allergen Information}
\textbf{Purpose:} Tracks allergen information for products to support safe shopping.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} product\_id (references products.id)\\
\textbf{Indexes:} product\_id, allergen\_type
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
product\_id & BIGINT & FOREIGN KEY, NOT NULL, References products(id) ON DELETE CASCADE \\
\hline
allergen\_type & ENUM & NOT NULL, Values: 'dairy', 'nuts', 'peanuts', 'tree\_nuts', 'soy', 'eggs', 'wheat', 'gluten', 'sesame', 'shellfish', 'fish', 'sulfites' \\
\hline
severity & ENUM & NOT NULL, Values: 'contains', 'may\_contain', 'processed\_in\_facility' \\
\hline
description & VARCHAR(500) & NULL, Additional allergen details or warnings \\
\hline
is\_cross\_contamination\_risk & BOOLEAN & NOT NULL, DEFAULT FALSE, Cross-contamination warning flag \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{product\_allergens table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: products (product\_id)
\end{itemize}

\textbf{Allergen Severity Levels:}
\begin{itemize}
    \item \textbf{contains:} Product directly contains this allergen
    \item \textbf{may\_contain:} Potential trace amounts due to shared equipment
    \item \textbf{processed\_in\_facility:} Manufactured in facility that processes this allergen
\end{itemize}

\textbf{Use Cases:}
\begin{itemize}
    \item Filter products based on user allergen restrictions (user\_preferences)
    \item Display warning badges on product cards and detail pages
    \item Prevent checkout if allergen conflicts detected
    \item Support Health \& Nutrition Hub feature
    \item Enable "Perfect Match" safety recommendations
\end{itemize}

\textbf{Example Records:}
\begin{itemize}
    \item Product: "Belgian Chocolate" → allergen\_type: 'dairy', severity: 'contains'
    \item Product: "Pistachio Delight" → allergen\_type: 'tree\_nuts', severity: 'contains'
    \item Product: "Vanilla Classic" → allergen\_type: 'nuts', severity: 'may\_contain'
\end{itemize}


\newpage
\section{Product Catalog Tables}

\subsection{Table 11: product\_images}

\begin{tablebox}{product\_images - Product Image Management}
\textbf{Purpose:} Manages multiple images per product with types and ordering.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} product\_id (references products.id)\\
\textbf{Indexes:} product\_id, is\_primary, sort\_order
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
product\_id & BIGINT & FOREIGN KEY, NOT NULL, References products(id) ON DELETE CASCADE \\
\hline
image\_url & VARCHAR(500) & NOT NULL, Full URL to image stored in cloud storage (S3/CDN) \\
\hline
thumbnail\_url & VARCHAR(500) & NULL, URL to thumbnail version for list views \\
\hline
image\_type & ENUM & NOT NULL, Values: 'primary', 'gallery', 'lifestyle', '360\_view', 'packaging' \\
\hline
alt\_text & VARCHAR(255) & NULL, Alternative text for accessibility and SEO \\
\hline
is\_primary & BOOLEAN & NOT NULL, DEFAULT FALSE, Primary product image flag \\
\hline
sort\_order & INT & NOT NULL, DEFAULT 0, Display order in gallery \\
\hline
width\_px & INT & NULL, Original image width in pixels \\
\hline
height\_px & INT & NULL, Original image height in pixels \\
\hline
file\_size\_kb & INT & NULL, Image file size in kilobytes \\
\hline
format & VARCHAR(10) & NULL, Image format: 'jpg', 'png', 'webp', 'avif' \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{product\_images table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: products (product\_id)
\end{itemize}

\textbf{Image Type Usage:}
\begin{itemize}
    \item \textbf{primary:} Main product card image
    \item \textbf{gallery:} Additional product photos
    \item \textbf{lifestyle:} Product in use/context photos
    \item \textbf{360\_view:} Images for 360-degree product viewer
    \item \textbf{packaging:} Packaging and box images
\end{itemize}

\newpage

\section{Order Management Tables}

\subsection{Table 12: orders}

\begin{tablebox}{orders - Customer Orders}
\textbf{Purpose:} Main order records with totals, status, and delivery information.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id, delivery\_address\_id\\
\textbf{Indexes:} user\_id, order\_number (unique), status, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
order\_number & VARCHAR(50) & UNIQUE, NOT NULL, Human-readable order ID (e.g., "ORD-20251109-0001") \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) \\
\hline
delivery\_address\_id & BIGINT & FOREIGN KEY, NOT NULL, References user\_addresses(id) \\
\hline
status & ENUM & NOT NULL, DEFAULT 'pending', Values: 'pending', 'confirmed', 'preparing', 'ready', 'out\_for\_delivery', 'delivered', 'cancelled', 'refunded' \\
\hline
subtotal & DECIMAL(10, 2) & NOT NULL, Sum of all order items before fees and discounts \\
\hline
delivery\_fee & DECIMAL(10, 2) & NOT NULL, DEFAULT 0.00, Delivery charge \\
\hline
discount\_amount & DECIMAL(10, 2) & NOT NULL, DEFAULT 0.00, Total discount applied \\
\hline
tax\_amount & DECIMAL(10, 2) & NOT NULL, DEFAULT 0.00, Tax/VAT amount \\
\hline
total\_amount & DECIMAL(10, 2) & NOT NULL, Final order total (subtotal + fees - discounts + tax) \\
\hline
currency & VARCHAR(3) & NOT NULL, DEFAULT 'BDT', ISO 4217 currency code \\
\hline
payment\_status & ENUM & NOT NULL, DEFAULT 'pending', Values: 'pending', 'paid', 'failed', 'refunded', 'partially\_refunded' \\
\hline
payment\_method & VARCHAR(50) & NULL, Payment method used: 'card', 'mobile\_wallet', 'cash\_on\_delivery' \\
\hline
order\_type & ENUM & NOT NULL, Values: 'delivery', 'pickup', 'custom\_box' \\
\hline
delivery\_date & DATE & NULL, Scheduled or actual delivery date \\
\hline
delivery\_time\_slot & VARCHAR(50) & NULL, Delivery time window (e.g., "10:00-12:00") \\
\hline
special\_instructions & TEXT & NULL, Customer notes for order/delivery \\
\hline
promo\_code & VARCHAR(50) & NULL, Applied promotion code \\
\hline
icecoins\_used & INT & NOT NULL, DEFAULT 0, IceCoins redeemed for this order \\
\hline
icecoins\_earned & INT & NOT NULL, DEFAULT 0, IceCoins earned from this order \\
\hline
is\_gift & BOOLEAN & NOT NULL, DEFAULT FALSE, Gift order flag \\
\hline
estimated\_delivery\_at & TIMESTAMP & NULL, Estimated delivery timestamp \\
\hline
confirmed\_at & TIMESTAMP & NULL, Order confirmation timestamp \\
\hline
delivered\_at & TIMESTAMP & NULL, Actual delivery completion timestamp \\
\hline
cancelled\_at & TIMESTAMP & NULL, Order cancellation timestamp \\
\hline
cancellation\_reason & TEXT & NULL, Reason for cancellation \\
\hline
refund\_amount & DECIMAL(10, 2) & NULL, Refunded amount if applicable \\
\hline
refund\_reason & TEXT & NULL, Reason for refund \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
deleted\_at & TIMESTAMP & NULL, Soft delete timestamp \\
\hline
\caption{orders table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id), user\_addresses (delivery\_address\_id)
    \item One-to-Many: order\_items, payments, order\_status\_history
    \item One-to-One: deliveries
\end{itemize}

\newpage

\subsection{Table 13: order\_items}

\begin{tablebox}{order\_items - Order Line Items}
\textbf{Purpose:} Individual products/items within an order with pricing.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} order\_id, product\_id\\
\textbf{Indexes:} order\_id, product\_id
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
order\_id & BIGINT & FOREIGN KEY, NOT NULL, References orders(id) ON DELETE CASCADE \\
\hline
product\_id & BIGINT & FOREIGN KEY, NOT NULL, References products(id) \\
\hline
product\_name & VARCHAR(255) & NOT NULL, Snapshot of product name at order time \\
\hline
product\_sku & VARCHAR(100) & NOT NULL, Snapshot of SKU at order time \\
\hline
quantity & INT & NOT NULL, Quantity ordered \\
\hline
unit\_type & ENUM & NOT NULL, Values: 'piece', 'liter', 'box', 'scoop' \\
\hline
unit\_price & DECIMAL(10, 2) & NOT NULL, Price per unit at order time \\
\hline
subtotal & DECIMAL(10, 2) & NOT NULL, Quantity × unit price \\
\hline
discount\_amount & DECIMAL(10, 2) & NOT NULL, DEFAULT 0.00, Item-level discount \\
\hline
total & DECIMAL(10, 2) & NOT NULL, Final line item total after discount \\
\hline
notes & TEXT & NULL, Special requests for this item \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{order\_items table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: orders (order\_id), products (product\_id)
\end{itemize}

\textbf{Notes:}
\begin{itemize}
    \item Store product name/SKU snapshots for historical accuracy
    \item Prevents issues if product is renamed/deleted after order
    \item Support quantity-based discounts (bulk pricing)
\end{itemize}

\newpage

\subsection{Table 14: order\_status\_history}

\begin{tablebox}{order\_status\_history - Order Status Audit Trail}
\textbf{Purpose:} Complete history of order status transitions for tracking and analytics.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} order\_id\\
\textbf{Indexes:} order\_id, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
order\_id & BIGINT & FOREIGN KEY, NOT NULL, References orders(id) ON DELETE CASCADE \\
\hline
from\_status & ENUM & NULL, Previous status (NULL for initial status) \\
\hline
to\_status & ENUM & NOT NULL, New status: 'pending', 'confirmed', 'preparing', 'ready', 'out\_for\_delivery', 'delivered', 'cancelled', 'refunded' \\
\hline
changed\_by\_type & ENUM & NOT NULL, Values: 'customer', 'admin', 'system', 'delivery\_personnel' \\
\hline
changed\_by\_id & BIGINT & NULL, User ID or admin ID who made the change \\
\hline
reason & TEXT & NULL, Reason for status change (especially for cancellations) \\
\hline
notes & TEXT & NULL, Additional notes about the status change \\
\hline
ip\_address & VARCHAR(45) & NULL, IP address of the actor \\
\hline
user\_agent & TEXT & NULL, User agent string \\
\hline
notification\_sent & BOOLEAN & NOT NULL, DEFAULT FALSE, Whether customer was notified \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{order\_status\_history table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: orders (order\_id)
\end{itemize}

\textbf{Use Cases:}
\begin{itemize}
    \item Audit trail for compliance and dispute resolution
    \item Analytics on order processing times per status
    \item Identify bottlenecks in order fulfillment
    \item Customer order tracking timeline display
    \item SLA monitoring (time between statuses)
\end{itemize}



\subsection{Table 15: payments}

\begin{tablebox}{payments - Payment Transactions}
\textbf{Purpose:} Records all payment transactions with gateway responses and status.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} order\_id, user\_id\\
\textbf{Indexes:} order\_id, user\_id, transaction\_id (unique), status
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
order\_id & BIGINT & FOREIGN KEY, NOT NULL, References orders(id) \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) \\
\hline
transaction\_id & VARCHAR(255) & UNIQUE, NOT NULL, Unique transaction identifier \\
\hline
payment\_method & ENUM & NOT NULL, Values: 'credit\_card', 'debit\_card', 'mobile\_wallet', 'bank\_transfer', 'cash\_on\_delivery', 'icecoins' \\
\hline
payment\_provider & VARCHAR(100) & NULL, Gateway provider: 'stripe', 'bkash', 'nagad', 'sslcommerz', etc. \\
\hline
amount & DECIMAL(10, 2) & NOT NULL, Payment amount \\
\hline
currency & VARCHAR(3) & NOT NULL, DEFAULT 'BDT', ISO 4217 currency code \\
\hline
status & ENUM & NOT NULL, DEFAULT 'pending', Values: 'pending', 'processing', 'success', 'failed', 'refunded', 'cancelled' \\
\hline
gateway\_transaction\_id & VARCHAR(255) & NULL, Payment gateway's transaction ID \\
\hline
gateway\_response & JSON & NULL, Full gateway response for debugging \\
\hline
error\_code & VARCHAR(50) & NULL, Error code if payment failed \\
\hline
error\_message & TEXT & NULL, Error message if payment failed \\
\hline
card\_last\_four & VARCHAR(4) & NULL, Last 4 digits of card (never store full number) \\
\hline
card\_brand & VARCHAR(50) & NULL, Card brand: 'visa', 'mastercard', 'amex' \\
\hline
billing\_name & VARCHAR(255) & NULL, Name on billing account \\
\hline
billing\_email & VARCHAR(255) & NULL, Billing email address \\
\hline
billing\_phone & VARCHAR(20) & NULL, Billing phone number \\
\hline
ip\_address & VARCHAR(45) & NULL, IP address of payment initiator \\
\hline
user\_agent & TEXT & NULL, User agent at payment time \\
\hline
refund\_amount & DECIMAL(10, 2) & NULL, Amount refunded if applicable \\
\hline
refund\_transaction\_id & VARCHAR(255) & NULL, Refund transaction ID from gateway \\
\hline
refunded\_at & TIMESTAMP & NULL, Refund completion timestamp \\
\hline
processed\_at & TIMESTAMP & NULL, Payment processing completion time \\
\hline
failed\_at & TIMESTAMP & NULL, Payment failure timestamp \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{payments table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: orders (order\_id), users (user\_id)
\end{itemize}

\textbf{Security Notes:}
\begin{itemize}
    \item NEVER store full credit card numbers (PCI-DSS compliance)
    \item Use tokenization for stored payment methods
    \item Encrypt sensitive fields at rest
    \item Log all payment attempts for fraud detection
    \item Implement rate limiting and fraud checks
\end{itemize}

\newpage

\subsection{Table 16: payment\_methods}

\begin{tablebox}{payment\_methods - Saved Payment Methods}
\textbf{Purpose:} Stores tokenized saved payment methods for quick checkout.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id\\
\textbf{Indexes:} user\_id, is\_default
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
payment\_type & ENUM & NOT NULL, Values: 'credit\_card', 'debit\_card', 'mobile\_wallet', 'bank\_account' \\
\hline
provider & VARCHAR(100) & NOT NULL, Payment provider: 'stripe', 'bkash', 'nagad', etc. \\
\hline
token & VARCHAR(255) & NOT NULL, Tokenized payment method (from payment gateway) \\
\hline
label & VARCHAR(100) & NULL, User-friendly label: "My Visa Card", "Work Card" \\
\hline
card\_last\_four & VARCHAR(4) & NULL, Last 4 digits for display \\
\hline
card\_brand & VARCHAR(50) & NULL, Card brand: 'visa', 'mastercard', 'amex' \\
\hline
card\_expiry\_month & INT & NULL, Card expiration month (1-12) \\
\hline
card\_expiry\_year & INT & NULL, Card expiration year (4 digits) \\
\hline
cardholder\_name & VARCHAR(255) & NULL, Name on card \\
\hline
mobile\_wallet\_number & VARCHAR(20) & NULL, Mobile wallet phone number (masked) \\
\hline
bank\_name & VARCHAR(100) & NULL, Bank name for bank accounts \\
\hline
is\_default & BOOLEAN & NOT NULL, DEFAULT FALSE, Default payment method flag \\
\hline
is\_verified & BOOLEAN & NOT NULL, DEFAULT FALSE, Verification status \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Active status \\
\hline
last\_used\_at & TIMESTAMP & NULL, Last time this method was used \\
\hline
verified\_at & TIMESTAMP & NULL, Verification timestamp \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
deleted\_at & TIMESTAMP & NULL, Soft delete timestamp \\
\hline
\caption{payment\_methods table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id)
\end{itemize}

\textbf{Security \& Compliance:}
\begin{itemize}
    \item Store only tokenized payment data, never raw card numbers
    \item Tokens are obtained from payment gateway (Stripe, etc.)
    \item Implement PCI-DSS Level 1 compliance when handling cards
    \item Encrypt token field at application level
    \item Support CVV re-entry for enhanced security
\end{itemize}

\newpage

\section{Location \& Inventory Tables}

\subsection{Table 17: locations}

\begin{tablebox}{locations - Store/Depot/Freezer Locations}
\textbf{Purpose:} Physical locations where products are available (stores, depots, freezers).\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} location\_type, is\_active, latitude/longitude (spatial)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
location\_type & ENUM & NOT NULL, Values: 'store', 'depot', 'freezer', 'warehouse', 'kiosk' \\
\hline
name & VARCHAR(255) & NOT NULL, Location name (e.g., "Dhanmondi Outlet", "Gulshan Depot") \\
\hline
slug & VARCHAR(255) & UNIQUE, NOT NULL, URL-friendly identifier \\
\hline
code & VARCHAR(50) & UNIQUE, NULL, Internal location code \\
\hline
address\_line\_1 & VARCHAR(255) & NOT NULL, Street address \\
\hline
address\_line\_2 & VARCHAR(255) & NULL, Additional address details \\
\hline
city & VARCHAR(100) & NOT NULL, City name \\
\hline
district & VARCHAR(100) & NULL, District/region \\
\hline
postal\_code & VARCHAR(20) & NULL, Postal code \\
\hline
country & VARCHAR(100) & NOT NULL, DEFAULT 'Bangladesh', Country \\
\hline
latitude & DECIMAL(10, 8) & NOT NULL, GPS latitude for mapping and nearby search \\
\hline
longitude & DECIMAL(11, 8) & NOT NULL, GPS longitude for mapping and nearby search \\
\hline
phone & VARCHAR(20) & NULL, Location contact phone \\
\hline
email & VARCHAR(255) & NULL, Location contact email \\
\hline
operating\_hours & JSON & NULL, Daily operating hours: \{"monday": "09:00-21:00", ...\} \\
\hline
is\_24\_hours & BOOLEAN & NOT NULL, DEFAULT FALSE, 24/7 operation flag \\
\hline
facilities & JSON & NULL, Available facilities: ['parking', 'wifi', 'seating', 'drive\_thru'] \\
\hline
manager\_name & VARCHAR(255) & NULL, Location manager name \\
\hline
manager\_phone & VARCHAR(20) & NULL, Manager contact number \\
\hline
capacity & INT & NULL, Seating capacity or storage capacity \\
\hline
serves\_delivery & BOOLEAN & NOT NULL, DEFAULT TRUE, Supports delivery orders \\
\hline
serves\_pickup & BOOLEAN & NOT NULL, DEFAULT TRUE, Supports pickup orders \\
\hline
average\_rating & DECIMAL(3, 2) & NULL, DEFAULT 0.00, Location rating (0-5) \\
\hline
total\_reviews & INT & NOT NULL, DEFAULT 0, Review count \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Operational status \\
\hline
opening\_date & DATE & NULL, Location opening date \\
\hline
closing\_date & DATE & NULL, Permanent closure date if applicable \\
\hline
image\_url & VARCHAR(500) & NULL, Location photo URL \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
deleted\_at & TIMESTAMP & NULL, Soft delete timestamp \\
\hline
\caption{locations table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item One-to-Many: location\_inventory, location\_reviews, deliveries
\end{itemize}

\textbf{Spatial Queries:}
\begin{itemize}
    \item Implement spatial index on (latitude, longitude) for nearby location searches
    \item Use Haversine formula or MySQL spatial functions for distance calculations
    \item Support "Find nearest location" feature
\end{itemize}

\newpage

\subsection{Table 18: location\_inventory}

\begin{tablebox}{location\_inventory - Real-Time Stock Levels}
\textbf{Purpose:} Tracks inventory levels per product per location in real-time.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} location\_id, product\_id\\
\textbf{Indexes:} location\_id, product\_id, UNIQUE(location\_id, product\_id)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
location\_id & BIGINT & FOREIGN KEY, NOT NULL, References locations(id) ON DELETE CASCADE \\
\hline
product\_id & BIGINT & FOREIGN KEY, NOT NULL, References products(id) ON DELETE CASCADE \\
\hline
quantity\_available & INT & NOT NULL, DEFAULT 0, Current stock quantity \\
\hline
quantity\_reserved & INT & NOT NULL, DEFAULT 0, Reserved for pending orders \\
\hline
minimum\_stock\_level & INT & NOT NULL, DEFAULT 0, Reorder threshold \\
\hline
maximum\_stock\_level & INT & NULL, Maximum storage capacity \\
\hline
reorder\_quantity & INT & NULL, Standard reorder amount \\
\hline
unit\_cost & DECIMAL(10, 2) & NULL, Cost per unit for inventory valuation \\
\hline
batch\_number & VARCHAR(100) & NULL, Current batch/lot number \\
\hline
expiry\_date & DATE & NULL, Product expiry date \\
\hline
last\_restock\_date & DATE & NULL, Last restocking date \\
\hline
last\_restock\_quantity & INT & NULL, Quantity in last restock \\
\hline
is\_low\_stock & BOOLEAN & NOT NULL, DEFAULT FALSE, Auto-calculated: quantity < minimum \\
\hline
is\_out\_of\_stock & BOOLEAN & NOT NULL, DEFAULT FALSE, Auto-calculated: quantity = 0 \\
\hline
last\_updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP, Track real-time updates \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{location\_inventory table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: locations (location\_id), products (product\_id)
\end{itemize}

\textbf{Inventory Management Features:}
\begin{itemize}
    \item Real-time stock availability for "Nearby Availability Finder"
    \item Automatic low-stock alerts when quantity < minimum\_stock\_level
    \item Reserved quantity prevents overselling pending orders
    \item Batch tracking for quality control and recalls
    \item Expiry date tracking for food safety compliance
    \item Integration with Stock Notification System
\end{itemize}

\textbf{Business Logic:}
\begin{itemize}
    \item \textbf{Available for Sale} = quantity\_available - quantity\_reserved
    \item Update quantity\_reserved when order placed, release on cancellation
    \item Decrement quantity\_available on order fulfillment
    \item Auto-trigger stock notifications when quantity goes from 0 to > 0
\end{itemize}

\newpage

\section{Delivery Tracking Tables}

\subsection{Table 19: delivery\_personnel}

\begin{tablebox}{delivery\_personnel - Delivery Driver Management}
\textbf{Purpose:} Information about delivery drivers and their current status.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} phone (unique), email (unique), status, is\_active
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
employee\_id & VARCHAR(50) & UNIQUE, NULL, Internal employee ID \\
\hline
full\_name & VARCHAR(255) & NOT NULL, Driver's full name \\
\hline
phone & VARCHAR(20) & UNIQUE, NOT NULL, Driver contact phone \\
\hline
email & VARCHAR(255) & UNIQUE, NULL, Driver email address \\
\hline
photo\_url & VARCHAR(500) & NULL, Driver photo for customer display \\
\hline
vehicle\_type & ENUM & NOT NULL, Values: 'bike', 'scooter', 'car', 'van', 'bicycle' \\
\hline
vehicle\_make & VARCHAR(100) & NULL, Vehicle manufacturer \\
\hline
vehicle\_model & VARCHAR(100) & NULL, Vehicle model \\
\hline
vehicle\_registration & VARCHAR(50) & NULL, Vehicle license plate number \\
\hline
vehicle\_color & VARCHAR(50) & NULL, Vehicle color for identification \\
\hline
license\_number & VARCHAR(100) & NULL, Driver's license number \\
\hline
license\_expiry\_date & DATE & NULL, License expiration date \\
\hline
current\_latitude & DECIMAL(10, 8) & NULL, Real-time GPS latitude \\
\hline
current\_longitude & DECIMAL(11, 8) & NULL, Real-time GPS longitude \\
\hline
location\_updated\_at & TIMESTAMP & NULL, Last GPS update timestamp \\
\hline
status & ENUM & NOT NULL, DEFAULT 'offline', Values: 'offline', 'online', 'busy', 'on\_delivery', 'break' \\
\hline
average\_rating & DECIMAL(3, 2) & NULL, DEFAULT 0.00, Driver rating (0-5) \\
\hline
total\_deliveries & INT & NOT NULL, DEFAULT 0, Lifetime delivery count \\
\hline
total\_reviews & INT & NOT NULL, DEFAULT 0, Review count \\
\hline
deliveries\_today & INT & NOT NULL, DEFAULT 0, Today's delivery count \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Active employment status \\
\hline
is\_verified & BOOLEAN & NOT NULL, DEFAULT FALSE, Background check status \\
\hline
hired\_date & DATE & NULL, Employment start date \\
\hline
termination\_date & DATE & NULL, Employment end date \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
deleted\_at & TIMESTAMP & NULL, Soft delete timestamp \\
\hline
\caption{delivery\_personnel table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item One-to-Many: deliveries
\end{itemize}

\textbf{Real-Time Tracking:}
\begin{itemize}
    \item GPS coordinates updated frequently during active deliveries
    \item Status changes tracked for availability management
    \item Integration with delivery assignment algorithms
    \item Performance metrics for driver management
\end{itemize}

\newpage

\subsection{Table 20: deliveries}

\begin{tablebox}{deliveries - Delivery Assignment \& Tracking}
\textbf{Purpose:} Links orders to delivery personnel with timing and tracking.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} order\_id, delivery\_personnel\_id, pickup\_location\_id\\
\textbf{Indexes:} order\_id (unique), delivery\_personnel\_id, status
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
order\_id & BIGINT & FOREIGN KEY, UNIQUE, NOT NULL, References orders(id) \\
\hline
delivery\_personnel\_id & BIGINT & FOREIGN KEY, NULL, References delivery\_personnel(id) \\
\hline
pickup\_location\_id & BIGINT & FOREIGN KEY, NULL, References locations(id) \\
\hline
delivery\_number & VARCHAR(50) & UNIQUE, NOT NULL, Tracking number (e.g., "DEL-20251109-0001") \\
\hline
status & ENUM & NOT NULL, DEFAULT 'pending', Values: 'pending', 'assigned', 'picked\_up', 'in\_transit', 'arrived', 'delivered', 'failed', 'returned' \\
\hline
scheduled\_pickup\_at & TIMESTAMP & NULL, Scheduled pickup time from location \\
\hline
actual\_pickup\_at & TIMESTAMP & NULL, Actual pickup timestamp \\
\hline
estimated\_delivery\_at & TIMESTAMP & NULL, Estimated delivery time \\
\hline
actual\_delivery\_at & TIMESTAMP & NULL, Actual delivery completion time \\
\hline
delivery\_attempts & INT & NOT NULL, DEFAULT 0, Number of delivery attempts \\
\hline
failed\_reason & TEXT & NULL, Reason for failed delivery \\
\hline
proof\_of\_delivery\_url & VARCHAR(500) & NULL, Photo/signature image URL \\
\hline
recipient\_name & VARCHAR(255) & NULL, Name of person who received delivery \\
\hline
recipient\_signature & TEXT & NULL, Digital signature data \\
\hline
distance\_km & DECIMAL(10, 2) & NULL, Total delivery distance in kilometers \\
\hline
delivery\_time\_minutes & INT & NULL, Actual delivery duration in minutes \\
\hline
customer\_rating & INT & NULL, Customer rating (1-5) for this delivery \\
\hline
customer\_feedback & TEXT & NULL, Customer delivery feedback \\
\hline
driver\_notes & TEXT & NULL, Driver's delivery notes \\
\hline
assigned\_at & TIMESTAMP & NULL, When delivery was assigned to driver \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{deliveries table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item One-to-One: orders (order\_id)
    \item Many-to-One: delivery\_personnel (delivery\_personnel\_id), locations (pickup\_location\_id)
    \item One-to-Many: delivery\_tracking\_events
\end{itemize}

\textbf{Delivery Lifecycle:}
\begin{enumerate}
    \item \textbf{pending} → Order placed, awaiting assignment
    \item \textbf{assigned} → Driver assigned to delivery
    \item \textbf{picked\_up} → Driver picked up order from location
    \item \textbf{in\_transit} → On the way to customer
    \item \textbf{arrived} → Driver arrived at delivery address
    \item \textbf{delivered} → Successfully delivered
    \item \textbf{failed} → Delivery failed (customer unavailable, wrong address, etc.)
    \item \textbf{returned} → Returned to location after failed delivery
\end{enumerate}

\newpage
\section{Loyalty \& Wallet System}

\subsection{Table 21: icecoins\_wallet}

\begin{tablebox}{icecoins\_wallet - User IceCoins Balance}
\textbf{Purpose:} Tracks each user's current IceCoins balance (loyalty points).\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id\\
\textbf{Indexes:} user\_id (unique)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, UNIQUE, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
balance & INT & NOT NULL, DEFAULT 0, Current IceCoins balance \\
\hline
lifetime\_earned & INT & NOT NULL, DEFAULT 0, Total IceCoins earned (all-time) \\
\hline
lifetime\_spent & INT & NOT NULL, DEFAULT 0, Total IceCoins spent (all-time) \\
\hline
pending\_balance & INT & NOT NULL, DEFAULT 0, IceCoins pending approval \\
\hline
expired\_total & INT & NOT NULL, DEFAULT 0, Total expired IceCoins \\
\hline
tier & ENUM & NOT NULL, DEFAULT 'bronze', Values: 'bronze', 'silver', 'gold', 'platinum', 'diamond' \\
\hline
tier\_progress & INT & NOT NULL, DEFAULT 0, Progress to next tier \\
\hline
tier\_threshold\_next & INT & NULL, IceCoins needed for next tier \\
\hline
tier\_achieved\_at & TIMESTAMP & NULL, When current tier was achieved \\
\hline
multiplier & DECIMAL(3, 2) & NOT NULL, DEFAULT 1.00, Earning multiplier based on tier \\
\hline
last\_earned\_at & TIMESTAMP & NULL, Last IceCoins earning timestamp \\
\hline
last\_spent\_at & TIMESTAMP & NULL, Last redemption timestamp \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{icecoins\_wallet table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item One-to-One: users (user\_id)
    \item One-to-Many: icecoins\_transactions
\end{itemize}

\textbf{Tier System:}
\begin{itemize}
    \item \textbf{Bronze:} 0-999 lifetime IceCoins, 1.0× multiplier
    \item \textbf{Silver:} 1,000-4,999 lifetime IceCoins, 1.2× multiplier
    \item \textbf{Gold:} 5,000-9,999 lifetime IceCoins, 1.5× multiplier
    \item \textbf{Platinum:} 10,000-24,999 lifetime IceCoins, 1.75× multiplier
    \item \textbf{Diamond:} 25,000+ lifetime IceCoins, 2.0× multiplier
\end{itemize}

\newpage

\subsection{Table 22: icecoins\_transactions}

\begin{tablebox}{icecoins\_transactions - IceCoins Transaction History}
\textbf{Purpose:} Complete audit trail of all IceCoins earnings and redemptions.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id, order\_id, challenge\_id\\
\textbf{Indexes:} user\_id, transaction\_type, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
transaction\_type & ENUM & NOT NULL, Values: 'earned', 'spent', 'refunded', 'expired', 'adjusted', 'bonus' \\
\hline
amount & INT & NOT NULL, IceCoins amount (positive for earn, negative for spend) \\
\hline
balance\_before & INT & NOT NULL, Balance before transaction \\
\hline
balance\_after & INT & NOT NULL, Balance after transaction \\
\hline
source\_type & ENUM & NOT NULL, Values: 'order', 'challenge', 'referral', 'review', 'signup\_bonus', 'admin', 'promotion', 'expiry' \\
\hline
source\_id & BIGINT & NULL, ID of related entity (order\_id, challenge\_id, etc.) \\
\hline
order\_id & BIGINT & FOREIGN KEY, NULL, References orders(id) if order-related \\
\hline
challenge\_id & BIGINT & FOREIGN KEY, NULL, References challenges(id) if challenge-related \\
\hline
description & VARCHAR(500) & NOT NULL, Transaction description for user \\
\hline
multiplier\_applied & DECIMAL(3, 2) & NULL, Tier multiplier at transaction time \\
\hline
base\_amount & INT & NULL, Original amount before multiplier \\
\hline
expiry\_date & DATE & NULL, When these IceCoins expire (for earned coins) \\
\hline
is\_expired & BOOLEAN & NOT NULL, DEFAULT FALSE, Expiry status \\
\hline
expired\_at & TIMESTAMP & NULL, Expiration timestamp \\
\hline
admin\_user\_id & BIGINT & NULL, Admin who made adjustment (for manual transactions) \\
\hline
admin\_notes & TEXT & NULL, Admin notes for manual adjustments \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{icecoins\_transactions table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id), orders (order\_id), challenges (challenge\_id)
\end{itemize}

\textbf{Transaction Examples:}
\begin{itemize}
    \item \textbf{Earned:} "+50 IceCoins from order \#ORD-123"
    \item \textbf{Spent:} "-100 IceCoins applied to order \#ORD-456"
    \item \textbf{Refunded:} "+100 IceCoins refunded from cancelled order"
    \item \textbf{Expired:} "-25 IceCoins expired (earned 12 months ago)"
    \item \textbf{Bonus:} "+500 IceCoins signup bonus"
\end{itemize}

\newpage

\subsection{Table 23: loyalty\_tiers}

\begin{tablebox}{loyalty\_tiers - Tier Configuration}
\textbf{Purpose:} Defines loyalty tier thresholds, benefits, and multipliers.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} tier\_name (unique), min\_points
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
tier\_name & VARCHAR(50) & UNIQUE, NOT NULL, Tier name: 'bronze', 'silver', 'gold', 'platinum', 'diamond' \\
\hline
tier\_level & INT & UNIQUE, NOT NULL, Numeric level (1=bronze, 5=diamond) \\
\hline
min\_points & INT & NOT NULL, Minimum lifetime IceCoins required \\
\hline
max\_points & INT & NULL, Maximum points (NULL for highest tier) \\
\hline
multiplier & DECIMAL(3, 2) & NOT NULL, DEFAULT 1.00, Earning multiplier \\
\hline
color\_hex & VARCHAR(7) & NOT NULL, Tier color for UI display \\
\hline
icon\_url & VARCHAR(500) & NULL, Tier badge icon URL \\
\hline
benefits & JSON & NULL, Array of benefits: ["Free delivery", "Priority support", "Exclusive products"] \\
\hline
discount\_percentage & DECIMAL(5, 2) & NOT NULL, DEFAULT 0.00, Tier-specific discount (0-100) \\
\hline
birthday\_bonus & INT & NOT NULL, DEFAULT 0, Extra IceCoins on birthday \\
\hline
free\_delivery\_threshold & DECIMAL(10, 2) & NULL, Minimum order for free delivery \\
\hline
priority\_support & BOOLEAN & NOT NULL, DEFAULT FALSE, Access to priority customer support \\
\hline
early\_access & BOOLEAN & NOT NULL, DEFAULT FALSE, Early access to new products \\
\hline
exclusive\_products & BOOLEAN & NOT NULL, DEFAULT FALSE, Access to tier-exclusive products \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Tier active status \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{loyalty\_tiers table structure}
\end{longtable}

\textbf{Example Configuration:}
\begin{itemize}
    \item \textbf{Bronze:} 0-999 points, 1.0× multiplier, \#CD7F32 color
    \item \textbf{Silver:} 1,000-4,999 points, 1.2× multiplier, \#C0C0C0 color, birthday bonus 50
    \item \textbf{Gold:} 5,000-9,999 points, 1.5× multiplier, \#FFD700 color, priority support
    \item \textbf{Platinum:} 10,000-24,999 points, 1.75× multiplier, \#E5E4E2 color, early access
    \item \textbf{Diamond:} 25,000+ points, 2.0× multiplier, \#B9F2FF color, all benefits
\end{itemize}

\newpage

\subsection{Table 24: reward\_redemptions}

\begin{tablebox}{reward\_redemptions - Reward Catalog Redemptions}
\textbf{Purpose:} Tracks redemption of special rewards/prizes with IceCoins.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id, reward\_id\\
\textbf{Indexes:} user\_id, reward\_id, status
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
reward\_id & BIGINT & FOREIGN KEY, NOT NULL, References rewards\_catalog(id) \\
\hline
redemption\_code & VARCHAR(50) & UNIQUE, NOT NULL, Unique code for verification \\
\hline
icecoins\_cost & INT & NOT NULL, IceCoins spent on redemption \\
\hline
reward\_name & VARCHAR(255) & NOT NULL, Snapshot of reward name \\
\hline
reward\_description & TEXT & NULL, Snapshot of reward description \\
\hline
reward\_type & ENUM & NOT NULL, Values: 'discount\_coupon', 'free\_product', 'merchandise', 'gift\_card', 'experience' \\
\hline
status & ENUM & NOT NULL, DEFAULT 'pending', Values: 'pending', 'approved', 'shipped', 'delivered', 'used', 'expired', 'cancelled' \\
\hline
approval\_required & BOOLEAN & NOT NULL, DEFAULT FALSE, Requires admin approval \\
\hline
approved\_by & BIGINT & NULL, Admin ID who approved \\
\hline
approved\_at & TIMESTAMP & NULL, Approval timestamp \\
\hline
shipping\_address\_id & BIGINT & NULL, References user\_addresses(id) for physical rewards \\
\hline
tracking\_number & VARCHAR(100) & NULL, Shipment tracking number \\
\hline
expiry\_date & DATE & NULL, Redemption expiration date \\
\hline
is\_used & BOOLEAN & NOT NULL, DEFAULT FALSE, Usage status \\
\hline
used\_at & TIMESTAMP & NULL, When reward was used \\
\hline
notes & TEXT & NULL, Admin or system notes \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{reward\_redemptions table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id), rewards\_catalog (reward\_id), user\_addresses (shipping\_address\_id)
\end{itemize}

\textbf{Reward Types:}
\begin{itemize}
    \item \textbf{discount\_coupon:} Promo code for percentage/amount off
    \item \textbf{free\_product:} Free product voucher
    \item \textbf{merchandise:} Branded merchandise (t-shirts, bags, etc.)
    \item \textbf{gift\_card:} External gift cards
    \item \textbf{experience:} Special experiences (cooking classes, tours)
\end{itemize}

\newpage

\section{Challenges \& Gamification}

\subsection{Table 25: challenges}

\begin{tablebox}{challenges - Gamification Challenges}
\textbf{Purpose:} Defines available challenges users can complete for rewards.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} challenge\_type, status, start\_date, end\_date
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
title & VARCHAR(255) & NOT NULL, Challenge title: "First Order Challenge", "Recipe Master" \\
\hline
description & TEXT & NOT NULL, Detailed challenge description \\
\hline
challenge\_type & ENUM & NOT NULL, Values: 'one\_time', 'recurring\_daily', 'recurring\_weekly', 'recurring\_monthly', 'seasonal' \\
\hline
category & ENUM & NOT NULL, Values: 'ordering', 'recipes', 'social', 'review', 'referral', 'streak', 'exploration' \\
\hline
difficulty & ENUM & NOT NULL, DEFAULT 'easy', Values: 'easy', 'medium', 'hard', 'expert' \\
\hline
target\_metric & VARCHAR(100) & NOT NULL, Metric to track: 'order\_count', 'recipe\_tries', 'days\_streak', etc. \\
\hline
target\_value & INT & NOT NULL, Goal value to achieve \\
\hline
current\_progress\_formula & TEXT & NULL, SQL or logic to calculate progress \\
\hline
reward\_icecoins & INT & NOT NULL, DEFAULT 0, IceCoins reward for completion \\
\hline
reward\_badge\_id & BIGINT & NULL, Badge ID awarded \\
\hline
reward\_additional & JSON & NULL, Additional rewards: \{"free\_delivery": true, "discount\_code": "CHAL50"\} \\
\hline
icon\_url & VARCHAR(500) & NULL, Challenge icon image \\
\hline
banner\_image\_url & VARCHAR(500) & NULL, Challenge banner/card image \\
\hline
tier\_requirement & ENUM & NULL, Minimum tier: 'bronze', 'silver', 'gold', 'platinum', 'diamond' \\
\hline
max\_completions & INT & NULL, Max times challenge can be completed (NULL for unlimited) \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Challenge active status \\
\hline
is\_featured & BOOLEAN & NOT NULL, DEFAULT FALSE, Featured on homepage \\
\hline
start\_date & DATE & NULL, Challenge start date (NULL for always available) \\
\hline
end\_date & DATE & NULL, Challenge end date (NULL for no expiry) \\
\hline
participant\_count & INT & NOT NULL, DEFAULT 0, Users currently participating \\
\hline
completion\_count & INT & NOT NULL, DEFAULT 0, Total completions \\
\hline
sort\_order & INT & NOT NULL, DEFAULT 0, Display order \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{challenges table structure}
\end{longtable}

\textbf{Challenge Examples:}
\begin{itemize}
    \item \textbf{First Order:} Place 1 order → 100 IceCoins
    \item \textbf{Recipe Explorer:} Try 5 different recipes → 200 IceCoins + "Chef" badge
    \item \textbf{Week Warrior:} Order 7 days in a row → 500 IceCoins
    \item \textbf{Social Butterfly:} Share 10 recipes → 150 IceCoins
    \item \textbf{Review Master:} Write 20 reviews → 300 IceCoins
\end{itemize}

\newpage

\subsection{Table 26: user\_challenges}

\begin{tablebox}{user\_challenges - User Challenge Progress}
\textbf{Purpose:} Tracks individual user progress on active challenges.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id, challenge\_id\\
\textbf{Indexes:} user\_id, challenge\_id, status, UNIQUE(user\_id, challenge\_id, started\_at)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
challenge\_id & BIGINT & FOREIGN KEY, NOT NULL, References challenges(id) ON DELETE CASCADE \\
\hline
status & ENUM & NOT NULL, DEFAULT 'in\_progress', Values: 'in\_progress', 'completed', 'failed', 'expired', 'abandoned' \\
\hline
current\_progress & INT & NOT NULL, DEFAULT 0, Current progress value \\
\hline
target\_value & INT & NOT NULL, Goal value (snapshot from challenge) \\
\hline
progress\_percentage & DECIMAL(5, 2) & NOT NULL, DEFAULT 0.00, Calculated progress \% (0-100) \\
\hline
completion\_count & INT & NOT NULL, DEFAULT 0, How many times user completed this challenge \\
\hline
last\_progress\_at & TIMESTAMP & NULL, Last time progress was updated \\
\hline
started\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP, Challenge start time \\
\hline
completed\_at & TIMESTAMP & NULL, Completion timestamp \\
\hline
expires\_at & TIMESTAMP & NULL, Challenge expiration time \\
\hline
reward\_claimed & BOOLEAN & NOT NULL, DEFAULT FALSE, Reward claim status \\
\hline
reward\_claimed\_at & TIMESTAMP & NULL, When reward was claimed \\
\hline
icecoins\_earned & INT & NOT NULL, DEFAULT 0, IceCoins earned from this challenge \\
\hline
notification\_sent & BOOLEAN & NOT NULL, DEFAULT FALSE, Completion notification sent \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{user\_challenges table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id), challenges (challenge\_id)
\end{itemize}

\textbf{Progress Tracking Logic:}
\begin{itemize}
    \item Auto-update current\_progress on relevant user actions
    \item Calculate progress\_percentage = (current\_progress / target\_value) × 100
    \item Mark as completed when current\_progress ≥ target\_value
    \item Send notification when status changes to completed
    \item Allow recurring challenges (new record created after completion)
\end{itemize}

\newpage

\subsection{Table 27: challenge\_progress\_events}

\begin{tablebox}{challenge\_progress\_events - Challenge Activity Log}
\textbf{Purpose:} Detailed log of all actions contributing to challenge progress.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_challenge\_id\\
\textbf{Indexes:} user\_challenge\_id, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_challenge\_id & BIGINT & FOREIGN KEY, NOT NULL, References user\_challenges(id) ON DELETE CASCADE \\
\hline
event\_type & VARCHAR(100) & NOT NULL, Type of action: 'order\_placed', 'recipe\_tried', 'review\_posted', etc. \\
\hline
related\_entity\_type & VARCHAR(50) & NULL, Entity type: 'order', 'recipe', 'review', 'referral' \\
\hline
related\_entity\_id & BIGINT & NULL, ID of related entity \\
\hline
progress\_increment & INT & NOT NULL, DEFAULT 1, How much progress this event adds \\
\hline
progress\_before & INT & NOT NULL, Progress value before this event \\
\hline
progress\_after & INT & NOT NULL, Progress value after this event \\
\hline
description & VARCHAR(500) & NULL, Event description for display \\
\hline
metadata & JSON & NULL, Additional event metadata \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{challenge\_progress\_events table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: user\_challenges (user\_challenge\_id)
\end{itemize}

\textbf{Example Events:}
\begin{itemize}
    \item Order placed: +1 progress toward "10 Orders Challenge"
    \item Recipe tried: +1 progress toward "Recipe Explorer Challenge"
    \item Daily login: +1 progress toward "7-Day Streak Challenge"
    \item Review posted: +1 progress toward "Review Master Challenge"
\end{itemize}

\newpage

\section{Reviews \& Ratings}

\subsection{Table 28: reviews}

\begin{tablebox}{reviews - Product \& Location Reviews}
\textbf{Purpose:} User reviews and ratings for products, locations, and orders.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id, product\_id, location\_id, order\_id\\
\textbf{Indexes:} user\_id, product\_id, location\_id, order\_id, is\_verified, status
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
reviewable\_type & ENUM & NOT NULL, Values: 'product', 'location', 'order', 'recipe' \\
\hline
reviewable\_id & BIGINT & NOT NULL, ID of the reviewed entity \\
\hline
product\_id & BIGINT & FOREIGN KEY, NULL, References products(id) if product review \\
\hline
location\_id & BIGINT & FOREIGN KEY, NULL, References locations(id) if location review \\
\hline
order\_id & BIGINT & FOREIGN KEY, NULL, References orders(id) for verified purchases \\
\hline
rating & INT & NOT NULL, Rating value 1-5 stars \\
\hline
title & VARCHAR(255) & NULL, Review title/headline \\
\hline
comment & TEXT & NOT NULL, Review text content \\
\hline
pros & TEXT & NULL, Positive aspects \\
\hline
cons & TEXT & NULL, Negative aspects \\
\hline
is\_verified\_purchase & BOOLEAN & NOT NULL, DEFAULT FALSE, Verified buyer badge \\
\hline
is\_featured & BOOLEAN & NOT NULL, DEFAULT FALSE, Featured review flag \\
\hline
helpful\_count & INT & NOT NULL, DEFAULT 0, Number of "helpful" votes \\
\hline
not\_helpful\_count & INT & NOT NULL, DEFAULT 0, Number of "not helpful" votes \\
\hline
status & ENUM & NOT NULL, DEFAULT 'pending', Values: 'pending', 'approved', 'rejected', 'reported', 'removed' \\
\hline
moderation\_notes & TEXT & NULL, Admin moderation notes \\
\hline
moderated\_by & BIGINT & NULL, Admin ID who moderated \\
\hline
moderated\_at & TIMESTAMP & NULL, Moderation timestamp \\
\hline
icecoins\_awarded & INT & NOT NULL, DEFAULT 0, IceCoins earned for this review \\
\hline
images & JSON & NULL, Array of review image URLs \\
\hline
reported\_count & INT & NOT NULL, DEFAULT 0, Times reported by users \\
\hline
flagged\_for\_review & BOOLEAN & NOT NULL, DEFAULT FALSE, Flagged for moderation \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
deleted\_at & TIMESTAMP & NULL, Soft delete timestamp \\
\hline
\caption{reviews table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id), products (product\_id), locations (location\_id), orders (order\_id)
    \item One-to-Many: review\_responses, review\_votes
\end{itemize}

\textbf{Review Workflow:}
\begin{enumerate}
    \item User submits review (status: pending)
    \item Auto-approve if user has verified purchases OR manual moderation
    \item Approved reviews visible to public
    \item Award IceCoins for first review (e.g., 50 coins)
    \item Users can vote helpful/not helpful
    \item Featured reviews displayed prominently
\end{enumerate}

\newpage

\subsection{Table 29: review\_responses}

\begin{tablebox}{review\_responses - Admin/Vendor Responses to Reviews}
\textbf{Purpose:} Official responses to customer reviews from business.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} review\_id, responder\_id\\
\textbf{Indexes:} review\_id, responder\_id
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
review\_id & BIGINT & FOREIGN KEY, NOT NULL, References reviews(id) ON DELETE CASCADE \\
\hline
responder\_id & BIGINT & FOREIGN KEY, NOT NULL, Admin/vendor user ID \\
\hline
responder\_name & VARCHAR(255) & NOT NULL, Name displayed (e.g., "SavoyConnect Team") \\
\hline
responder\_role & VARCHAR(100) & NULL, Role/title (e.g., "Customer Support Manager") \\
\hline
response\_text & TEXT & NOT NULL, Response content \\
\hline
is\_official & BOOLEAN & NOT NULL, DEFAULT TRUE, Official company response flag \\
\hline
is\_visible & BOOLEAN & NOT NULL, DEFAULT TRUE, Visibility status \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{review\_responses table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: reviews (review\_id)
\end{itemize}

\textbf{Response Best Practices:}
\begin{itemize}
    \item Thank customer for feedback
    \item Address specific concerns mentioned in review
    \item Offer solutions or compensation if applicable
    \item Professional and friendly tone
    \item Respond within 24-48 hours of review
    \item Public responses show customer care commitment
\end{itemize}

\newpage

\subsection{Table 30: review\_votes}

\begin{tablebox}{review\_votes - Review Helpfulness Voting}
\textbf{Purpose:} Tracks user votes on review helpfulness.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} review\_id, user\_id\\
\textbf{Indexes:} review\_id, user\_id, UNIQUE(review\_id, user\_id)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
review\_id & BIGINT & FOREIGN KEY, NOT NULL, References reviews(id) ON DELETE CASCADE \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
vote\_type & ENUM & NOT NULL, Values: 'helpful', 'not\_helpful' \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{review\_votes table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: reviews (review\_id), users (user\_id)
\end{itemize}

\textbf{Voting Logic:}
\begin{itemize}
    \item Each user can vote once per review (enforced by unique constraint)
    \item Users can change vote (update existing record)
    \item Helpful count increments review.helpful\_count
    \item Sort reviews by helpfulness ratio: helpful / (helpful + not\_helpful)
    \item Most helpful reviews appear first
    \item Voting helps surface quality reviews
\end{itemize}

\newpage
\section{Referral System}

\subsection{Table 31: referrals}

\begin{tablebox}{referrals - User Referral Tracking}
\textbf{Purpose:} Tracks referral relationships and rewards between users.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} referrer\_id, referee\_id\\
\textbf{Indexes:} referrer\_id, referee\_id, referral\_code (unique), status
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
referrer\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) - User who sent referral \\
\hline
referee\_id & BIGINT & FOREIGN KEY, NULL, References users(id) - User who signed up \\
\hline
referral\_code & VARCHAR(50) & UNIQUE, NOT NULL, Unique referral code (e.g., "rifaf2025XYZ") \\
\hline
referee\_email & VARCHAR(255) & NULL, Email of invited person (before signup) \\
\hline
referee\_phone & VARCHAR(20) & NULL, Phone of invited person (before signup) \\
\hline
status & ENUM & NOT NULL, DEFAULT 'pending', Values: 'pending', 'signed\_up', 'qualified', 'rewarded', 'expired', 'invalid' \\
\hline
referrer\_reward\_type & VARCHAR(50) & NULL, Reward type: 'icecoins', 'discount', 'free\_delivery' \\
\hline
referrer\_reward\_value & INT & NULL, Reward amount for referrer \\
\hline
referrer\_reward\_claimed & BOOLEAN & NOT NULL, DEFAULT FALSE, Referrer reward claimed status \\
\hline
referrer\_rewarded\_at & TIMESTAMP & NULL, When referrer received reward \\
\hline
referee\_reward\_type & VARCHAR(50) & NULL, Reward type for new user \\
\hline
referee\_reward\_value & INT & NULL, Reward amount for referee \\
\hline
referee\_reward\_claimed & BOOLEAN & NOT NULL, DEFAULT FALSE, Referee reward claimed status \\
\hline
referee\_rewarded\_at & TIMESTAMP & NULL, When referee received reward \\
\hline
qualifying\_order\_id & BIGINT & NULL, First order ID that qualified the referral \\
\hline
qualifying\_criteria & JSON & NULL, Criteria met: \{"min\_order\_amount": 500, "order\_completed": true\} \\
\hline
utm\_source & VARCHAR(100) & NULL, Traffic source for analytics \\
\hline
utm\_medium & VARCHAR(100) & NULL, Marketing medium \\
\hline
utm\_campaign & VARCHAR(100) & NULL, Campaign name \\
\hline
device\_type & VARCHAR(50) & NULL, Device used for referral: 'mobile', 'tablet', 'desktop' \\
\hline
ip\_address & VARCHAR(45) & NULL, IP address of referee signup \\
\hline
signed\_up\_at & TIMESTAMP & NULL, Referee signup timestamp \\
\hline
qualified\_at & TIMESTAMP & NULL, When referral qualified for rewards \\
\hline
expires\_at & TIMESTAMP & NULL, Referral link expiration \\
\hline
notes & TEXT & NULL, Admin notes \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{referrals table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (referrer\_id, referee\_id)
\end{itemize}

\textbf{Referral Flow:}
\begin{enumerate}
    \item \textbf{pending:} Referral code generated, link shared
    \item \textbf{signed\_up:} New user registered using referral code
    \item \textbf{qualified:} New user completed qualifying action (first order > minimum amount)
    \item \textbf{rewarded:} Both users received their rewards
    \item \textbf{expired:} Referral expired before signup
    \item \textbf{invalid:} Fraud detection or policy violation
\end{enumerate}

\textbf{Typical Rewards:}
\begin{itemize}
    \item \textbf{Referrer:} 200 IceCoins per successful referral
    \item \textbf{Referee:} 100 IceCoins signup bonus + 10\% off first order
    \item \textbf{Qualification:} First order must be ≥ 500 BDT
\end{itemize}

\newpage

\section{Promotions \& Coupons}

\subsection{Table 32: promotions}

\begin{tablebox}{promotions - Marketing Promotions \& Campaigns}
\textbf{Purpose:} Defines promotional campaigns with discounts and conditions.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} promo\_code (unique), promotion\_type, status, start\_date, end\_date
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
promo\_code & VARCHAR(50) & UNIQUE, NOT NULL, Promo code: "WELCOME10", "SUMMER2025" \\
\hline
title & VARCHAR(255) & NOT NULL, Promotion title for display \\
\hline
description & TEXT & NULL, Promotion description and terms \\
\hline
promotion\_type & ENUM & NOT NULL, Values: 'percentage\_discount', 'fixed\_discount', 'free\_delivery', 'buy\_x\_get\_y', 'cashback' \\
\hline
discount\_type & ENUM & NULL, Values: 'percentage', 'fixed\_amount', 'free\_shipping' \\
\hline
discount\_value & DECIMAL(10, 2) & NULL, Discount amount or percentage \\
\hline
max\_discount\_amount & DECIMAL(10, 2) & NULL, Maximum discount cap for percentage discounts \\
\hline
min\_order\_amount & DECIMAL(10, 2) & NULL, Minimum order value to apply \\
\hline
max\_order\_amount & DECIMAL(10, 2) & NULL, Maximum order value eligible \\
\hline
applicable\_to & ENUM & NOT NULL, DEFAULT 'all', Values: 'all', 'specific\_products', 'specific\_categories', 'first\_order\_only' \\
\hline
product\_ids & JSON & NULL, Array of eligible product IDs if specific\_products \\
\hline
category\_ids & JSON & NULL, Array of eligible category IDs if specific\_categories \\
\hline
excluded\_product\_ids & JSON & NULL, Array of excluded product IDs \\
\hline
user\_eligibility & ENUM & NOT NULL, DEFAULT 'all', Values: 'all', 'new\_users\_only', 'specific\_tier', 'specific\_users' \\
\hline
tier\_requirement & ENUM & NULL, Required loyalty tier: 'silver', 'gold', 'platinum', 'diamond' \\
\hline
eligible\_user\_ids & JSON & NULL, Array of specific user IDs if targeted \\
\hline
usage\_limit\_total & INT & NULL, Total usage limit across all users (NULL = unlimited) \\
\hline
usage\_limit\_per\_user & INT & NULL, Usage limit per user (NULL = unlimited) \\
\hline
usage\_count & INT & NOT NULL, DEFAULT 0, Current usage count \\
\hline
start\_date & TIMESTAMP & NOT NULL, Promotion start date/time \\
\hline
end\_date & TIMESTAMP & NULL, Promotion end date/time (NULL = no expiry) \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Active status \\
\hline
is\_featured & BOOLEAN & NOT NULL, DEFAULT FALSE, Featured on homepage \\
\hline
is\_stackable & BOOLEAN & NOT NULL, DEFAULT FALSE, Can be combined with other promos \\
\hline
priority & INT & NOT NULL, DEFAULT 0, Priority for auto-apply (higher = first) \\
\hline
banner\_image\_url & VARCHAR(500) & NULL, Promotional banner image \\
\hline
terms\_conditions & TEXT & NULL, Detailed terms and conditions \\
\hline
created\_by & BIGINT & NULL, Admin user ID who created promotion \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{promotions table structure}
\end{longtable}

\textbf{Promotion Examples:}
\begin{itemize}
    \item \textbf{WELCOME10:} 10\% off first order, new users only, min 300 BDT
    \item \textbf{SUMMER2025:} 20\% off (max 200 BDT discount), all ice cream products
    \item \textbf{FREEDEL:} Free delivery on orders above 500 BDT
    \item \textbf{GOLD50:} 50 BDT fixed discount for Gold+ tier members
    \item \textbf{BOGO:} Buy 2 get 1 free on selected products
\end{itemize}

\newpage

\subsection{Table 33: promotion\_usage}

\begin{tablebox}{promotion\_usage - Promotion Redemption History}
\textbf{Purpose:} Tracks which users used which promotions on which orders.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} promotion\_id, user\_id, order\_id\\
\textbf{Indexes:} promotion\_id, user\_id, order\_id, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
promotion\_id & BIGINT & FOREIGN KEY, NOT NULL, References promotions(id) \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
order\_id & BIGINT & FOREIGN KEY, NOT NULL, References orders(id) ON DELETE CASCADE \\
\hline
promo\_code\_used & VARCHAR(50) & NOT NULL, Snapshot of promo code \\
\hline
discount\_applied & DECIMAL(10, 2) & NOT NULL, Actual discount amount applied \\
\hline
order\_subtotal & DECIMAL(10, 2) & NOT NULL, Order subtotal before discount \\
\hline
order\_total & DECIMAL(10, 2) & NOT NULL, Order total after discount \\
\hline
conditions\_met & JSON & NULL, Conditions met at usage time \\
\hline
user\_tier\_at\_usage & VARCHAR(50) & NULL, User's loyalty tier when used \\
\hline
is\_auto\_applied & BOOLEAN & NOT NULL, DEFAULT FALSE, Auto-applied or manual entry \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{promotion\_usage table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: promotions (promotion\_id), users (user\_id), orders (order\_id)
\end{itemize}

\textbf{Analytics Use Cases:}
\begin{itemize}
    \item Track most popular promo codes
    \item Calculate ROI per promotion campaign
    \item Identify high-value customers using promos
    \item Prevent abuse (check usage limits)
    \item Generate promotional performance reports
\end{itemize}

\newpage

\section{Notifications System}

\subsection{Table 34: notifications}

\begin{tablebox}{notifications - User Notifications}
\textbf{Purpose:} Stores all notifications sent to users across channels.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id\\
\textbf{Indexes:} user\_id, notification\_type, is\_read, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
notification\_type & ENUM & NOT NULL, Values: 'order\_update', 'delivery', 'promotion', 'challenge', 'review', 'icecoins', 'system', 'social' \\
\hline
title & VARCHAR(255) & NOT NULL, Notification title/headline \\
\hline
message & TEXT & NOT NULL, Notification message body \\
\hline
data & JSON & NULL, Additional structured data \\
\hline
action\_type & VARCHAR(100) & NULL, Deep link action: 'open\_order', 'view\_promotion', 'complete\_challenge' \\
\hline
action\_url & VARCHAR(500) & NULL, URL or deep link to navigate \\
\hline
related\_entity\_type & VARCHAR(50) & NULL, Related entity: 'order', 'promotion', 'challenge', 'product' \\
\hline
related\_entity\_id & BIGINT & NULL, ID of related entity \\
\hline
priority & ENUM & NOT NULL, DEFAULT 'normal', Values: 'low', 'normal', 'high', 'urgent' \\
\hline
channel & ENUM & NOT NULL, Values: 'in\_app', 'push', 'email', 'sms' \\
\hline
is\_read & BOOLEAN & NOT NULL, DEFAULT FALSE, Read status \\
\hline
read\_at & TIMESTAMP & NULL, When notification was read \\
\hline
is\_delivered & BOOLEAN & NOT NULL, DEFAULT FALSE, Delivery status \\
\hline
delivered\_at & TIMESTAMP & NULL, When notification was delivered \\
\hline
is\_clicked & BOOLEAN & NOT NULL, DEFAULT FALSE, Click/interaction status \\
\hline
clicked\_at & TIMESTAMP & NULL, When notification was clicked \\
\hline
expires\_at & TIMESTAMP & NULL, Notification expiration time \\
\hline
image\_url & VARCHAR(500) & NULL, Notification image/icon \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{notifications table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id)
\end{itemize}

\textbf{Notification Types:}
\begin{itemize}
    \item \textbf{order\_update:} "Your order \#123 is out for delivery"
    \item \textbf{delivery:} "Your order has been delivered!"
    \item \textbf{promotion:} "Flash Sale: 20\% off all ice cream!"
    \item \textbf{challenge:} "You completed 'Week Warrior' challenge! +500 IceCoins"
    \item \textbf{review:} "How was your order? Leave a review for 50 IceCoins"
    \item \textbf{icecoins:} "You earned 100 IceCoins from your recent order"
    \item \textbf{system:} "New features available! Check them out"
    \item \textbf{social:} "@rifaf liked your recipe"
\end{itemize}

\newpage

\subsection{Table 35: notification\_templates}

\begin{tablebox}{notification\_templates - Notification Templates}
\textbf{Purpose:} Reusable notification templates with dynamic variables.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} template\_key (unique), notification\_type
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
template\_key & VARCHAR(100) & UNIQUE, NOT NULL, Unique template identifier: "order\_confirmed", "delivery\_started" \\
\hline
notification\_type & ENUM & NOT NULL, Type category \\
\hline
channel & ENUM & NOT NULL, Target channel: 'in\_app', 'push', 'email', 'sms' \\
\hline
title\_template & VARCHAR(255) & NULL, Title with variables: "Order \{\{order\_number\}\} Confirmed!" \\
\hline
message\_template & TEXT & NOT NULL, Message body with variables \\
\hline
email\_subject & VARCHAR(255) & NULL, Email subject line (for email channel) \\
\hline
email\_html\_template & TEXT & NULL, HTML email template \\
\hline
sms\_template & VARCHAR(500) & NULL, SMS message template (160 char limit) \\
\hline
variables & JSON & NULL, Available variables: ["order\_number", "user\_name", "delivery\_time"] \\
\hline
default\_action\_type & VARCHAR(100) & NULL, Default action when clicked \\
\hline
default\_action\_url & VARCHAR(500) & NULL, Default deep link URL \\
\hline
icon\_url & VARCHAR(500) & NULL, Default icon for this template \\
\hline
priority & ENUM & NOT NULL, DEFAULT 'normal', Default priority \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Template active status \\
\hline
language & VARCHAR(10) & NOT NULL, DEFAULT 'en', ISO 639-1 language code \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{notification\_templates table structure}
\end{longtable}
\newpage
\textbf{Example Templates:}
\begin{itemize}
    \item \textbf{order\_confirmed:} "Hi \{\{user\_name\}\}, your order \{\{order\_number\}\} has been confirmed! Estimated delivery: \{\{delivery\_time\}\}"
    \item \textbf{delivery\_started:} "Your order is on the way! Track driver: \{\{driver\_name\}\}"
    \item \textbf{icecoins\_earned:} "Congrats! You earned \{\{icecoins\}\} IceCoins from order \{\{order\_number\}\}"
    \item \textbf{challenge\_completed:} "Amazing! You completed '\{\{challenge\_name\}\}' and earned \{\{icecoins\}\} IceCoins!"
\end{itemize}

\newpage

\section{Recipe System}

\subsection{Table 36: recipes}

\begin{tablebox}{recipes - Recipe Content \& Discovery}
\textbf{Purpose:} User-generated and curated recipes using SavoyConnect products.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} author\_id, slug (unique), status, difficulty, is\_featured
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
author\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) - Recipe creator \\
\hline
title & VARCHAR(255) & NOT NULL, Recipe name: "Chocolate Lava Cake", "Mango Smoothie Bowl" \\
\hline
slug & VARCHAR(255) & UNIQUE, NOT NULL, URL-friendly identifier \\
\hline
description & TEXT & NOT NULL, Short recipe description \\
\hline
story & TEXT & NULL, Personal story or context behind recipe \\
\hline
prep\_time\_minutes & INT & NOT NULL, Preparation time in minutes \\
\hline
cook\_time\_minutes & INT & NULL, Cooking/processing time \\
\hline
total\_time\_minutes & INT & NOT NULL, Total time (prep + cook) \\
\hline
servings & INT & NOT NULL, Number of servings \\
\hline
difficulty & ENUM & NOT NULL, Values: 'easy', 'medium', 'hard', 'expert' \\
\hline
cuisine\_type & VARCHAR(100) & NULL, Cuisine: 'bangladeshi', 'indian', 'italian', 'fusion' \\
\hline
meal\_type & ENUM & NULL, Values: 'breakfast', 'lunch', 'dinner', 'snack', 'dessert', 'beverage' \\
\hline
dietary\_tags & JSON & NULL, Array: ["vegetarian", "vegan", "gluten-free", "low-sugar"] \\
\hline
ingredients & JSON & NOT NULL, Array of ingredient objects with product links \\
\hline
instructions & JSON & NOT NULL, Array of step objects with descriptions and optional images \\
\hline
tips & TEXT & NULL, Chef tips and tricks \\
\hline
nutrition\_per\_serving & JSON & NULL, Nutritional information object \\
\hline
featured\_image\_url & VARCHAR(500) & NOT NULL, Main recipe image \\
\hline
gallery\_images & JSON & NULL, Array of additional image URLs \\
\hline
video\_url & VARCHAR(500) & NULL, Recipe video URL (YouTube, Vimeo) \\
\hline
average\_rating & DECIMAL(3, 2) & NOT NULL, DEFAULT 0.00, Average user rating (0-5) \\
\hline
rating\_count & INT & NOT NULL, DEFAULT 0, Number of ratings \\
\hline
view\_count & INT & NOT NULL, DEFAULT 0, Total views \\
\hline
try\_count & INT & NOT NULL, DEFAULT 0, Users who marked "I tried this" \\
\hline
save\_count & INT & NOT NULL, DEFAULT 0, Users who saved/bookmarked \\
\hline
share\_count & INT & NOT NULL, DEFAULT 0, Times shared \\
\hline
status & ENUM & NOT NULL, DEFAULT 'draft', Values: 'draft', 'pending\_review', 'published', 'rejected', 'archived' \\
\hline
is\_featured & BOOLEAN & NOT NULL, DEFAULT FALSE, Featured recipe flag \\
\hline
is\_verified & BOOLEAN & NOT NULL, DEFAULT FALSE, Verified by chef/admin \\
\hline
verified\_by & BIGINT & NULL, Admin/chef who verified \\
\hline
published\_at & TIMESTAMP & NULL, Publication timestamp \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
deleted\_at & TIMESTAMP & NULL, Soft delete timestamp \\
\hline
\caption{recipes table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (author\_id)
    \item Many-to-Many: products (via recipe\_products)
    \item One-to-Many: recipe\_reviews, recipe\_tries
\end{itemize}

\textbf{Ingredient JSON Structure:}
\begin{verbatim}
[
  {
    "product_id": 123,
    "product_name": "Vanilla Ice Cream",
    "quantity": 2,
    "unit": "scoops",
    "notes": "or any flavor"
  },
  {
    "product_id": null,
    "product_name": "Fresh Strawberries",
    "quantity": 200,
    "unit": "grams",
    "notes": ""
  }
]
\end{verbatim}

\newpage

\subsection{Table 37: recipe\_products}

\begin{tablebox}{recipe\_products - Recipe-Product Relationships}
\textbf{Purpose:} Links recipes to SavoyConnect products used as ingredients.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} recipe\_id, product\_id\\
\textbf{Indexes:} recipe\_id, product\_id, UNIQUE(recipe\_id, product\_id)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
recipe\_id & BIGINT & FOREIGN KEY, NOT NULL, References recipes(id) ON DELETE CASCADE \\
\hline
product\_id & BIGINT & FOREIGN KEY, NOT NULL, References products(id) ON DELETE CASCADE \\
\hline
quantity & DECIMAL(10, 2) & NULL, Quantity needed \\
\hline
unit & VARCHAR(50) & NULL, Unit of measurement: 'scoops', 'grams', 'ml', 'pieces' \\
\hline
is\_primary & BOOLEAN & NOT NULL, DEFAULT FALSE, Primary ingredient flag \\
\hline
is\_optional & BOOLEAN & NOT NULL, DEFAULT FALSE, Optional ingredient \\
\hline
notes & VARCHAR(255) & NULL, Ingredient notes or substitutions \\
\hline
sort\_order & INT & NOT NULL, DEFAULT 0, Display order in ingredient list \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{recipe\_products table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: recipes (recipe\_id), products (product\_id)
\end{itemize}

\textbf{Features:}
\begin{itemize}
    \item "Shop ingredients" feature - add all recipe products to cart
    \item Show "Used in X recipes" on product pages
    \item Product recommendations based on recipe views
    \item Track which products are popular in recipes
\end{itemize}

\newpage

\subsection{Table 38: recipe\_tries}

\begin{tablebox}{recipe\_tries - User Recipe Attempts}
\textbf{Purpose:} Tracks when users try recipes with photos and feedback.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} recipe\_id, user\_id\\
\textbf{Indexes:} recipe\_id, user\_id, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
recipe\_id & BIGINT & FOREIGN KEY, NOT NULL, References recipes(id) ON DELETE CASCADE \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
rating & INT & NULL, User rating 1-5 stars \\
\hline
photo\_url & VARCHAR(500) & NULL, Photo of user's result \\
\hline
notes & TEXT & NULL, User's feedback or modifications \\
\hline
difficulty\_feedback & ENUM & NULL, Values: 'easier', 'as\_expected', 'harder' \\
\hline
would\_make\_again & BOOLEAN & NULL, Recommendation flag \\
\hline
modifications\_made & TEXT & NULL, What user changed in recipe \\
\hline
icecoins\_earned & INT & NOT NULL, DEFAULT 0, IceCoins for trying recipe \\
\hline
is\_featured & BOOLEAN & NOT NULL, DEFAULT FALSE, Featured by admin \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{recipe\_tries table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: recipes (recipe\_id), users (user\_id)
\end{itemize}

\textbf{Gamification:}
\begin{itemize}
    \item Award 20 IceCoins for first "I tried this" with photo
    \item Challenge: "Try 5 recipes this month" → 200 IceCoins
    \item Featured user creations on recipe pages
    \item Social feed: "Rifaf tried Chocolate Lava Cake"
\end{itemize}

\newpage

\subsection{Table 39: recipe\_saves}

\begin{tablebox}{recipe\_saves - User Recipe Bookmarks}
\textbf{Purpose:} Tracks user-saved/bookmarked recipes for later reference.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} recipe\_id, user\_id\\
\textbf{Indexes:} recipe\_id, user\_id, UNIQUE(recipe\_id, user\_id)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
recipe\_id & BIGINT & FOREIGN KEY, NOT NULL, References recipes(id) ON DELETE CASCADE \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
collection\_name & VARCHAR(100) & NULL, User's collection: "Desserts", "Quick Recipes", "Party Ideas" \\
\hline
notes & TEXT & NULL, Personal notes about recipe \\
\hline
reminder\_date & DATE & NULL, Reminder to try this recipe \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{recipe\_saves table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: recipes (recipe\_id), users (user\_id)
\end{itemize}

\textbf{Features:}
\begin{itemize}
    \item "My Saved Recipes" collection in user profile
    \item Organize saves into custom collections
    \item Set reminders to try saved recipes
    \item Personal notes on saved recipes
    \item Email: "You have 5 saved recipes - try one today!"
\end{itemize}

\newpage

\subsection{Table 40: recipe\_collections}

\begin{tablebox}{recipe\_collections - Curated Recipe Collections}
\textbf{Purpose:} Editorial or user-created collections of related recipes.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} creator\_id, slug (unique), collection\_type, is\_featured
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
creator\_id & BIGINT & FOREIGN KEY, NULL, References users(id) - Collection creator \\
\hline
collection\_type & ENUM & NOT NULL, Values: 'editorial', 'user', 'seasonal', 'trending' \\
\hline
title & VARCHAR(255) & NOT NULL, Collection name: "Summer Coolers", "Birthday Party Ideas" \\
\hline
slug & VARCHAR(255) & UNIQUE, NOT NULL, URL-friendly identifier \\
\hline
description & TEXT & NULL, Collection description \\
\hline
cover\_image\_url & VARCHAR(500) & NULL, Collection cover image \\
\hline
recipe\_count & INT & NOT NULL, DEFAULT 0, Number of recipes in collection \\
\hline
is\_featured & BOOLEAN & NOT NULL, DEFAULT FALSE, Featured on homepage \\
\hline
is\_public & BOOLEAN & NOT NULL, DEFAULT TRUE, Public visibility \\
\hline
view\_count & INT & NOT NULL, DEFAULT 0, Total views \\
\hline
save\_count & INT & NOT NULL, DEFAULT 0, Times saved by users \\
\hline
sort\_order & INT & NOT NULL, DEFAULT 0, Display order \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{recipe\_collections table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (creator\_id)
    \item Many-to-Many: recipes (via recipe\_collection\_items)
\end{itemize}

\textbf{Collection Examples:}
\begin{itemize}
    \item \textbf{Editorial:} "Top 10 Summer Recipes by Chef Maria"
    \item \textbf{Seasonal:} "Ramadan Special Desserts"
    \item \textbf{User:} "My Favorite Quick Treats"
    \item \textbf{Trending:} "Most Tried Recipes This Week"
\end{itemize}

\newpage

\section{Community \& Social Features}

\subsection{Table 41: user\_follows}

\begin{tablebox}{user\_follows - Social Following Relationships}
\textbf{Purpose:} Tracks user-to-user following for social features and activity feeds.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} follower\_id, following\_id\\
\textbf{Indexes:} follower\_id, following\_id, UNIQUE(follower\_id, following\_id)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
follower\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE - User who follows \\
\hline
following\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE - User being followed \\
\hline
notification\_sent & BOOLEAN & NOT NULL, DEFAULT FALSE, Whether followed user was notified \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{user\_follows table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (follower\_id, following\_id)
\end{itemize}

\textbf{Social Features:}
\begin{itemize}
    \item User profile shows follower/following counts
    \item Activity feed shows posts from followed users
    \item "Suggested users to follow" based on recipe interactions
    \item Notification: "@rifaf started following you"
    \item Follow trending recipe creators
\end{itemize}

\textbf{Constraints:}
\begin{itemize}
    \item Users cannot follow themselves (application logic)
    \item Unique constraint prevents duplicate follows
    \item Bidirectional following = mutual friendship
\end{itemize}

\newpage

\subsection{Table 42: user\_posts}

\begin{tablebox}{user\_posts - Social Feed Posts}
\textbf{Purpose:} User-generated posts for community feed (photos, recipes, achievements).\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id, recipe\_id, product\_id\\
\textbf{Indexes:} user\_id, post\_type, visibility, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
post\_type & ENUM & NOT NULL, Values: 'status', 'photo', 'recipe\_share', 'achievement', 'review\_share', 'product\_recommendation' \\
\hline
content & TEXT & NULL, Post text content \\
\hline
media\_urls & JSON & NULL, Array of image/video URLs \\
\hline
recipe\_id & BIGINT & FOREIGN KEY, NULL, References recipes(id) if sharing recipe \\
\hline
product\_id & BIGINT & FOREIGN KEY, NULL, References products(id) if recommending product \\
\hline
achievement\_type & VARCHAR(100) & NULL, Achievement badge type if achievement post \\
\hline
achievement\_data & JSON & NULL, Achievement details \\
\hline
visibility & ENUM & NOT NULL, DEFAULT 'public', Values: 'public', 'followers\_only', 'private' \\
\hline
like\_count & INT & NOT NULL, DEFAULT 0, Number of likes \\
\hline
comment\_count & INT & NOT NULL, DEFAULT 0, Number of comments \\
\hline
share\_count & INT & NOT NULL, DEFAULT 0, Times shared \\
\hline
view\_count & INT & NOT NULL, DEFAULT 0, Total views \\
\hline
is\_pinned & BOOLEAN & NOT NULL, DEFAULT FALSE, Pinned to user profile \\
\hline
is\_featured & BOOLEAN & NOT NULL, DEFAULT FALSE, Featured by admins \\
\hline
flagged\_count & INT & NOT NULL, DEFAULT 0, Times reported \\
\hline
status & ENUM & NOT NULL, DEFAULT 'published', Values: 'draft', 'published', 'hidden', 'removed' \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
deleted\_at & TIMESTAMP & NULL, Soft delete timestamp \\
\hline
\caption{user\_posts table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id), recipes (recipe\_id), products (product\_id)
    \item One-to-Many: post\_likes, post\_comments
\end{itemize}

\textbf{Post Examples:}
\begin{itemize}
    \item \textbf{Status:} "Loving this new mango flavor! ��"
    \item \textbf{Photo:} Photo of ice cream creation with caption
    \item \textbf{Recipe Share:} "Just tried this amazing Chocolate Lava Cake recipe!"
    \item \textbf{Achievement:} "I just earned the 'Chef Master' badge! ��"
    \item \textbf{Product Recommendation:} "You have to try the new Pistachio flavor!"
\end{itemize}

\newpage

\subsection{Table 43: post\_likes}

\begin{tablebox}{post\_likes - Post Like/Reaction Tracking}
\textbf{Purpose:} Tracks user likes/reactions on social posts.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} post\_id, user\_id\\
\textbf{Indexes:} post\_id, user\_id, UNIQUE(post\_id, user\_id)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
post\_id & BIGINT & FOREIGN KEY, NOT NULL, References user\_posts(id) ON DELETE CASCADE \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
reaction\_type & ENUM & NOT NULL, DEFAULT 'like', Values: 'like', 'love', 'wow', 'yummy', 'celebrate' \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{post\_likes table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: user\_posts (post\_id), users (user\_id)
\end{itemize}

\textbf{Reaction Types:}
\begin{itemize}
    \item \textbf{like:} �� General like
    \item \textbf{love:} ❤️ Love it
    \item \textbf{wow:} �� Amazing
    \item \textbf{yummy:} �� Looks delicious
    \item \textbf{celebrate:} �� Congratulations
\end{itemize}

\newpage

\subsection{Table 44: post\_comments}

\begin{tablebox}{post\_comments - Social Post Comments}
\textbf{Purpose:} User comments on social posts with threading support.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} post\_id, user\_id, parent\_comment\_id\\
\textbf{Indexes:} post\_id, user\_id, parent\_comment\_id, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
post\_id & BIGINT & FOREIGN KEY, NOT NULL, References user\_posts(id) ON DELETE CASCADE \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
parent\_comment\_id & BIGINT & FOREIGN KEY, NULL, References post\_comments(id) for threaded replies \\
\hline
comment\_text & TEXT & NOT NULL, Comment content \\
\hline
mentioned\_users & JSON & NULL, Array of @mentioned user IDs \\
\hline
like\_count & INT & NOT NULL, DEFAULT 0, Likes on this comment \\
\hline
reply\_count & INT & NOT NULL, DEFAULT 0, Number of replies \\
\hline
is\_edited & BOOLEAN & NOT NULL, DEFAULT FALSE, Edit status \\
\hline
edited\_at & TIMESTAMP & NULL, Last edit timestamp \\
\hline
flagged\_count & INT & NOT NULL, DEFAULT 0, Times reported \\
\hline
status & ENUM & NOT NULL, DEFAULT 'published', Values: 'published', 'hidden', 'removed' \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{post\_comments table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: user\_posts (post\_id), users (user\_id), post\_comments (parent\_comment\_id)
    \item One-to-Many: comment\_likes (self-referencing for replies)
\end{itemize}

\textbf{Threading:}
\begin{itemize}
    \item parent\_comment\_id = NULL → Top-level comment
    \item parent\_comment\_id = X → Reply to comment X
    \item Support nested replies up to 2-3 levels
    \item @mentions trigger notifications
\end{itemize}

\newpage

\section{Digital Passport System}

\subsection{Table 45: digital\_passports}

\begin{tablebox}{digital\_passports - Product Digital Passports}
\textbf{Purpose:} Blockchain-inspired traceability records for products.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} product\_id\\
\textbf{Indexes:} product\_id, passport\_id (unique), qr\_code (unique)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
product\_id & BIGINT & FOREIGN KEY, NOT NULL, References products(id) \\
\hline
passport\_id & VARCHAR(100) & UNIQUE, NOT NULL, Unique passport identifier (e.g., "DPP-2025-ICE-00001") \\
\hline
qr\_code & VARCHAR(255) & UNIQUE, NOT NULL, QR code data for scanning \\
\hline
qr\_image\_url & VARCHAR(500) & NULL, Generated QR code image URL \\
\hline
batch\_number & VARCHAR(100) & NOT NULL, Production batch number \\
\hline
production\_date & DATE & NOT NULL, Manufacturing date \\
\hline
expiry\_date & DATE & NOT NULL, Product expiration date \\
\hline
origin\_country & VARCHAR(100) & NOT NULL, Country of origin \\
\hline
origin\_location & VARCHAR(255) & NULL, Specific origin location/farm \\
\hline
manufacturer & VARCHAR(255) & NOT NULL, Manufacturer name \\
\hline
certifications & JSON & NULL, Array: ["Organic", "Halal", "Fair Trade", "ISO 22000"] \\
\hline
ingredients\_detail & JSON & NULL, Detailed ingredient sourcing info \\
\hline
supply\_chain\_events & JSON & NULL, Array of supply chain checkpoints \\
\hline
quality\_checks & JSON & NULL, Quality control test results \\
\hline
sustainability\_score & DECIMAL(3, 2) & NULL, Sustainability rating 0-10 \\
\hline
carbon\_footprint & DECIMAL(10, 2) & NULL, Carbon footprint in kg CO2 \\
\hline
water\_usage & DECIMAL(10, 2) & NULL, Water usage in liters \\
\hline
ethical\_sourcing & BOOLEAN & NOT NULL, DEFAULT FALSE, Ethical sourcing certified \\
\hline
fair\_trade\_certified & BOOLEAN & NOT NULL, DEFAULT FALSE, Fair trade status \\
\hline
documents\_urls & JSON & NULL, Links to certificates, test reports \\
\hline
scan\_count & INT & NOT NULL, DEFAULT 0, Times QR code scanned \\
\hline
last\_scanned\_at & TIMESTAMP & NULL, Last scan timestamp \\
\hline
is\_verified & BOOLEAN & NOT NULL, DEFAULT TRUE, Verification status \\
\hline
verified\_by & VARCHAR(255) & NULL, Verification authority \\
\hline
blockchain\_hash & VARCHAR(255) & NULL, Blockchain transaction hash if implemented \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{digital\_passports table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: products (product\_id)
    \item One-to-Many: passport\_scans
\end{itemize}

\textbf{Supply Chain Events JSON Example:}
\begin{verbatim}
[
  {
    "event": "Harvested",
    "date": "2025-10-01",
    "location": "Rajshahi Mango Farm",
    "verified": true
  },
  {
    "event": "Processed",
    "date": "2025-10-03",
    "location": "Dhaka Processing Plant",
    "verified": true
  },
  {
    "event": "Quality Tested",
    "date": "2025-10-04",
    "result": "Pass",
    "verified": true
  }
]
\end{verbatim}

\newpage

\subsection{Table 46: passport\_scans}

\begin{tablebox}{passport\_scans - Digital Passport Scan Tracking}
\textbf{Purpose:} Tracks when and where users scan product digital passports.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} passport\_id, user\_id\\
\textbf{Indexes:} passport\_id, user\_id, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
passport\_id & BIGINT & FOREIGN KEY, NOT NULL, References digital\_passports(id) \\
\hline
user\_id & BIGINT & FOREIGN KEY, NULL, References users(id) - NULL if anonymous scan \\
\hline
scan\_location & VARCHAR(255) & NULL, GPS location of scan \\
\hline
latitude & DECIMAL(10, 8) & NULL, Scan GPS latitude \\
\hline
longitude & DECIMAL(11, 8) & NULL, Scan GPS longitude \\
\hline
device\_type & VARCHAR(50) & NULL, Device: 'mobile', 'tablet', 'desktop' \\
\hline
browser & VARCHAR(100) & NULL, Browser information \\
\hline
ip\_address & VARCHAR(45) & NULL, IP address of scanner \\
\hline
user\_agent & TEXT & NULL, User agent string \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{passport\_scans table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: digital\_passports (passport\_id), users (user\_id)
\end{itemize}

\textbf{Analytics Use Cases:}
\begin{itemize}
    \item Track product interest via scan frequency
    \item Identify geographic distribution of products
    \item Measure transparency feature engagement
    \item Award IceCoins for first passport scan
    \item Generate "Most scanned products" insights
\end{itemize}

\newpage

\subsection{Table 47: sustainability\_reports}

\begin{tablebox}{sustainability\_reports - Product Sustainability Metrics}
\textbf{Purpose:} Detailed sustainability and environmental impact data per product.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} product\_id\\
\textbf{Indexes:} product\_id, reporting\_period
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
product\_id & BIGINT & FOREIGN KEY, NOT NULL, References products(id) \\
\hline
reporting\_period & VARCHAR(50) & NOT NULL, Period: "Q1-2025", "2025-Annual" \\
\hline
carbon\_footprint\_kg & DECIMAL(10, 2) & NOT NULL, Total carbon emissions in kg CO2 \\
\hline
water\_usage\_liters & DECIMAL(10, 2) & NOT NULL, Water consumption in liters \\
\hline
energy\_usage\_kwh & DECIMAL(10, 2) & NULL, Energy usage in kilowatt-hours \\
\hline
renewable\_energy\_percentage & DECIMAL(5, 2) & NULL, \% energy from renewable sources \\
\hline
waste\_generated\_kg & DECIMAL(10, 2) & NULL, Waste generated in kg \\
\hline
waste\_recycled\_percentage & DECIMAL(5, 2) & NULL, \% waste recycled \\
\hline
packaging\_recyclable & BOOLEAN & NOT NULL, DEFAULT FALSE, Packaging recyclability \\
\hline
packaging\_material & VARCHAR(255) & NULL, Packaging material type \\
\hline
local\_sourcing\_percentage & DECIMAL(5, 2) & NULL, \% ingredients sourced locally \\
\hline
fair\_trade\_percentage & DECIMAL(5, 2) & NULL, \% fair trade ingredients \\
\hline
organic\_percentage & DECIMAL(5, 2) & NULL, \% organic ingredients \\
\hline
biodiversity\_impact & TEXT & NULL, Impact on biodiversity \\
\hline
social\_impact & TEXT & NULL, Social and community impact \\
\hline
supplier\_count & INT & NULL, Number of suppliers \\
\hline
certifications & JSON & NULL, Current certifications \\
\hline
improvement\_goals & JSON & NULL, Sustainability improvement targets \\
\hline
overall\_sustainability\_score & DECIMAL(3, 2) & NULL, Aggregate score 0-10 \\
\hline
report\_url & VARCHAR(500) & NULL, Full report document URL \\
\hline
verified\_by & VARCHAR(255) & NULL, Third-party verifier \\
\hline
verified\_at & TIMESTAMP & NULL, Verification timestamp \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{sustainability\_reports table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: products (product\_id)
\end{itemize}

\textbf{User Visibility:}
\begin{itemize}
    \item Display sustainability badges on product pages
    \item "Eco-friendly choice" highlighting
    \item Compare sustainability across products
    \item Sustainability score in search filters
    \item Reward IceCoins for purchasing sustainable products
\end{itemize}

\newpage

\section{Custom Box System}

\subsection{Table 48: custom\_boxes}

\begin{tablebox}{custom\_boxes - User-Created Custom Product Boxes}
\textbf{Purpose:} Tracks custom box configurations created by users for orders.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id, order\_id\\
\textbf{Indexes:} user\_id, order\_id, status
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
order\_id & BIGINT & FOREIGN KEY, NULL, References orders(id) if ordered \\
\hline
box\_name & VARCHAR(255) & NOT NULL, User-defined name: "Family Party Box", "Dessert Sampler" \\
\hline
box\_type & ENUM & NOT NULL, Values: 'small', 'medium', 'large', 'extra\_large' \\
\hline
box\_capacity & INT & NOT NULL, Maximum items allowed in box \\
\hline
current\_item\_count & INT & NOT NULL, DEFAULT 0, Current items in box \\
\hline
base\_price & DECIMAL(10, 2) & NOT NULL, Box base price \\
\hline
items\_price & DECIMAL(10, 2) & NOT NULL, DEFAULT 0.00, Total price of items \\
\hline
total\_price & DECIMAL(10, 2) & NOT NULL, Base + items price \\
\hline
discount\_applied & DECIMAL(10, 2) & NOT NULL, DEFAULT 0.00, Box discount amount \\
\hline
status & ENUM & NOT NULL, DEFAULT 'draft', Values: 'draft', 'saved', 'ordered', 'abandoned' \\
\hline
is\_template & BOOLEAN & NOT NULL, DEFAULT FALSE, Save as reusable template \\
\hline
is\_public & BOOLEAN & NOT NULL, DEFAULT FALSE, Share with community \\
\hline
is\_gift & BOOLEAN & NOT NULL, DEFAULT FALSE, Gift box flag \\
\hline
gift\_message & TEXT & NULL, Personalized gift message \\
\hline
gift\_wrapping & BOOLEAN & NOT NULL, DEFAULT FALSE, Gift wrap service \\
\hline
share\_count & INT & NOT NULL, DEFAULT 0, Times shared if public \\
\hline
copy\_count & INT & NOT NULL, DEFAULT 0, Times copied by others \\
\hline
notes & TEXT & NULL, User notes about box \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
ordered\_at & TIMESTAMP & NULL, When box was ordered \\
\hline
\caption{custom\_boxes table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id), orders (order\_id)
    \item One-to-Many: custom\_box\_items
\end{itemize}

\textbf{Box Types:}
\begin{itemize}
    \item \textbf{Small:} 4 items, 299 BDT base price
    \item \textbf{Medium:} 6 items, 399 BDT base price
    \item \textbf{Large:} 8 items, 499 BDT base price
    \item \textbf{Extra Large:} 12 items, 699 BDT base price
\end{itemize}

\textbf{Features:}
\begin{itemize}
    \item Mix and match any products
    \item Save as template for repeat orders
    \item Share box configurations with community
    \item Gift customization with personal message
    \item Volume discounts on boxes
\end{itemize}

\newpage

\subsection{Table 49: custom\_box\_items}

\begin{tablebox}{custom\_box\_items - Items in Custom Boxes}
\textbf{Purpose:} Individual products added to custom boxes with quantities.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} custom\_box\_id, product\_id\\
\textbf{Indexes:} custom\_box\_id, product\_id
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
custom\_box\_id & BIGINT & FOREIGN KEY, NOT NULL, References custom\_boxes(id) ON DELETE CASCADE \\
\hline
product\_id & BIGINT & FOREIGN KEY, NOT NULL, References products(id) \\
\hline
quantity & INT & NOT NULL, DEFAULT 1, Quantity of this product \\
\hline
unit\_price & DECIMAL(10, 2) & NOT NULL, Price per unit at time of adding \\
\hline
subtotal & DECIMAL(10, 2) & NOT NULL, Quantity × unit price \\
\hline
customization\_notes & TEXT & NULL, Special requests for this item \\
\hline
sort\_order & INT & NOT NULL, DEFAULT 0, Display order in box \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{custom\_box\_items table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: custom\_boxes (custom\_box\_id), products (product\_id)
\end{itemize}

\textbf{Validation Rules:}
\begin{itemize}
    \item Total items cannot exceed box capacity
    \item Each item takes one slot regardless of quantity
    \item Minimum 50\% capacity filled to order
    \item Price snapshots prevent price changes after box saved
\end{itemize}

\newpage

\section{Stock Notification System}

\subsection{Table 50: stock\_notifications}

\begin{tablebox}{stock\_notifications - Out-of-Stock Alert Subscriptions}
\textbf{Purpose:} User subscriptions for product back-in-stock notifications.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id, product\_id, location\_id\\
\textbf{Indexes:} user\_id, product\_id, location\_id, status, UNIQUE(user\_id, product\_id, location\_id)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
product\_id & BIGINT & FOREIGN KEY, NOT NULL, References products(id) ON DELETE CASCADE \\
\hline
location\_id & BIGINT & FOREIGN KEY, NULL, References locations(id) - Specific location or NULL for any \\
\hline
notification\_preference & ENUM & NOT NULL, DEFAULT 'both', Values: 'push', 'email', 'sms', 'both' \\
\hline
status & ENUM & NOT NULL, DEFAULT 'active', Values: 'active', 'notified', 'cancelled', 'expired' \\
\hline
priority & ENUM & NOT NULL, DEFAULT 'normal', Values: 'low', 'normal', 'high' - User preference \\
\hline
min\_quantity & INT & NOT NULL, DEFAULT 1, Minimum stock level to trigger notification \\
\hline
notified\_at & TIMESTAMP & NULL, When notification was sent \\
\hline
expires\_at & TIMESTAMP & NULL, Subscription expiration (auto-expire after 30 days) \\
\hline
notes & TEXT & NULL, User notes about why they want this \\
\hline
ip\_address & VARCHAR(45) & NULL, IP at subscription time \\
\hline
device\_type & VARCHAR(50) & NULL, Device used to subscribe \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{stock\_notifications table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id), products (product\_id), locations (location\_id)
\end{itemize}

\textbf{Notification Flow:}
\begin{enumerate}
    \item User subscribes when product is out of stock
    \item Status: \textbf{active} → Waiting for restock
    \item Inventory system detects stock > min\_quantity
    \item Trigger notification to all active subscribers
    \item Status: \textbf{notified} → Notification sent
    \item Auto-expire after 30 days if product never restocked
\end{enumerate}

\textbf{Features:}
\begin{itemize}
    \item Location-specific alerts (notify only for nearby stores)
    \item Multi-channel delivery (push + email + SMS)
    \item Priority settings for urgent needs
    \item Track demand for out-of-stock products
    \item Analytics: Most requested products
    \item Limited time window after notification (12-24 hours priority)
\end{itemize}

\textbf{Analytics Value:}
\begin{itemize}
    \item Measure unmet demand
    \item Prioritize restocking based on subscriber count
    \item Identify popular products with supply issues
    \item Forecast demand for inventory planning
\end{itemize}

\newpage

\section{Health Tracking System}

\subsection{Table 51: health\_goals}

\begin{tablebox}{health\_goals - User Health \& Wellness Goals}
\textbf{Purpose:} User-defined health goals with nutrition tracking integration.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id\\
\textbf{Indexes:} user\_id, goal\_type, status
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
goal\_type & ENUM & NOT NULL, Values: 'calorie\_limit', 'sugar\_reduction', 'protein\_intake', 'low\_carb', 'weight\_management', 'fitness' \\
\hline
goal\_name & VARCHAR(255) & NOT NULL, User-friendly name: "Reduce Daily Sugar", "Stay Under 2000 Cal" \\
\hline
target\_value & DECIMAL(10, 2) & NOT NULL, Target numeric value \\
\hline
target\_unit & VARCHAR(50) & NOT NULL, Unit: 'calories', 'grams', 'kg', 'days' \\
\hline
current\_value & DECIMAL(10, 2) & NOT NULL, DEFAULT 0.00, Current progress \\
\hline
timeframe & ENUM & NOT NULL, Values: 'daily', 'weekly', 'monthly', 'custom' \\
\hline
start\_date & DATE & NOT NULL, Goal start date \\
\hline
end\_date & DATE & NULL, Goal end date (NULL for ongoing) \\
\hline
status & ENUM & NOT NULL, DEFAULT 'active', Values: 'active', 'completed', 'paused', 'abandoned' \\
\hline
reminder\_enabled & BOOLEAN & NOT NULL, DEFAULT TRUE, Daily reminder flag \\
\hline
reminder\_time & TIME & NULL, Daily reminder time \\
\hline
progress\_percentage & DECIMAL(5, 2) & NOT NULL, DEFAULT 0.00, Calculated progress 0-100 \\
\hline
streak\_days & INT & NOT NULL, DEFAULT 0, Consecutive days meeting goal \\
\hline
best\_streak & INT & NOT NULL, DEFAULT 0, Longest streak achieved \\
\hline
days\_successful & INT & NOT NULL, DEFAULT 0, Total days goal met \\
\hline
days\_failed & INT & NOT NULL, DEFAULT 0, Total days goal missed \\
\hline
icecoins\_earned & INT & NOT NULL, DEFAULT 0, Total IceCoins from this goal \\
\hline
notes & TEXT & NULL, User notes and motivation \\
\hline
completed\_at & TIMESTAMP & NULL, Goal completion timestamp \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{health\_goals table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id)
    \item One-to-Many: health\_goal\_logs
\end{itemize}

\textbf{Goal Examples:}
\begin{itemize}
    \item \textbf{Calorie Limit:} Stay under 2,000 calories/day for 30 days
    \item \textbf{Sugar Reduction:} Max 30g sugar per day
    \item \textbf{Protein Intake:} Reach 80g protein daily
    \item \textbf{Low Carb:} Keep carbs under 100g/day
    \item \textbf{Weight Management:} Lose 5kg in 3 months
\end{itemize}

\textbf{Gamification:}
\begin{itemize}
    \item Award 10 IceCoins per day goal met
    \item Bonus 100 IceCoins for 7-day streak
    \item Bonus 500 IceCoins for completing 30-day goal
    \item Share achievements on social feed
\end{itemize}

\newpage

\subsection{Table 52: health\_goal\_logs}

\begin{tablebox}{health\_goal\_logs - Daily Health Goal Tracking}
\textbf{Purpose:} Daily log entries for health goal progress tracking.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} health\_goal\_id, user\_id\\
\textbf{Indexes:} health\_goal\_id, user\_id, log\_date, UNIQUE(health\_goal\_id, log\_date)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
health\_goal\_id & BIGINT & FOREIGN KEY, NOT NULL, References health\_goals(id) ON DELETE CASCADE \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
log\_date & DATE & NOT NULL, Date of this log entry \\
\hline
recorded\_value & DECIMAL(10, 2) & NOT NULL, Actual value for the day \\
\hline
target\_value & DECIMAL(10, 2) & NOT NULL, Target value (snapshot) \\
\hline
goal\_met & BOOLEAN & NOT NULL, Whether goal was achieved \\
\hline
variance & DECIMAL(10, 2) & NOT NULL, Difference from target (recorded - target) \\
\hline
source & ENUM & NOT NULL, DEFAULT 'manual', Values: 'manual', 'order\_tracking', 'app\_integration', 'system' \\
\hline
orders\_counted & JSON & NULL, Array of order IDs that contributed to this day \\
\hline
products\_consumed & JSON & NULL, Products and quantities consumed \\
\hline
nutrition\_breakdown & JSON & NULL, Detailed nutritional breakdown \\
\hline
notes & TEXT & NULL, User notes for the day \\
\hline
mood & ENUM & NULL, Values: 'great', 'good', 'okay', 'struggling', 'bad' \\
\hline
energy\_level & INT & NULL, Energy level 1-5 \\
\hline
icecoins\_earned & INT & NOT NULL, DEFAULT 0, IceCoins earned this day \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{health\_goal\_logs table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: health\_goals (health\_goal\_id), users (user\_id)
\end{itemize}

\textbf{Auto-Tracking:}
\begin{itemize}
    \item Automatically calculate nutrition from orders
    \item Sum calories/macros from all products ordered
    \item Update goal progress in real-time
    \item Notify user if approaching daily limit
    \item Suggest low-calorie alternatives
\end{itemize}

\newpage

\section{Gamification Badges}

\subsection{Table 53: badges}

\begin{tablebox}{badges - Achievement Badge Definitions}
\textbf{Purpose:} Defines all available achievement badges users can earn.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} badge\_key (unique), badge\_category, rarity
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
badge\_key & VARCHAR(100) & UNIQUE, NOT NULL, Unique identifier: "first\_order", "recipe\_master", "eco\_warrior" \\
\hline
badge\_name & VARCHAR(255) & NOT NULL, Display name: "First Order", "Recipe Master", "Eco Warrior" \\
\hline
description & TEXT & NOT NULL, What the badge represents \\
\hline
badge\_category & ENUM & NOT NULL, Values: 'ordering', 'social', 'recipes', 'reviews', 'sustainability', 'loyalty', 'challenges', 'special' \\
\hline
rarity & ENUM & NOT NULL, DEFAULT 'common', Values: 'common', 'uncommon', 'rare', 'epic', 'legendary' \\
\hline
icon\_url & VARCHAR(500) & NOT NULL, Badge icon image \\
\hline
icon\_locked\_url & VARCHAR(500) & NULL, Locked/grayed out version \\
\hline
color\_hex & VARCHAR(7) & NOT NULL, Badge primary color \\
\hline
unlock\_criteria & JSON & NOT NULL, Criteria object: \{"orders\_count": 1, "total\_spent": 0\} \\
\hline
unlock\_message & VARCHAR(500) & NULL, Message shown when earned \\
\hline
reward\_icecoins & INT & NOT NULL, DEFAULT 0, IceCoins awarded \\
\hline
is\_secret & BOOLEAN & NOT NULL, DEFAULT FALSE, Hidden until unlocked \\
\hline
is\_limited\_edition & BOOLEAN & NOT NULL, DEFAULT FALSE, Limited time availability \\
\hline
available\_from & TIMESTAMP & NULL, Availability start time \\
\hline
available\_until & TIMESTAMP & NULL, Availability end time \\
\hline
max\_awards & INT & NULL, Max users who can earn (NULL = unlimited) \\
\hline
current\_awards & INT & NOT NULL, DEFAULT 0, Users who have earned \\
\hline
display\_priority & INT & NOT NULL, DEFAULT 0, Display order in badge list \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Badge active status \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{badges table structure}
\end{longtable}

\textbf{Badge Examples:}
\begin{itemize}
    \item \textbf{First Order (Common):} Place your first order → 50 IceCoins
    \item \textbf{Chef Apprentice (Uncommon):} Try 10 recipes → 100 IceCoins
    \item \textbf{Review Guru (Rare):} Write 50 reviews → 300 IceCoins
    \item \textbf{Eco Warrior (Epic):} Order 100 sustainable products → 500 IceCoins
    \item \textbf{Legend (Legendary):} Reach Diamond tier → 1,000 IceCoins
\end{itemize}

\textbf{Unlock Criteria JSON Examples:}
\begin{verbatim}
{
  "orders_count": 10,
  "recipes_tried": 5,
  "total_spent": 10000,
  "reviews_count": 20,
  "streak_days": 30,
  "tier": "gold"
}
\end{verbatim}

\newpage

\subsection{Table 54: user\_badges}

\begin{tablebox}{user\_badges - User Badge Achievements}
\textbf{Purpose:} Tracks which badges each user has earned.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id, badge\_id\\
\textbf{Indexes:} user\_id, badge\_id, UNIQUE(user\_id, badge\_id), earned\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
badge\_id & BIGINT & FOREIGN KEY, NOT NULL, References badges(id) \\
\hline
earned\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP, When badge was earned \\
\hline
progress\_data & JSON & NULL, Progress snapshot when earned \\
\hline
icecoins\_awarded & INT & NOT NULL, DEFAULT 0, IceCoins received \\
\hline
notification\_sent & BOOLEAN & NOT NULL, DEFAULT FALSE, Notification status \\
\hline
is\_pinned & BOOLEAN & NOT NULL, DEFAULT FALSE, Pinned to profile \\
\hline
is\_public & BOOLEAN & NOT NULL, DEFAULT TRUE, Visible on public profile \\
\hline
shared\_on\_feed & BOOLEAN & NOT NULL, DEFAULT FALSE, Shared to social feed \\
\hline
\caption{user\_badges table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id), badges (badge\_id)
\end{itemize}

\textbf{Features:}
\begin{itemize}
    \item Display earned badges on user profile
    \item Pin favorite badges to profile header
    \item Share badge achievements on social feed
    \item "Badge Showcase" - select 3-5 badges to display
    \item Progress tracking: "50\% toward Recipe Master badge"
\end{itemize}

\newpage

\section{Leaderboards}

\subsection{Table 55: leaderboards}

\begin{tablebox}{leaderboards - Leaderboard Definitions}
\textbf{Purpose:} Defines various competitive leaderboards across categories.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} leaderboard\_key (unique), category, status
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
leaderboard\_key & VARCHAR(100) & UNIQUE, NOT NULL, Identifier: "top\_spenders", "recipe\_creators", "review\_masters" \\
\hline
title & VARCHAR(255) & NOT NULL, Display title: "Top Spenders", "Recipe Creators", "Review Masters" \\
\hline
description & TEXT & NULL, Leaderboard description \\
\hline
category & ENUM & NOT NULL, Values: 'spending', 'orders', 'recipes', 'reviews', 'social', 'sustainability', 'challenges' \\
\hline
metric\_type & VARCHAR(100) & NOT NULL, Metric to rank: 'total\_spent', 'order\_count', 'recipe\_count', 'review\_count' \\
\hline
ranking\_period & ENUM & NOT NULL, Values: 'all\_time', 'monthly', 'weekly', 'daily', 'custom' \\
\hline
start\_date & TIMESTAMP & NULL, Period start (for custom/limited periods) \\
\hline
end\_date & TIMESTAMP & NULL, Period end \\
\hline
min\_entries & INT & NOT NULL, DEFAULT 1, Minimum entries to appear on board \\
\hline
max\_rank\_display & INT & NOT NULL, DEFAULT 100, Show top X users \\
\hline
reward\_structure & JSON & NULL, Prizes for top ranks: \{"1": \{"icecoins": 1000\}, "2": \{"icecoins": 500\}\} \\
\hline
icon\_url & VARCHAR(500) & NULL, Leaderboard icon \\
\hline
banner\_url & VARCHAR(500) & NULL, Banner image \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Active status \\
\hline
is\_featured & BOOLEAN & NOT NULL, DEFAULT FALSE, Featured on homepage \\
\hline
visibility & ENUM & NOT NULL, DEFAULT 'public', Values: 'public', 'tier\_restricted', 'private' \\
\hline
tier\_requirement & ENUM & NULL, Minimum tier: 'silver', 'gold', 'platinum', 'diamond' \\
\hline
last\_updated\_at & TIMESTAMP & NULL, Last leaderboard recalculation \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{leaderboards table structure}
\end{longtable}

\textbf{Leaderboard Types:}
\begin{itemize}
    \item \textbf{Top Spenders:} Users by total spending (all-time or monthly)
    \item \textbf{Recipe Creators:} Most published recipes
    \item \textbf{Review Masters:} Most helpful reviews
    \item \textbf{Challenge Champions:} Most challenges completed
    \item \textbf{Eco Leaders:} Most sustainable product purchases
    \item \textbf{Social Stars:} Most followers/engagement
    \item \textbf{Streak Kings:} Longest order streaks
\end{itemize}

\newpage

\subsection{Table 56: leaderboard\_entries}

\begin{tablebox}{leaderboard\_entries - Leaderboard Rankings}
\textbf{Purpose:} Current standings and historical rankings for each leaderboard.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} leaderboard\_id, user\_id\\
\textbf{Indexes:} leaderboard\_id, user\_id, rank, UNIQUE(leaderboard\_id, user\_id, period\_start)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
leaderboard\_id & BIGINT & FOREIGN KEY, NOT NULL, References leaderboards(id) \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
rank & INT & NOT NULL, Current rank position \\
\hline
previous\_rank & INT & NULL, Rank in previous period \\
\hline
rank\_change & INT & NULL, Change in rank (positive = up, negative = down) \\
\hline
score & DECIMAL(15, 2) & NOT NULL, Metric value (spending, count, etc.) \\
\hline
entries\_count & INT & NOT NULL, DEFAULT 0, Number of qualifying entries \\
\hline
period\_start & DATE & NOT NULL, Ranking period start \\
\hline
period\_end & DATE & NULL, Ranking period end \\
\hline
reward\_eligible & BOOLEAN & NOT NULL, DEFAULT FALSE, Eligible for rewards \\
\hline
reward\_claimed & BOOLEAN & NOT NULL, DEFAULT FALSE, Reward claimed status \\
\hline
reward\_data & JSON & NULL, Reward details if eligible \\
\hline
is\_current & BOOLEAN & NOT NULL, DEFAULT TRUE, Current active ranking \\
\hline
calculated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP, When rank was calculated \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{leaderboard\_entries table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: leaderboards (leaderboard\_id), users (user\_id)
\end{itemize}

\textbf{Ranking Updates:}
\begin{itemize}
    \item Daily: Recalculate all daily leaderboards at midnight
    \item Weekly: Update every Monday at 00:00
    \item Monthly: Update on 1st of each month
    \item Real-time: All-time leaderboards update after qualifying actions
    \item Archive: Keep historical rankings (is\_current = false)
\end{itemize}

\newpage

\section{Trust \& Verification}

\subsection{Table 57: user\_verifications}

\begin{tablebox}{user\_verifications - User Identity Verification}
\textbf{Purpose:} KYC and identity verification records for trusted user status.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id\\
\textbf{Indexes:} user\_id, verification\_type, status
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
verification\_type & ENUM & NOT NULL, Values: 'email', 'phone', 'id\_document', 'address', 'payment\_method', 'business' \\
\hline
status & ENUM & NOT NULL, DEFAULT 'pending', Values: 'pending', 'in\_review', 'verified', 'rejected', 'expired' \\
\hline
verification\_method & VARCHAR(100) & NULL, Method used: 'otp', 'document\_upload', 'third\_party\_api' \\
\hline
document\_type & VARCHAR(100) & NULL, Document type: 'nid', 'passport', 'driving\_license', 'utility\_bill' \\
\hline
document\_number & VARCHAR(255) & NULL, ENCRYPTED, Document ID number \\
\hline
document\_front\_url & VARCHAR(500) & NULL, ENCRYPTED, Front image URL \\
\hline
document\_back\_url & VARCHAR(500) & NULL, ENCRYPTED, Back image URL \\
\hline
selfie\_url & VARCHAR(500) & NULL, ENCRYPTED, Selfie for face match \\
\hline
submitted\_data & JSON & NULL, ENCRYPTED, Submitted verification data \\
\hline
verification\_code & VARCHAR(100) & NULL, OTP or verification code (hashed) \\
\hline
code\_expires\_at & TIMESTAMP & NULL, Code expiration time \\
\hline
verified\_by & BIGINT & NULL, Admin who verified \\
\hline
verification\_notes & TEXT & NULL, Admin notes \\
\hline
rejection\_reason & TEXT & NULL, Reason for rejection \\
\hline
third\_party\_provider & VARCHAR(100) & NULL, KYC provider: 'jumio', 'onfido', 'trulioo' \\
\hline
third\_party\_reference & VARCHAR(255) & NULL, Provider's transaction ID \\
\hline
expires\_at & TIMESTAMP & NULL, Verification expiration (for documents) \\
\hline
verified\_at & TIMESTAMP & NULL, Verification completion timestamp \\
\hline
rejected\_at & TIMESTAMP & NULL, Rejection timestamp \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{user\_verifications table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id)
\end{itemize}

\textbf{Verification Levels:}
\begin{itemize}
    \item \textbf{Level 1 (Basic):} Email + Phone verified → Access to basic features
    \item \textbf{Level 2 (Standard):} + ID Document → Higher order limits, payment methods
    \item \textbf{Level 3 (Premium):} + Address verification → All features, corporate accounts
\end{itemize}

\textbf{Security:}
\begin{itemize}
    \item Encrypt all document images and personal data
    \item Auto-delete documents after 90 days of verification
    \item Store only verification status after confirmed
    \item GDPR compliance for data retention
    \item Audit log all access to verification data
\end{itemize}

\newpage

\subsection{Table 58: trust\_scores}

\begin{tablebox}{trust\_scores - User Trustworthiness Scores}
\textbf{Purpose:} Calculated trust scores based on behavior, reviews, and activity.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id\\
\textbf{Indexes:} user\_id (unique), overall\_score
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, UNIQUE, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
overall\_score & DECIMAL(5, 2) & NOT NULL, DEFAULT 0.00, Overall trust score 0-100 \\
\hline
account\_age\_score & DECIMAL(5, 2) & NOT NULL, DEFAULT 0.00, Score based on account age \\
\hline
verification\_score & DECIMAL(5, 2) & NOT NULL, DEFAULT 0.00, Verification completion score \\
\hline
activity\_score & DECIMAL(5, 2) & NOT NULL, DEFAULT 0.00, Regular activity score \\
\hline
order\_history\_score & DECIMAL(5, 2) & NOT NULL, DEFAULT 0.00, Order completion rate \\
\hline
review\_quality\_score & DECIMAL(5, 2) & NOT NULL, DEFAULT 0.00, Review helpfulness score \\
\hline
social\_score & DECIMAL(5, 2) & NOT NULL, DEFAULT 0.00, Community engagement score \\
\hline
payment\_score & DECIMAL(5, 2) & NOT NULL, DEFAULT 0.00, Payment reliability score \\
\hline
negative\_flags\_count & INT & NOT NULL, DEFAULT 0, Warnings or violations \\
\hline
positive\_reviews\_received & INT & NOT NULL, DEFAULT 0, As recipe/content creator \\
\hline
negative\_reviews\_received & INT & NOT NULL, DEFAULT 0, Reports or complaints \\
\hline
successful\_orders & INT & NOT NULL, DEFAULT 0, Completed orders \\
\hline
cancelled\_orders & INT & NOT NULL, DEFAULT 0, User-cancelled orders \\
\hline
refund\_requests & INT & NOT NULL, DEFAULT 0, Total refund requests \\
\hline
trust\_level & ENUM & NOT NULL, DEFAULT 'new', Values: 'new', 'basic', 'trusted', 'verified', 'premium', 'flagged' \\
\hline
trust\_badge & VARCHAR(100) & NULL, Badge displayed: 'Verified Buyer', 'Trusted Member', 'Top Contributor' \\
\hline
last\_calculated\_at & TIMESTAMP & NULL, Last score recalculation \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{trust\_scores table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item One-to-One: users (user\_id)
\end{itemize}

\textbf{Score Calculation:}
\begin{itemize}
    \item \textbf{Account Age:} 0-15 points (1 point per month, max 15)
    \item \textbf{Verification:} 0-20 points (email: 5, phone: 5, ID: 10)
    \item \textbf{Activity:} 0-15 points (regular orders, logins)
    \item \textbf{Order History:} 0-20 points (completion rate, no cancellations)
    \item \textbf{Review Quality:} 0-15 points (helpful reviews written)
    \item \textbf{Social:} 0-10 points (posts, engagement, followers)
    \item \textbf{Payment:} 0-5 points (no failed payments)
    \item \textbf{Total:} 0-100 points
\end{itemize}

\textbf{Trust Levels:}
\begin{itemize}
    \item \textbf{New:} 0-20 score → Basic access
    \item \textbf{Basic:} 21-40 score → Standard features
    \item \textbf{Trusted:} 41-60 score → "Verified Buyer" badge
    \item \textbf{Verified:} 61-80 score → "Trusted Member" badge
    \item \textbf{Premium:} 81-100 score → "Top Contributor" badge, priority support
    \item \textbf{Flagged:} Negative behavior → Restricted access
\end{itemize}

\newpage

\section{Feedback System}

\subsection{Table 59: feedback}

\begin{tablebox}{feedback - User Feedback \& Suggestions}
\textbf{Purpose:} Collects user feedback, bug reports, and feature suggestions.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id\\
\textbf{Indexes:} user\_id, feedback\_type, status, category
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NULL, References users(id) - NULL for anonymous feedback \\
\hline
feedback\_type & ENUM & NOT NULL, Values: 'bug\_report', 'feature\_request', 'complaint', 'suggestion', 'compliment', 'general' \\
\hline
category & ENUM & NOT NULL, Values: 'app', 'website', 'product', 'delivery', 'customer\_service', 'payment', 'other' \\
\hline
title & VARCHAR(255) & NOT NULL, Feedback title/summary \\
\hline
description & TEXT & NOT NULL, Detailed feedback \\
\hline
priority & ENUM & NOT NULL, DEFAULT 'medium', Values: 'low', 'medium', 'high', 'critical' \\
\hline
severity & ENUM & NULL, Values: 'minor', 'moderate', 'major', 'blocker' - For bugs \\
\hline
screenshots & JSON & NULL, Array of screenshot URLs \\
\hline
device\_info & JSON & NULL, Device and browser info \\
\hline
app\_version & VARCHAR(50) & NULL, App version when submitted \\
\hline
page\_url & VARCHAR(500) & NULL, Page where feedback originated \\
\hline
contact\_email & VARCHAR(255) & NULL, Contact email if anonymous \\
\hline
contact\_phone & VARCHAR(20) & NULL, Contact phone \\
\hline
status & ENUM & NOT NULL, DEFAULT 'new', Values: 'new', 'in\_review', 'in\_progress', 'resolved', 'closed', 'wont\_fix' \\
\hline
assigned\_to & BIGINT & NULL, Admin/developer assigned \\
\hline
admin\_notes & TEXT & NULL, Internal notes \\
\hline
resolution\_notes & TEXT & NULL, Resolution details for user \\
\hline
upvotes & INT & NOT NULL, DEFAULT 0, Community upvotes \\
\hline
is\_public & BOOLEAN & NOT NULL, DEFAULT FALSE, Visible to community \\
\hline
is\_featured & BOOLEAN & NOT NULL, DEFAULT FALSE, Featured feedback \\
\hline
response\_sent & BOOLEAN & NOT NULL, DEFAULT FALSE, Response sent to user \\
\hline
response\_at & TIMESTAMP & NULL, When response was sent \\
\hline
resolved\_at & TIMESTAMP & NULL, Resolution timestamp \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{feedback table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id)
    \item One-to-Many: feedback\_responses
\end{itemize}

\textbf{Feedback Workflow:}
\begin{enumerate}
    \item User submits feedback → Status: \textbf{new}
    \item Auto-categorize and assign priority
    \item Admin reviews → Status: \textbf{in\_review}
    \item Assign to team member → Status: \textbf{in\_progress}
    \item Fix/implement → Status: \textbf{resolved}
    \item Notify user of resolution → Status: \textbf{closed}
\end{enumerate}

\textbf{Incentives:}
\begin{itemize}
    \item Award 25 IceCoins for first feedback submission
    \item Award 100 IceCoins for critical bug reports
    \item Award 50 IceCoins for implemented feature suggestions
    \item Monthly "Top Contributor" rewards
\end{itemize}

\newpage

\subsection{Table 60: feedback\_responses}

\begin{tablebox}{feedback\_responses - Admin Responses to Feedback}
\textbf{Purpose:} Admin/developer responses to user feedback and status updates.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} feedback\_id, responder\_id\\
\textbf{Indexes:} feedback\_id, responder\_id, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
feedback\_id & BIGINT & FOREIGN KEY, NOT NULL, References feedback(id) ON DELETE CASCADE \\
\hline
responder\_id & BIGINT & FOREIGN KEY, NOT NULL, Admin/developer user ID \\
\hline
responder\_name & VARCHAR(255) & NOT NULL, Name displayed to user \\
\hline
responder\_role & VARCHAR(100) & NULL, Role/title: "Support Manager", "Lead Developer" \\
\hline
response\_type & ENUM & NOT NULL, Values: 'acknowledgment', 'update', 'resolution', 'question', 'closure' \\
\hline
message & TEXT & NOT NULL, Response message \\
\hline
status\_changed\_to & VARCHAR(50) & NULL, New status after this response \\
\hline
attachments & JSON & NULL, Response attachment URLs \\
\hline
is\_public & BOOLEAN & NOT NULL, DEFAULT TRUE, Visible to user \\
\hline
is\_internal & BOOLEAN & NOT NULL, DEFAULT FALSE, Internal note only \\
\hline
notification\_sent & BOOLEAN & NOT NULL, DEFAULT FALSE, User notification status \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{feedback\_responses table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: feedback (feedback\_id)
\end{itemize}

\textbf{Response Types:}
\begin{itemize}
    \item \textbf{Acknowledgment:} "Thanks for reporting! We're looking into it."
    \item \textbf{Update:} "We've started working on your suggestion."
    \item \textbf{Question:} "Can you provide more details about..."
    \item \textbf{Resolution:} "This has been fixed in version 2.5.0!"
    \item \textbf{Closure:} "Issue resolved. Thanks for your patience!"
\end{itemize}

\section{Analytics \& Tracking}

\subsection{Table 61: page\_views}

\begin{tablebox}{page\_views - Page View Analytics}
\textbf{Purpose:} Tracks all page views and user navigation patterns for analytics.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id, session\_id\\
\textbf{Indexes:} user\_id, session\_id, page\_url, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NULL, References users(id) - NULL for anonymous \\
\hline
session\_id & BIGINT & FOREIGN KEY, NULL, References sessions(id) \\
\hline
page\_url & VARCHAR(1000) & NOT NULL, Full page URL visited \\
\hline
page\_path & VARCHAR(500) & NOT NULL, URL path: "/products/123", "/recipes" \\
\hline
page\_title & VARCHAR(500) & NULL, Page title from HTML \\
\hline
page\_category & VARCHAR(100) & NULL, Category: 'product', 'recipe', 'blog', 'checkout' \\
\hline
referrer\_url & VARCHAR(1000) & NULL, Previous page URL \\
\hline
referrer\_domain & VARCHAR(255) & NULL, External referrer domain \\
\hline
utm\_source & VARCHAR(100) & NULL, UTM parameter: 'facebook', 'google', 'email' \\
\hline
utm\_medium & VARCHAR(100) & NULL, UTM parameter: 'cpc', 'social', 'email' \\
\hline
utm\_campaign & VARCHAR(100) & NULL, Campaign name \\
\hline
utm\_content & VARCHAR(100) & NULL, Ad content identifier \\
\hline
utm\_term & VARCHAR(100) & NULL, Search term \\
\hline
device\_type & ENUM & NOT NULL, Values: 'desktop', 'tablet', 'mobile', 'other' \\
\hline
browser & VARCHAR(100) & NULL, Browser name: 'Chrome', 'Safari', 'Firefox' \\
\hline
browser\_version & VARCHAR(50) & NULL, Browser version \\
\hline
operating\_system & VARCHAR(100) & NULL, OS: 'Windows', 'macOS', 'iOS', 'Android' \\
\hline
screen\_resolution & VARCHAR(50) & NULL, Screen size: '1920x1080' \\
\hline
viewport\_size & VARCHAR(50) & NULL, Viewport dimensions \\
\hline
ip\_address & VARCHAR(45) & NULL, User IP address (IPv4/IPv6) \\
\hline
country & VARCHAR(100) & NULL, Country from IP geolocation \\
\hline
city & VARCHAR(100) & NULL, City from IP geolocation \\
\hline
language & VARCHAR(10) & NULL, Browser language: 'en-US', 'bn-BD' \\
\hline
time\_on\_page & INT & NULL, Seconds spent on page \\
\hline
scroll\_depth & INT & NULL, Percentage scrolled 0-100 \\
\hline
is\_bounce & BOOLEAN & NOT NULL, DEFAULT FALSE, Single page session \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{page\_views table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id), sessions (session\_id)
\end{itemize}

\textbf{Analytics Use Cases:}
\begin{itemize}
    \item Most visited pages and products
    \item User journey and navigation paths
    \item Conversion funnel analysis
    \item Marketing campaign effectiveness (UTM tracking)
    \item Device and browser usage patterns
    \item Geographic user distribution
    \item Bounce rate and engagement metrics
    \item Page performance optimization
\end{itemize}

\newpage

\subsection{Table 62: user\_activity\_logs}

\begin{tablebox}{user\_activity\_logs - Detailed User Action Logging}
\textbf{Purpose:} Comprehensive audit trail of all user actions and events.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id\\
\textbf{Indexes:} user\_id, activity\_type, entity\_type, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NOT NULL, References users(id) ON DELETE CASCADE \\
\hline
activity\_type & ENUM & NOT NULL, Values: 'create', 'read', 'update', 'delete', 'login', 'logout', 'search', 'click', 'share', 'purchase' \\
\hline
entity\_type & VARCHAR(100) & NOT NULL, Table/entity: 'product', 'order', 'recipe', 'review', 'post' \\
\hline
entity\_id & BIGINT & NULL, ID of the affected entity \\
\hline
action\_description & TEXT & NOT NULL, Human-readable action: "Added product to cart", "Published recipe" \\
\hline
old\_values & JSON & NULL, Previous data state (for updates) \\
\hline
new\_values & JSON & NULL, New data state (for creates/updates) \\
\hline
metadata & JSON & NULL, Additional context data \\
\hline
ip\_address & VARCHAR(45) & NULL, User IP address \\
\hline
user\_agent & TEXT & NULL, Full browser user agent string \\
\hline
device\_fingerprint & VARCHAR(255) & NULL, Unique device identifier \\
\hline
session\_id & BIGINT & NULL, Associated session \\
\hline
page\_url & VARCHAR(1000) & NULL, Page where action occurred \\
\hline
referrer\_url & VARCHAR(1000) & NULL, Previous page \\
\hline
geolocation & JSON & NULL, \{"country": "BD", "city": "Dhaka", "lat": 23.8103, "lng": 90.4125\} \\
\hline
duration\_ms & INT & NULL, Time taken for action (milliseconds) \\
\hline
is\_success & BOOLEAN & NOT NULL, DEFAULT TRUE, Action success status \\
\hline
error\_message & TEXT & NULL, Error details if failed \\
\hline
tags & JSON & NULL, Array of tags: ["high\_value", "first\_time", "promotion"] \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{user\_activity\_logs table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id)
\end{itemize}

\textbf{Logged Activities:}
\begin{itemize}
    \item \textbf{Account:} Login, logout, profile updates, password changes
    \item \textbf{Shopping:} Product views, add to cart, checkout, purchases
    \item \textbf{Content:} Recipe views, saves, tries, posts, comments
    \item \textbf{Social:} Follows, likes, shares, messages
    \item \textbf{Reviews:} Write, edit, delete reviews
    \item \textbf{Searches:} Search queries and filters applied
    \item \textbf{Settings:} Preference changes, notification settings
\end{itemize}

\textbf{Data Retention:}
\begin{itemize}
    \item Keep last 90 days for active analysis
    \item Archive older data to cold storage
    \item Anonymize data after 1 year
    \item GDPR compliance: export/delete on request
\end{itemize}

\newpage

\subsection{Table 63: search\_queries}

\begin{tablebox}{search\_queries - Search Query Tracking}
\textbf{Purpose:} Tracks all search queries for analytics and search optimization.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id\\
\textbf{Indexes:} user\_id, search\_term, search\_category, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NULL, References users(id) - NULL for anonymous \\
\hline
search\_term & VARCHAR(500) & NOT NULL, Raw search query \\
\hline
search\_term\_normalized & VARCHAR(500) & NOT NULL, Lowercase, trimmed version \\
\hline
search\_category & ENUM & NOT NULL, DEFAULT 'all', Values: 'all', 'products', 'recipes', 'blogs', 'users' \\
\hline
search\_type & ENUM & NOT NULL, DEFAULT 'text', Values: 'text', 'voice', 'image', 'barcode' \\
\hline
filters\_applied & JSON & NULL, Filters: \{"category": "dairy", "price\_max": 500\} \\
\hline
sort\_by & VARCHAR(50) & NULL, Sort option: 'relevance', 'price\_asc', 'rating' \\
\hline
results\_count & INT & NOT NULL, DEFAULT 0, Number of results returned \\
\hline
results\_shown & INT & NULL, Results displayed to user \\
\hline
page\_number & INT & NOT NULL, DEFAULT 1, Pagination page viewed \\
\hline
results\_clicked & INT & NOT NULL, DEFAULT 0, Number of results clicked \\
\hline
first\_click\_position & INT & NULL, Position of first clicked result \\
\hline
time\_to\_first\_click & INT & NULL, Milliseconds to first click \\
\hline
session\_id & BIGINT & NULL, Search session identifier \\
\hline
has\_results & BOOLEAN & NOT NULL, Whether any results found \\
\hline
is\_corrected & BOOLEAN & NOT NULL, DEFAULT FALSE, Query auto-corrected \\
\hline
corrected\_term & VARCHAR(500) & NULL, Suggested correction \\
\hline
suggestions\_shown & JSON & NULL, Auto-complete suggestions displayed \\
\hline
device\_type & ENUM & NOT NULL, Values: 'desktop', 'tablet', 'mobile', 'other' \\
\hline
search\_duration\_ms & INT & NULL, Time to return results (milliseconds) \\
\hline
led\_to\_purchase & BOOLEAN & NOT NULL, DEFAULT FALSE, Resulted in order \\
\hline
order\_id & BIGINT & NULL, Associated order if purchased \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{search\_queries table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id)
    \item One-to-Many: search\_results
\end{itemize}

\textbf{Search Analytics:}
\begin{itemize}
    \item Top search terms and trending queries
    \item Zero-result searches (improve catalog/SEO)
    \item Search-to-purchase conversion rate
    \item Average results clicked per search
    \item Search performance optimization
    \item Auto-complete effectiveness
    \item Voice search accuracy
    \item User search patterns and preferences
\end{itemize}

\newpage

\subsection{Table 64: search\_results}

\begin{tablebox}{search\_results - Search Result Click Tracking}
\textbf{Purpose:} Tracks individual search result clicks and ranking performance.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} search\_query\_id, product\_id\\
\textbf{Indexes:} search\_query\_id, product\_id, position
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
search\_query\_id & BIGINT & FOREIGN KEY, NOT NULL, References search\_queries(id) ON DELETE CASCADE \\
\hline
result\_type & ENUM & NOT NULL, Values: 'product', 'recipe', 'blog', 'user', 'category' \\
\hline
result\_id & BIGINT & NOT NULL, ID of the result entity \\
\hline
product\_id & BIGINT & FOREIGN KEY, NULL, References products(id) - if result is product \\
\hline
position & INT & NOT NULL, Result rank position (1-indexed) \\
\hline
relevance\_score & DECIMAL(5, 4) & NULL, Search engine relevance score 0-1 \\
\hline
was\_clicked & BOOLEAN & NOT NULL, DEFAULT FALSE, Whether user clicked this result \\
\hline
clicked\_at & TIMESTAMP & NULL, When result was clicked \\
\hline
time\_to\_click & INT & NULL, Milliseconds from results shown to click \\
\hline
dwell\_time & INT & NULL, Time spent on result page (seconds) \\
\hline
returned\_to\_results & BOOLEAN & NOT NULL, DEFAULT FALSE, User came back to search results \\
\hline
added\_to\_cart & BOOLEAN & NOT NULL, DEFAULT FALSE, Product added to cart \\
\hline
purchased & BOOLEAN & NOT NULL, DEFAULT FALSE, Product purchased \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{search\_results table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: search\_queries (search\_query\_id), products (product\_id)
\end{itemize}

\textbf{Click-Through Analysis:}
\begin{itemize}
    \item CTR by result position (position bias)
    \item Result relevance optimization
    \item Ranking algorithm tuning
    \item A/B testing search algorithms
    \item Personalization effectiveness
    \item Zero-click vs. click searches
    \item Search-to-cart conversion by position
\end{itemize}

\newpage

\subsection{Table 65: click\_tracking}

\begin{tablebox}{click\_tracking - Element Click Tracking}
\textbf{Purpose:} Tracks clicks on UI elements, buttons, and CTAs for UX optimization.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id\\
\textbf{Indexes:} user\_id, element\_id, element\_type, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NULL, References users(id) - NULL for anonymous \\
\hline
session\_id & BIGINT & NULL, Associated session \\
\hline
element\_id & VARCHAR(255) & NOT NULL, HTML element ID or tracking identifier \\
\hline
element\_type & ENUM & NOT NULL, Values: 'button', 'link', 'banner', 'card', 'cta', 'image', 'video', 'form', 'other' \\
\hline
element\_text & VARCHAR(500) & NULL, Button/link text content \\
\hline
element\_category & VARCHAR(100) & NULL, Category: 'navigation', 'product', 'checkout', 'social' \\
\hline
page\_url & VARCHAR(1000) & NOT NULL, Page where click occurred \\
\hline
page\_section & VARCHAR(100) & NULL, Section: 'header', 'sidebar', 'footer', 'hero', 'product\_grid' \\
\hline
target\_url & VARCHAR(1000) & NULL, Destination URL (for links) \\
\hline
position\_x & INT & NULL, Click X coordinate \\
\hline
position\_y & INT & NULL, Click Y coordinate \\
\hline
viewport\_width & INT & NULL, Browser viewport width \\
\hline
viewport\_height & INT & NULL, Browser viewport height \\
\hline
scroll\_position & INT & NULL, Vertical scroll position \\
\hline
is\_external & BOOLEAN & NOT NULL, DEFAULT FALSE, External link click \\
\hline
is\_conversion & BOOLEAN & NOT NULL, DEFAULT FALSE, Conversion-related click \\
\hline
campaign\_id & BIGINT & NULL, Associated marketing campaign \\
\hline
ab\_test\_variant & VARCHAR(50) & NULL, A/B test variant identifier \\
\hline
device\_type & ENUM & NOT NULL, Values: 'desktop', 'tablet', 'mobile', 'other' \\
\hline
metadata & JSON & NULL, Additional tracking data \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{click\_tracking table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id)
\end{itemize}

\textbf{UX Optimization Use Cases:}
\begin{itemize}
    \item Heatmap generation (click density)
    \item CTA effectiveness analysis
    \item Button placement optimization
    \item Banner and promotion click-through rates
    \item Navigation pattern analysis
    \item Mobile vs. desktop interaction differences
    \item A/B test winner determination
    \item Conversion funnel drop-off points
\end{itemize}

\newpage

\subsection{Table 66: cart\_analytics}

\begin{tablebox}{cart\_analytics - Shopping Cart Analytics}
\textbf{Purpose:} Tracks cart events for abandonment analysis and optimization.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id, product\_id\\
\textbf{Indexes:} user\_id, product\_id, event\_type, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NULL, References users(id) - NULL for anonymous \\
\hline
session\_id & BIGINT & NULL, Session identifier \\
\hline
event\_type & ENUM & NOT NULL, Values: 'add', 'remove', 'update\_quantity', 'view', 'checkout\_start', 'checkout\_complete', 'abandon' \\
\hline
product\_id & BIGINT & FOREIGN KEY, NOT NULL, References products(id) \\
\hline
product\_name & VARCHAR(255) & NOT NULL, Product name snapshot \\
\hline
product\_price & DECIMAL(10, 2) & NOT NULL, Price at time of event \\
\hline
quantity & INT & NOT NULL, DEFAULT 1, Quantity in cart \\
\hline
quantity\_change & INT & NULL, Change amount (+ or -) \\
\hline
cart\_total\_items & INT & NOT NULL, Total items in cart \\
\hline
cart\_total\_value & DECIMAL(10, 2) & NOT NULL, Total cart value \\
\hline
cart\_age\_minutes & INT & NULL, Minutes since first item added \\
\hline
page\_url & VARCHAR(1000) & NULL, Page where event occurred \\
\hline
referrer\_source & VARCHAR(255) & NULL, How user arrived: 'search', 'product\_page', 'recommendation' \\
\hline
discount\_applied & DECIMAL(10, 2) & NOT NULL, DEFAULT 0.00, Discount amount \\
\hline
promotion\_code & VARCHAR(100) & NULL, Applied promotion code \\
\hline
device\_type & ENUM & NOT NULL, Values: 'desktop', 'tablet', 'mobile', 'other' \\
\hline
is\_guest & BOOLEAN & NOT NULL, Guest user flag \\
\hline
led\_to\_purchase & BOOLEAN & NOT NULL, DEFAULT FALSE, Resulted in order \\
\hline
order\_id & BIGINT & NULL, Order ID if purchased \\
\hline
abandonment\_reason & VARCHAR(255) & NULL, Reason if abandoned: 'high\_price', 'shipping\_cost', 'out\_of\_stock' \\
\hline
metadata & JSON & NULL, Additional context data \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{cart\_analytics table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id), products (product\_id)
\end{itemize}

\textbf{Cart Abandonment Analysis:}
\begin{itemize}
    \item Cart abandonment rate by stage
    \item Most abandoned products
    \item Average cart value at abandonment
    \item Time to abandonment patterns
    \item Price sensitivity analysis
    \item Shipping cost impact on abandonment
    \item Mobile vs. desktop abandonment rates
    \item Recovery email effectiveness
\end{itemize}

\textbf{Optimization Strategies:}
\begin{itemize}
    \item Send cart recovery emails after 1 hour, 24 hours, 3 days
    \item Offer limited-time discounts for abandoned carts
    \item Highlight free shipping thresholds
    \item Show low stock warnings for abandoned items
    \item Simplify checkout process for high-abandonment steps
\end{itemize}

\newpage

\section{Performance \& System}

\subsection{Table 67: conversion\_tracking}

\begin{tablebox}{conversion\_tracking - Conversion Event Tracking}
\textbf{Purpose:} Tracks conversion events and marketing attribution.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} user\_id, order\_id\\
\textbf{Indexes:} user\_id, order\_id, conversion\_type, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
user\_id & BIGINT & FOREIGN KEY, NULL, References users(id) \\
\hline
session\_id & BIGINT & NULL, Session where conversion occurred \\
\hline
conversion\_type & ENUM & NOT NULL, Values: 'purchase', 'signup', 'subscription', 'referral', 'recipe\_publish', 'review\_post', 'social\_share', 'app\_download' \\
\hline
conversion\_value & DECIMAL(10, 2) & NOT NULL, DEFAULT 0.00, Monetary value \\
\hline
order\_id & BIGINT & FOREIGN KEY, NULL, References orders(id) \\
\hline
product\_ids & JSON & NULL, Array of product IDs involved \\
\hline
attribution\_model & ENUM & NOT NULL, DEFAULT 'last\_click', Values: 'last\_click', 'first\_click', 'linear', 'time\_decay', 'position\_based' \\
\hline
first\_touch\_source & VARCHAR(100) & NULL, First interaction source \\
\hline
first\_touch\_medium & VARCHAR(100) & NULL, First interaction medium \\
\hline
first\_touch\_campaign & VARCHAR(100) & NULL, First campaign \\
\hline
first\_touch\_date & TIMESTAMP & NULL, First touchpoint date \\
\hline
last\_touch\_source & VARCHAR(100) & NULL, Last interaction source \\
\hline
last\_touch\_medium & VARCHAR(100) & NULL, Last interaction medium \\
\hline
last\_touch\_campaign & VARCHAR(100) & NULL, Last campaign \\
\hline
last\_touch\_date & TIMESTAMP & NULL, Last touchpoint date \\
\hline
touchpoint\_count & INT & NOT NULL, DEFAULT 1, Number of touchpoints \\
\hline
customer\_journey & JSON & NULL, Full journey: [\{"source": "facebook", "date": "2025-01-15"\}] \\
\hline
days\_to\_conversion & INT & NULL, Days from first touch to conversion \\
\hline
device\_type & ENUM & NOT NULL, Values: 'desktop', 'tablet', 'mobile', 'other' \\
\hline
is\_new\_customer & BOOLEAN & NOT NULL, First purchase flag \\
\hline
revenue\_attributed & DECIMAL(10, 2) & NOT NULL, DEFAULT 0.00, Revenue credited to campaign \\
\hline
cost\_per\_conversion & DECIMAL(10, 2) & NULL, Marketing cost for this conversion \\
\hline
roi & DECIMAL(10, 2) & NULL, Return on investment \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{conversion\_tracking table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (user\_id), orders (order\_id)
\end{itemize}

\textbf{Attribution Models:}
\begin{itemize}
    \item \textbf{Last Click:} 100\% credit to last touchpoint
    \item \textbf{First Click:} 100\% credit to first touchpoint
    \item \textbf{Linear:} Equal credit across all touchpoints
    \item \textbf{Time Decay:} More credit to recent touchpoints
    \item \textbf{Position-Based:} 40\% first, 40\% last, 20\% middle
\end{itemize}

\textbf{Marketing Analytics:}
\begin{itemize}
    \item Campaign ROI calculation
    \item Channel effectiveness comparison
    \item Customer journey analysis
    \item Multi-touch attribution
    \item Time-to-conversion metrics
    \item New vs. returning customer value
\end{itemize}

\newpage

\subsection{Table 68: admin\_users}

\begin{tablebox}{admin\_users - Administrative User Accounts}
\textbf{Purpose:} Stores admin and staff user accounts with enhanced security.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} role\_id\\
\textbf{Indexes:} email (unique), username (unique), role\_id, status
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
username & VARCHAR(100) & UNIQUE, NOT NULL, Admin username \\
\hline
email & VARCHAR(255) & UNIQUE, NOT NULL, Admin email \\
\hline
password\_hash & VARCHAR(255) & NOT NULL, Hashed password \\
\hline
full\_name & VARCHAR(255) & NOT NULL, Full name \\
\hline
role\_id & BIGINT & FOREIGN KEY, NOT NULL, References admin\_roles(id) \\
\hline
phone & VARCHAR(20) & NULL, Contact phone \\
\hline
department & VARCHAR(100) & NULL, Department: 'Operations', 'Support', 'Marketing', 'Tech' \\
\hline
status & ENUM & NOT NULL, DEFAULT 'active', Values: 'active', 'inactive', 'suspended', 'locked' \\
\hline
two\_factor\_enabled & BOOLEAN & NOT NULL, DEFAULT FALSE, 2FA enabled flag \\
\hline
two\_factor\_secret & VARCHAR(255) & NULL, TOTP secret key \\
\hline
backup\_codes & JSON & NULL, Array of backup codes (hashed) \\
\hline
last\_login\_at & TIMESTAMP & NULL, Last successful login \\
\hline
last\_login\_ip & VARCHAR(45) & NULL, Last login IP address \\
\hline
login\_attempts & INT & NOT NULL, DEFAULT 0, Failed login count \\
\hline
locked\_until & TIMESTAMP & NULL, Account locked until timestamp \\
\hline
password\_changed\_at & TIMESTAMP & NULL, Last password change \\
\hline
password\_expires\_at & TIMESTAMP & NULL, Password expiration date \\
\hline
must\_change\_password & BOOLEAN & NOT NULL, DEFAULT FALSE, Force password change \\
\hline
session\_timeout & INT & NOT NULL, DEFAULT 3600, Session timeout in seconds \\
\hline
ip\_whitelist & JSON & NULL, Allowed IP addresses \\
\hline
permissions\_override & JSON & NULL, Special permissions beyond role \\
\hline
notes & TEXT & NULL, Admin notes \\
\hline
created\_by & BIGINT & NULL, Admin who created this account \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
deleted\_at & TIMESTAMP & NULL, Soft delete timestamp \\
\hline
\caption{admin\_users table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: admin\_roles (role\_id)
    \item One-to-Many: admin\_activity\_logs
\end{itemize}

\textbf{Security Features:}
\begin{itemize}
    \item Mandatory 2FA for sensitive roles (Admin, Finance)
    \item Password expiration every 90 days
    \item Account lockout after 5 failed attempts (30 min lockout)
    \item IP whitelisting for critical operations
    \item Session timeout enforcement
    \item Audit trail of all admin actions
    \item Role-based access control (RBAC)
\end{itemize}

\newpage

\subsection{Table 69: admin\_roles}

\begin{tablebox}{admin\_roles - Admin Role Definitions}
\textbf{Purpose:} Defines administrative roles with permission sets.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} role\_key (unique)
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
role\_key & VARCHAR(100) & UNIQUE, NOT NULL, Role identifier: 'super\_admin', 'admin', 'manager', 'support' \\
\hline
role\_name & VARCHAR(255) & NOT NULL, Display name: 'Super Admin', 'Content Manager', 'Support Agent' \\
\hline
description & TEXT & NULL, Role description \\
\hline
permission\_level & INT & NOT NULL, DEFAULT 0, Hierarchical level 0-100 (higher = more access) \\
\hline
permissions & JSON & NOT NULL, Permission array: ["users.view", "users.edit", "orders.view"] \\
\hline
can\_create\_users & BOOLEAN & NOT NULL, DEFAULT FALSE, Create user permission \\
\hline
can\_delete\_users & BOOLEAN & NOT NULL, DEFAULT FALSE, Delete user permission \\
\hline
can\_manage\_products & BOOLEAN & NOT NULL, DEFAULT FALSE, Product management \\
\hline
can\_manage\_orders & BOOLEAN & NOT NULL, DEFAULT FALSE, Order management \\
\hline
can\_manage\_content & BOOLEAN & NOT NULL, DEFAULT FALSE, Content management \\
\hline
can\_view\_analytics & BOOLEAN & NOT NULL, DEFAULT FALSE, Analytics access \\
\hline
can\_manage\_promotions & BOOLEAN & NOT NULL, DEFAULT FALSE, Promotion management \\
\hline
can\_manage\_settings & BOOLEAN & NOT NULL, DEFAULT FALSE, System settings \\
\hline
can\_access\_api & BOOLEAN & NOT NULL, DEFAULT FALSE, API access \\
\hline
can\_export\_data & BOOLEAN & NOT NULL, DEFAULT FALSE, Data export permission \\
\hline
max\_discount\_percentage & DECIMAL(5, 2) & NULL, Max discount they can apply \\
\hline
max\_refund\_amount & DECIMAL(10, 2) & NULL, Max refund they can authorize \\
\hline
requires\_two\_factor & BOOLEAN & NOT NULL, DEFAULT FALSE, Mandatory 2FA \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Role active status \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{admin\_roles table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item One-to-Many: admin\_users
\end{itemize}

\textbf{Predefined Roles:}
\begin{itemize}
    \item \textbf{Super Admin (Level 100):} Full system access, manage admins
    \item \textbf{Admin (Level 80):} Most operations, limited admin management
    \item \textbf{Operations Manager (Level 60):} Orders, inventory, delivery
    \item \textbf{Content Manager (Level 50):} Products, recipes, blogs
    \item \textbf{Marketing Manager (Level 50):} Promotions, campaigns, analytics
    \item \textbf{Customer Support (Level 30):} View orders, manage tickets, basic refunds
    \item \textbf{Analyst (Level 20):} Read-only analytics and reports
    \item \textbf{Viewer (Level 10):} Read-only dashboard access
\end{itemize}

\textbf{Permission Examples:}
\begin{verbatim}
{
  "users": ["view", "edit", "delete"],
  "orders": ["view", "edit", "cancel", "refund"],
  "products": ["view", "edit", "create", "delete"],
  "analytics": ["view", "export"],
  "settings": ["view", "edit"]
}
\end{verbatim}

\newpage

\subsection{Table 70: admin\_activity\_logs}

\begin{tablebox}{admin\_activity\_logs - Admin Action Audit Trail}
\textbf{Purpose:} Complete audit log of all administrative actions for security and compliance.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} admin\_user\_id\\
\textbf{Indexes:} admin\_user\_id, action\_type, entity\_type, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
admin\_user\_id & BIGINT & FOREIGN KEY, NOT NULL, References admin\_users(id) \\
\hline
action\_type & ENUM & NOT NULL, Values: 'create', 'read', 'update', 'delete', 'login', 'logout', 'export', 'import', 'approve', 'reject' \\
\hline
action\_description & TEXT & NOT NULL, Human-readable action \\
\hline
entity\_type & VARCHAR(100) & NOT NULL, Affected entity: 'user', 'order', 'product', 'promotion' \\
\hline
entity\_id & BIGINT & NULL, ID of affected entity \\
\hline
old\_values & JSON & NULL, Data before change \\
\hline
new\_values & JSON & NULL, Data after change \\
\hline
changes\_summary & TEXT & NULL, Summary of changes made \\
\hline
affected\_user\_id & BIGINT & NULL, Customer user affected \\
\hline
ip\_address & VARCHAR(45) & NOT NULL, Admin IP address \\
\hline
user\_agent & TEXT & NULL, Browser/device info \\
\hline
request\_method & VARCHAR(10) & NULL, HTTP method: 'GET', 'POST', 'PUT', 'DELETE' \\
\hline
request\_url & VARCHAR(1000) & NULL, API endpoint or page URL \\
\hline
request\_payload & JSON & NULL, Request data sent \\
\hline
response\_status & INT & NULL, HTTP response code \\
\hline
severity & ENUM & NOT NULL, DEFAULT 'info', Values: 'info', 'warning', 'error', 'critical' \\
\hline
is\_sensitive & BOOLEAN & NOT NULL, DEFAULT FALSE, Sensitive operation flag \\
\hline
requires\_audit\_review & BOOLEAN & NOT NULL, DEFAULT FALSE, Needs compliance review \\
\hline
session\_id & VARCHAR(255) & NULL, Admin session identifier \\
\hline
duration\_ms & INT & NULL, Time taken for action \\
\hline
is\_successful & BOOLEAN & NOT NULL, DEFAULT TRUE, Action success status \\
\hline
error\_message & TEXT & NULL, Error details if failed \\
\hline
tags & JSON & NULL, Tags: ["financial", "pii", "bulk\_operation"] \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{admin\_activity\_logs table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: admin\_users (admin\_user\_id)
\end{itemize}

\textbf{Critical Actions Logged:}
\begin{itemize}
    \item \textbf{User Management:} Create, edit, delete, suspend users
    \item \textbf{Financial:} Refunds, discounts, price changes, wallet adjustments
    \item \textbf{Order Management:} Cancel, modify, status changes
    \item \textbf{System Settings:} Configuration changes, feature toggles
    \item \textbf{Content:} Product creation, recipe approval, content moderation
    \item \textbf{Access:} Login, logout, permission changes, role assignments
    \item \textbf{Data Export:} PII exports, bulk data downloads
    \item \textbf{Security:} 2FA changes, password resets, IP whitelist updates
\end{itemize}

\textbf{Compliance \& Security:}
\begin{itemize}
    \item Immutable logs (no delete/edit)
    \item Encrypted storage for sensitive data
    \item Retain logs for 7 years (compliance requirement)
    \item Real-time alerts for suspicious activity
    \item Regular audit reviews for critical operations
    \item PCI-DSS compliance for payment-related actions
    \item GDPR compliance for data access/export
\end{itemize}

\section{System Configuration}

\subsection{Table 71: system\_settings}

\begin{tablebox}{system\_settings - Application Configuration}
\textbf{Purpose:} Stores system-wide configuration settings and feature flags.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} setting\_key (unique), category
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
setting\_key & VARCHAR(255) & UNIQUE, NOT NULL, Setting identifier: "maintenance\_mode", "max\_order\_value" \\
\hline
setting\_value & TEXT & NOT NULL, Setting value (string, number, JSON) \\
\hline
value\_type & ENUM & NOT NULL, DEFAULT 'string', Values: 'string', 'number', 'boolean', 'json', 'date', 'time' \\
\hline
category & VARCHAR(100) & NOT NULL, Category: 'general', 'payment', 'delivery', 'loyalty', 'features' \\
\hline
display\_name & VARCHAR(255) & NOT NULL, Human-readable name \\
\hline
description & TEXT & NULL, Setting description \\
\hline
default\_value & TEXT & NULL, Default value \\
\hline
validation\_rules & JSON & NULL, Validation: \{"min": 0, "max": 100000, "regex": "pattern"\} \\
\hline
is\_public & BOOLEAN & NOT NULL, DEFAULT FALSE, Accessible via public API \\
\hline
is\_editable & BOOLEAN & NOT NULL, DEFAULT TRUE, Can be modified via admin panel \\
\hline
requires\_restart & BOOLEAN & NOT NULL, DEFAULT FALSE, Requires app restart \\
\hline
environment & ENUM & NOT NULL, DEFAULT 'all', Values: 'all', 'production', 'staging', 'development' \\
\hline
updated\_by & BIGINT & NULL, Admin who last updated \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{system\_settings table structure}
\end{longtable}

\textbf{Common Settings:}
\begin{itemize}
    \item \textbf{General:} maintenance\_mode (boolean), app\_version (string), support\_email (string)
    \item \textbf{Orders:} min\_order\_value (number), max\_order\_value (number), order\_timeout\_minutes (number)
    \item \textbf{Delivery:} free\_delivery\_threshold (number), delivery\_radius\_km (number), delivery\_fee (number)
    \item \textbf{Loyalty:} icecoins\_per\_taka (number), referral\_bonus (number), signup\_bonus (number)
    \item \textbf{Features:} enable\_recipes (boolean), enable\_challenges (boolean), enable\_social\_feed (boolean)
    \item \textbf{Payment:} enable\_card\_payment (boolean), enable\_mobile\_banking (boolean), max\_wallet\_balance (number)
\end{itemize}

\newpage

\subsection{Table 72: api\_keys}

\begin{tablebox}{api\_keys - API Access Keys}
\textbf{Purpose:} Manages API keys for third-party integrations and external access.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} created\_by\\
\textbf{Indexes:} api\_key (unique), status
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
api\_key & VARCHAR(255) & UNIQUE, NOT NULL, Hashed API key \\
\hline
api\_key\_prefix & VARCHAR(20) & NOT NULL, Visible prefix: "sk\_live\_", "sk\_test\_" \\
\hline
api\_secret & VARCHAR(255) & NULL, ENCRYPTED, API secret for HMAC signing \\
\hline
key\_name & VARCHAR(255) & NOT NULL, Descriptive name: "Mobile App", "POS System" \\
\hline
key\_type & ENUM & NOT NULL, Values: 'public', 'private', 'admin', 'webhook' \\
\hline
environment & ENUM & NOT NULL, DEFAULT 'production', Values: 'production', 'sandbox', 'development' \\
\hline
permissions & JSON & NOT NULL, Permission array: ["orders.read", "products.read", "users.write"] \\
\hline
rate\_limit & INT & NOT NULL, DEFAULT 1000, Requests per hour \\
\hline
allowed\_ips & JSON & NULL, IP whitelist array \\
\hline
allowed\_origins & JSON & NULL, CORS origin whitelist \\
\hline
webhook\_url & VARCHAR(1000) & NULL, Callback URL for webhooks \\
\hline
webhook\_secret & VARCHAR(255) & NULL, ENCRYPTED, Webhook signature secret \\
\hline
status & ENUM & NOT NULL, DEFAULT 'active', Values: 'active', 'inactive', 'revoked', 'expired' \\
\hline
last\_used\_at & TIMESTAMP & NULL, Last successful API call \\
\hline
last\_used\_ip & VARCHAR(45) & NULL, Last request IP \\
\hline
usage\_count & BIGINT & NOT NULL, DEFAULT 0, Total API calls made \\
\hline
expires\_at & TIMESTAMP & NULL, Key expiration date \\
\hline
created\_by & BIGINT & FOREIGN KEY, NOT NULL, Admin who created key \\
\hline
revoked\_by & BIGINT & NULL, Admin who revoked key \\
\hline
revoked\_at & TIMESTAMP & NULL, Revocation timestamp \\
\hline
revocation\_reason & TEXT & NULL, Why key was revoked \\
\hline
notes & TEXT & NULL, Internal notes \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{api\_keys table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: admin\_users (created\_by, revoked\_by)
    \item One-to-Many: api\_logs
\end{itemize}

\textbf{Key Types:}
\begin{itemize}
    \item \textbf{Public:} Client-side access (read-only, limited scope)
    \item \textbf{Private:} Server-side access (full CRUD operations)
    \item \textbf{Admin:} Administrative operations (user management, system config)
    \item \textbf{Webhook:} Outbound webhook calls to external services
\end{itemize}

\textbf{Security:}
\begin{itemize}
    \item API keys are hashed using bcrypt
    \item Secrets encrypted with AES-256
    \item Rate limiting per key (default 1000/hour)
    \item IP whitelisting for sensitive operations
    \item Automatic revocation on suspicious activity
    \item HMAC-SHA256 signature verification
\end{itemize}

\newpage

\subsection{Table 73: api\_logs}

\begin{tablebox}{api\_logs - API Request/Response Logging}
\textbf{Purpose:} Logs all API requests and responses for debugging and monitoring.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} api\_key\_id\\
\textbf{Indexes:} api\_key\_id, endpoint, status\_code, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
api\_key\_id & BIGINT & FOREIGN KEY, NULL, References api\_keys(id) - NULL for public endpoints \\
\hline
request\_id & VARCHAR(100) & UNIQUE, NOT NULL, Unique request identifier (UUID) \\
\hline
method & VARCHAR(10) & NOT NULL, HTTP method: 'GET', 'POST', 'PUT', 'DELETE', 'PATCH' \\
\hline
endpoint & VARCHAR(500) & NOT NULL, API endpoint: "/api/v1/products" \\
\hline
full\_url & VARCHAR(2000) & NULL, Complete URL with query params \\
\hline
request\_headers & JSON & NULL, HTTP headers \\
\hline
request\_body & JSON & NULL, Request payload (truncated if large) \\
\hline
query\_params & JSON & NULL, URL query parameters \\
\hline
response\_status & INT & NOT NULL, HTTP status code: 200, 400, 500 \\
\hline
response\_body & JSON & NULL, Response payload (truncated if large) \\
\hline
response\_headers & JSON & NULL, Response headers \\
\hline
response\_time\_ms & INT & NOT NULL, Response time in milliseconds \\
\hline
ip\_address & VARCHAR(45) & NOT NULL, Client IP address \\
\hline
user\_agent & TEXT & NULL, Client user agent \\
\hline
user\_id & BIGINT & NULL, Authenticated user ID \\
\hline
error\_message & TEXT & NULL, Error details if failed \\
\hline
error\_stack & TEXT & NULL, Stack trace for debugging \\
\hline
database\_queries & INT & NOT NULL, DEFAULT 0, Number of DB queries executed \\
\hline
database\_time\_ms & INT & NULL, Total DB query time \\
\hline
cache\_hit & BOOLEAN & NOT NULL, DEFAULT FALSE, Response served from cache \\
\hline
rate\_limit\_remaining & INT & NULL, Remaining requests in rate limit window \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{api\_logs table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: api\_keys (api\_key\_id)
\end{itemize}

\textbf{Monitoring \& Analytics:}
\begin{itemize}
    \item API performance metrics (response times, error rates)
    \item Endpoint usage statistics
    \item Rate limit violation tracking
    \item Error pattern detection
    \item Client behavior analysis
    \item Database query optimization
    \item Cache effectiveness monitoring
\end{itemize}

\textbf{Data Retention:}
\begin{itemize}
    \item Keep last 30 days in hot storage
    \item Archive 31-90 days to cold storage
    \item Purge after 90 days (compliance)
    \item Exception: Keep error logs for 180 days
\end{itemize}

\newpage

\section{Communication Templates}

\subsection{Table 74: email\_templates}

\begin{tablebox}{email\_templates - Email Template Management}
\textbf{Purpose:} Stores email templates for automated notifications and campaigns.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} template\_key (unique), category
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
template\_key & VARCHAR(100) & UNIQUE, NOT NULL, Template identifier: "order\_confirmation", "password\_reset" \\
\hline
template\_name & VARCHAR(255) & NOT NULL, Display name \\
\hline
category & ENUM & NOT NULL, Values: 'transactional', 'marketing', 'notification', 'system' \\
\hline
subject & VARCHAR(500) & NOT NULL, Email subject line (supports variables) \\
\hline
subject\_preview & VARCHAR(100) & NULL, Subject line preview text \\
\hline
html\_body & TEXT & NOT NULL, HTML email body \\
\hline
text\_body & TEXT & NULL, Plain text fallback \\
\hline
variables & JSON & NOT NULL, Available variables: ["\{\{user\_name\}\}", "\{\{order\_id\}\}"] \\
\hline
default\_sender\_name & VARCHAR(255) & NOT NULL, DEFAULT 'SavoyConnect', From name \\
\hline
default\_sender\_email & VARCHAR(255) & NOT NULL, From email address \\
\hline
reply\_to\_email & VARCHAR(255) & NULL, Reply-to address \\
\hline
cc\_emails & JSON & NULL, CC recipients array \\
\hline
bcc\_emails & JSON & NULL, BCC recipients array \\
\hline
attachments & JSON & NULL, Default attachments \\
\hline
design\_json & JSON & NULL, MJML or email builder JSON \\
\hline
language & VARCHAR(10) & NOT NULL, DEFAULT 'en', Language code: 'en', 'bn' \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Template active status \\
\hline
send\_count & BIGINT & NOT NULL, DEFAULT 0, Total emails sent \\
\hline
last\_sent\_at & TIMESTAMP & NULL, Last email sent timestamp \\
\hline
version & INT & NOT NULL, DEFAULT 1, Template version number \\
\hline
notes & TEXT & NULL, Internal notes \\
\hline
created\_by & BIGINT & NULL, Admin who created \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{email\_templates table structure}
\end{longtable}

\textbf{Template Examples:}
\begin{itemize}
    \item \textbf{Transactional:} Order confirmation, delivery updates, payment receipts, password reset
    \item \textbf{Marketing:} Promotional campaigns, new product announcements, seasonal offers
    \item \textbf{Notification:} Review requests, stock alerts, wishlist price drops, abandoned cart
    \item \textbf{System:} Welcome email, account verification, privacy policy updates
\end{itemize}

\textbf{Variable Substitution:}
\begin{verbatim}
Subject: Order #{{order_id}} Confirmed - {{user_name}}
Body:
  Hi {{user_name}},
  Your order #{{order_id}} has been confirmed!
  Total: {{order_total}} BDT
  Expected delivery: {{delivery_date}}
\end{verbatim}

\newpage

\subsection{Table 75: sms\_templates}

\begin{tablebox}{sms\_templates - SMS Template Management}
\textbf{Purpose:} Stores SMS templates for automated text notifications.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} template\_key (unique), category
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
template\_key & VARCHAR(100) & UNIQUE, NOT NULL, Template identifier: "otp\_verification", "delivery\_update" \\
\hline
template\_name & VARCHAR(255) & NOT NULL, Display name \\
\hline
category & ENUM & NOT NULL, Values: 'otp', 'notification', 'marketing', 'alert' \\
\hline
message\_body & VARCHAR(500) & NOT NULL, SMS message (160 chars recommended) \\
\hline
message\_length & INT & NOT NULL, Character count \\
\hline
sms\_count & INT & NOT NULL, DEFAULT 1, Number of SMS segments \\
\hline
variables & JSON & NOT NULL, Available variables \\
\hline
language & VARCHAR(10) & NOT NULL, DEFAULT 'en', Language code \\
\hline
sender\_id & VARCHAR(20) & NOT NULL, Sender ID/name: "SAVOY", "SavoyConnect" \\
\hline
priority & ENUM & NOT NULL, DEFAULT 'normal', Values: 'low', 'normal', 'high', 'urgent' \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Template active status \\
\hline
requires\_consent & BOOLEAN & NOT NULL, DEFAULT TRUE, User opt-in required \\
\hline
send\_count & BIGINT & NOT NULL, DEFAULT 0, Total SMS sent \\
\hline
last\_sent\_at & TIMESTAMP & NULL, Last SMS sent timestamp \\
\hline
delivery\_rate & DECIMAL(5, 2) & NULL, Successful delivery percentage \\
\hline
average\_cost & DECIMAL(10, 4) & NULL, Average cost per SMS \\
\hline
notes & TEXT & NULL, Internal notes \\
\hline
created\_by & BIGINT & NULL, Admin who created \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{sms\_templates table structure}
\end{longtable}

\textbf{SMS Examples:}
\begin{itemize}
    \item \textbf{OTP:} "Your SavoyConnect verification code is \{\{otp\_code\}\}. Valid for 5 minutes."
    \item \textbf{Order:} "Order \#\{\{order\_id\}\} confirmed! Estimated delivery: \{\{delivery\_time\}\}. Track: \{\{tracking\_url\}\}"
    \item \textbf{Delivery:} "Your order is out for delivery! Delivery person: \{\{driver\_name\}\}, Contact: \{\{driver\_phone\}\}"
    \item \textbf{Promotion:} "Flash Sale! Get \{\{discount\_percent\}\}\% off on all dairy products. Valid till \{\{expiry\_time\}\}."
\end{itemize}

\textbf{Character Limits:}
\begin{itemize}
    \item \textbf{Single SMS:} 160 characters (GSM-7) or 70 characters (Unicode)
    \item \textbf{Concatenated:} 153 chars per segment (GSM-7), 67 chars (Unicode)
    \item Keep OTP messages under 160 characters
    \item Include brand name and action in first 70 characters
\end{itemize}

\newpage

\section{File Management}

\subsection{Table 76: file\_uploads}

\begin{tablebox}{file\_uploads - File Upload Tracking}
\textbf{Purpose:} Tracks all uploaded files with metadata and storage information.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} uploaded\_by\\
\textbf{Indexes:} uploaded\_by, file\_hash, entity\_type, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
file\_name & VARCHAR(500) & NOT NULL, Original filename \\
\hline
file\_path & VARCHAR(1000) & NOT NULL, Storage path/key \\
\hline
file\_url & VARCHAR(1000) & NOT NULL, Public access URL \\
\hline
file\_size & BIGINT & NOT NULL, File size in bytes \\
\hline
file\_type & VARCHAR(100) & NOT NULL, MIME type: 'image/jpeg', 'application/pdf' \\
\hline
file\_extension & VARCHAR(20) & NOT NULL, File extension: 'jpg', 'pdf', 'mp4' \\
\hline
file\_hash & VARCHAR(255) & NOT NULL, SHA-256 hash for deduplication \\
\hline
storage\_provider & ENUM & NOT NULL, DEFAULT 's3', Values: 's3', 'cloudinary', 'local', 'azure', 'gcs' \\
\hline
storage\_bucket & VARCHAR(255) & NULL, S3 bucket or container name \\
\hline
storage\_region & VARCHAR(100) & NULL, Storage region: 'ap-south-1' \\
\hline
entity\_type & VARCHAR(100) & NULL, Related entity: 'product', 'recipe', 'user', 'review' \\
\hline
entity\_id & BIGINT & NULL, Related entity ID \\
\hline
uploaded\_by & BIGINT & FOREIGN KEY, NULL, References users(id) or admin\_users(id) \\
\hline
uploader\_type & ENUM & NOT NULL, Values: 'user', 'admin', 'system' \\
\hline
is\_public & BOOLEAN & NOT NULL, DEFAULT TRUE, Public access flag \\
\hline
is\_temporary & BOOLEAN & NOT NULL, DEFAULT FALSE, Auto-delete if unused \\
\hline
expires\_at & TIMESTAMP & NULL, Expiration date for temp files \\
\hline
cdn\_url & VARCHAR(1000) & NULL, CDN-accelerated URL \\
\hline
thumbnail\_url & VARCHAR(1000) & NULL, Thumbnail URL (for images/videos) \\
\hline
image\_width & INT & NULL, Original width (pixels) \\
\hline
image\_height & INT & NULL, Original height (pixels) \\
\hline
duration\_seconds & INT & NULL, Duration for audio/video \\
\hline
metadata & JSON & NULL, Additional metadata (EXIF, tags, etc.) \\
\hline
access\_count & BIGINT & NOT NULL, DEFAULT 0, Download/view count \\
\hline
last\_accessed\_at & TIMESTAMP & NULL, Last access timestamp \\
\hline
deleted\_at & TIMESTAMP & NULL, Soft delete timestamp \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{file\_uploads table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: users (uploaded\_by)
\end{itemize}

\textbf{File Categories:}
\begin{itemize}
    \item \textbf{Product Images:} Product photos, 360° views, lifestyle images
    \item \textbf{Recipe Media:} Recipe photos, cooking videos, step images
    \item \textbf{User Content:} Profile pictures, review photos, post images
    \item \textbf{Documents:} Invoices, receipts, verification documents, reports
    \item \textbf{System:} Badges, icons, banners, email templates
\end{itemize}

\textbf{Storage Strategy:}
\begin{itemize}
    \item Images optimized and compressed on upload
    \item Multiple sizes generated: thumbnail, small, medium, large, original
    \item CDN distribution for global performance
    \item Hash-based deduplication (save storage costs)
    \item Temporary files auto-deleted after 24 hours if unused
    \item Orphaned files cleaned up weekly
\end{itemize}

\newpage

\subsection{Table 77: scheduled\_jobs}

\begin{tablebox}{scheduled\_jobs - Cron Job Management}
\textbf{Purpose:} Manages scheduled background jobs and cron tasks.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} job\_key (unique), status, next\_run\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
job\_key & VARCHAR(100) & UNIQUE, NOT NULL, Job identifier: "cleanup\_temp\_files", "send\_daily\_digest" \\
\hline
job\_name & VARCHAR(255) & NOT NULL, Display name \\
\hline
job\_type & ENUM & NOT NULL, Values: 'scheduled', 'recurring', 'one\_time', 'triggered' \\
\hline
description & TEXT & NULL, Job description \\
\hline
handler & VARCHAR(255) & NOT NULL, Function/class to execute \\
\hline
parameters & JSON & NULL, Job parameters \\
\hline
schedule\_type & ENUM & NOT NULL, Values: 'cron', 'interval', 'daily', 'weekly', 'monthly' \\
\hline
cron\_expression & VARCHAR(100) & NULL, Cron schedule: "0 0 * * *" (daily at midnight) \\
\hline
interval\_minutes & INT & NULL, Interval in minutes \\
\hline
schedule\_time & TIME & NULL, Specific time for daily jobs \\
\hline
timezone & VARCHAR(100) & NOT NULL, DEFAULT 'Asia/Dhaka', Timezone for scheduling \\
\hline
priority & ENUM & NOT NULL, DEFAULT 'normal', Values: 'low', 'normal', 'high', 'critical' \\
\hline
max\_retries & INT & NOT NULL, DEFAULT 3, Max retry attempts \\
\hline
retry\_delay\_minutes & INT & NOT NULL, DEFAULT 5, Delay between retries \\
\hline
timeout\_seconds & INT & NOT NULL, DEFAULT 300, Job timeout \\
\hline
status & ENUM & NOT NULL, DEFAULT 'active', Values: 'active', 'paused', 'disabled', 'failed' \\
\hline
last\_run\_at & TIMESTAMP & NULL, Last execution timestamp \\
\hline
last\_run\_status & ENUM & NULL, Values: 'success', 'failed', 'timeout', 'skipped' \\
\hline
last\_run\_duration & INT & NULL, Last execution duration (seconds) \\
\hline
last\_run\_output & TEXT & NULL, Last execution output/logs \\
\hline
last\_error\_message & TEXT & NULL, Last error message \\
\hline
next\_run\_at & TIMESTAMP & NULL, Next scheduled execution \\
\hline
run\_count & BIGINT & NOT NULL, DEFAULT 0, Total executions \\
\hline
success\_count & BIGINT & NOT NULL, DEFAULT 0, Successful executions \\
\hline
failure\_count & BIGINT & NOT NULL, DEFAULT 0, Failed executions \\
\hline
average\_duration & INT & NULL, Average execution duration (seconds) \\
\hline
is\_running & BOOLEAN & NOT NULL, DEFAULT FALSE, Currently executing flag \\
\hline
locked\_at & TIMESTAMP & NULL, Lock timestamp (prevent concurrent runs) \\
\hline
locked\_by & VARCHAR(255) & NULL, Worker/server that locked job \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{scheduled\_jobs table structure}
\end{longtable}

\textbf{Common Scheduled Jobs:}
\begin{itemize}
    \item \textbf{Daily (Midnight):}
    \begin{itemize}
        \item Calculate leaderboard rankings
        \item Update trust scores
        \item Send daily digest emails
        \item Archive old logs
        \item Generate daily reports
    \end{itemize}
    \item \textbf{Hourly:}
    \begin{itemize}
        \item Check inventory levels
        \item Process pending orders
        \item Send abandoned cart reminders
        \item Update product recommendations
    \end{itemize}
    \item \textbf{Every 15 Minutes:}
    \begin{itemize}
        \item Check order status updates
        \item Process notification queue
        \item Update cache
    \end{itemize}
    \item \textbf{Weekly:}
    \begin{itemize}
        \item Cleanup orphaned files
        \item Generate weekly analytics
        \item Send weekly newsletter
        \item Database optimization
    \end{itemize}
\end{itemize}

\newpage

\section{Error Handling \& Monitoring}

\subsection{Table 78: error\_logs}

\begin{tablebox}{error\_logs - Application Error Logging}
\textbf{Purpose:} Logs application errors, exceptions, and crashes for debugging.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} error\_type, severity, is\_resolved, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
error\_hash & VARCHAR(255) & NOT NULL, Hash of error for grouping duplicates \\
\hline
error\_type & VARCHAR(255) & NOT NULL, Error class/type: 'DatabaseError', 'ValidationError' \\
\hline
error\_message & TEXT & NOT NULL, Error message \\
\hline
error\_code & VARCHAR(50) & NULL, Application error code \\
\hline
severity & ENUM & NOT NULL, DEFAULT 'error', Values: 'debug', 'info', 'warning', 'error', 'critical', 'fatal' \\
\hline
stack\_trace & TEXT & NULL, Full stack trace \\
\hline
context & JSON & NULL, Error context (request, user, session) \\
\hline
user\_id & BIGINT & NULL, User ID if error occurred during user action \\
\hline
session\_id & BIGINT & NULL, Session ID \\
\hline
request\_method & VARCHAR(10) & NULL, HTTP method \\
\hline
request\_url & VARCHAR(1000) & NULL, Request URL \\
\hline
request\_params & JSON & NULL, Request parameters \\
\hline
ip\_address & VARCHAR(45) & NULL, Client IP \\
\hline
user\_agent & TEXT & NULL, Browser/client info \\
\hline
environment & VARCHAR(50) & NOT NULL, Environment: 'production', 'staging', 'development' \\
\hline
app\_version & VARCHAR(50) & NULL, Application version \\
\hline
server\_name & VARCHAR(255) & NULL, Server/instance identifier \\
\hline
file\_path & VARCHAR(1000) & NULL, File where error occurred \\
\hline
line\_number & INT & NULL, Line number in file \\
\hline
function\_name & VARCHAR(255) & NULL, Function/method name \\
\hline
occurrence\_count & INT & NOT NULL, DEFAULT 1, Number of times this error occurred \\
\hline
first\_seen\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP, First occurrence \\
\hline
last\_seen\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP, Last occurrence \\
\hline
is\_resolved & BOOLEAN & NOT NULL, DEFAULT FALSE, Resolution status \\
\hline
resolved\_at & TIMESTAMP & NULL, Resolution timestamp \\
\hline
resolved\_by & BIGINT & NULL, Admin who resolved \\
\hline
resolution\_notes & TEXT & NULL, How error was fixed \\
\hline
is\_muted & BOOLEAN & NOT NULL, DEFAULT FALSE, Suppress alerts \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{error\_logs table structure}
\end{longtable}

\textbf{Error Grouping:}
\begin{itemize}
    \item Errors with same hash grouped together
    \item occurrence\_count incremented for duplicates
    \item last\_seen\_at updated on each occurrence
    \item Prevents log spam and aids in pattern detection
\end{itemize}

\textbf{Alerting Rules:}
\begin{itemize}
    \item \textbf{Fatal/Critical:} Immediate alert to on-call engineer
    \item \textbf{Error:} Alert if more than 10 occurrences in 5 minutes
    \item \textbf{Warning:} Daily summary report
    \item \textbf{New Errors:} Alert on first occurrence in production
\end{itemize}

\textbf{Integration:}
\begin{itemize}
    \item Send to Sentry/Rollbar for advanced error tracking
    \item Slack/Discord notifications for critical errors
    \item PagerDuty integration for on-call alerts
    \item Dashboard visualization of error trends
\end{itemize}

\newpage

\subsection{Table 79: webhooks}

\begin{tablebox}{webhooks - Webhook Configuration}
\textbf{Purpose:} Configures webhooks for event-driven integrations with external systems.\\
\textbf{Primary Key:} id\\
\textbf{Indexes:} event\_type, status, is\_active
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
webhook\_name & VARCHAR(255) & NOT NULL, Descriptive name \\
\hline
endpoint\_url & VARCHAR(1000) & NOT NULL, Destination URL \\
\hline
event\_type & VARCHAR(100) & NOT NULL, Event trigger: 'order.created', 'payment.completed' \\
\hline
event\_filters & JSON & NULL, Conditional filters \\
\hline
http\_method & VARCHAR(10) & NOT NULL, DEFAULT 'POST', HTTP method \\
\hline
headers & JSON & NULL, Custom HTTP headers \\
\hline
auth\_type & ENUM & NULL, Values: 'none', 'basic', 'bearer', 'api\_key', 'hmac' \\
\hline
auth\_credentials & VARCHAR(500) & NULL, ENCRYPTED, Authentication credentials \\
\hline
secret\_key & VARCHAR(255) & NULL, ENCRYPTED, HMAC signature secret \\
\hline
payload\_template & JSON & NULL, Custom payload structure \\
\hline
timeout\_seconds & INT & NOT NULL, DEFAULT 30, Request timeout \\
\hline
max\_retries & INT & NOT NULL, DEFAULT 3, Retry attempts \\
\hline
retry\_delay\_seconds & INT & NOT NULL, DEFAULT 60, Delay between retries \\
\hline
is\_active & BOOLEAN & NOT NULL, DEFAULT TRUE, Webhook enabled \\
\hline
is\_verified & BOOLEAN & NOT NULL, DEFAULT FALSE, Endpoint verification status \\
\hline
last\_triggered\_at & TIMESTAMP & NULL, Last webhook call \\
\hline
last\_success\_at & TIMESTAMP & NULL, Last successful call \\
\hline
last\_failure\_at & TIMESTAMP & NULL, Last failed call \\
\hline
total\_calls & BIGINT & NOT NULL, DEFAULT 0, Total webhook calls \\
\hline
success\_count & BIGINT & NOT NULL, DEFAULT 0, Successful calls \\
\hline
failure\_count & BIGINT & NOT NULL, DEFAULT 0, Failed calls \\
\hline
success\_rate & DECIMAL(5, 2) & NULL, Success percentage \\
\hline
average\_response\_time & INT & NULL, Average response time (ms) \\
\hline
consecutive\_failures & INT & NOT NULL, DEFAULT 0, Current failure streak \\
\hline
status & ENUM & NOT NULL, DEFAULT 'active', Values: 'active', 'paused', 'failed', 'disabled' \\
\hline
notes & TEXT & NULL, Internal notes \\
\hline
created\_by & BIGINT & NULL, Admin who created \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
updated\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP ON UPDATE CURRENT\_TIMESTAMP \\
\hline
\caption{webhooks table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item One-to-Many: webhook\_logs
\end{itemize}

\textbf{Webhook Events:}
\begin{itemize}
    \item \textbf{Orders:} order.created, order.updated, order.delivered, order.cancelled
    \item \textbf{Payments:} payment.completed, payment.failed, payment.refunded
    \item \textbf{Inventory:} product.out\_of\_stock, inventory.low\_stock
    \item \textbf{Users:} user.created, user.verified, user.deleted
    \item \textbf{Reviews:} review.created, review.flagged
    \item \textbf{System:} system.error, backup.completed
\end{itemize}

\textbf{Security:}
\begin{itemize}
    \item HMAC-SHA256 signature in X-Webhook-Signature header
    \item Timestamp validation to prevent replay attacks
    \item IP whitelisting for sensitive webhooks
    \item Retry with exponential backoff
    \item Auto-disable after 10 consecutive failures
\end{itemize}

\newpage

\subsection{Table 80: webhook\_logs}

\begin{tablebox}{webhook\_logs - Webhook Delivery Logs}
\textbf{Purpose:} Logs all webhook delivery attempts with request/response details.\\
\textbf{Primary Key:} id\\
\textbf{Foreign Keys:} webhook\_id\\
\textbf{Indexes:} webhook\_id, event\_id, status, created\_at
\end{tablebox}

\begin{longtable}{|p{3.5cm}|p{2.5cm}|p{6cm}|}
\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endfirsthead

\hline
\rowcolor{tableHeader}
\textcolor{white}{\textbf{Column Name}} & \textcolor{white}{\textbf{Data Type}} & \textcolor{white}{\textbf{Constraints \& Description}} \\
\hline
\endhead

id & BIGINT & PRIMARY KEY, AUTO\_INCREMENT \\
\hline
webhook\_id & BIGINT & FOREIGN KEY, NOT NULL, References webhooks(id) ON DELETE CASCADE \\
\hline
event\_id & VARCHAR(100) & NOT NULL, Event identifier (UUID) \\
\hline
event\_type & VARCHAR(100) & NOT NULL, Event type: 'order.created' \\
\hline
event\_data & JSON & NOT NULL, Event payload data \\
\hline
attempt\_number & INT & NOT NULL, DEFAULT 1, Retry attempt number \\
\hline
request\_url & VARCHAR(1000) & NOT NULL, Destination URL \\
\hline
request\_method & VARCHAR(10) & NOT NULL, HTTP method \\
\hline
request\_headers & JSON & NULL, HTTP headers sent \\
\hline
request\_body & JSON & NULL, Request payload \\
\hline
request\_signature & VARCHAR(255) & NULL, HMAC signature sent \\
\hline
response\_status & INT & NULL, HTTP status code \\
\hline
response\_headers & JSON & NULL, Response headers \\
\hline
response\_body & TEXT & NULL, Response body (truncated if large) \\
\hline
response\_time\_ms & INT & NULL, Response time in milliseconds \\
\hline
status & ENUM & NOT NULL, Values: 'pending', 'success', 'failed', 'timeout', 'retry' \\
\hline
error\_message & TEXT & NULL, Error details if failed \\
\hline
will\_retry & BOOLEAN & NOT NULL, DEFAULT FALSE, Scheduled for retry \\
\hline
next\_retry\_at & TIMESTAMP & NULL, Next retry timestamp \\
\hline
delivered\_at & TIMESTAMP & NULL, Successful delivery timestamp \\
\hline
created\_at & TIMESTAMP & NOT NULL, DEFAULT CURRENT\_TIMESTAMP \\
\hline
\caption{webhook\_logs table structure}
\end{longtable}

\textbf{Relationships:}
\begin{itemize}
    \item Many-to-One: webhooks (webhook\_id)
\end{itemize}

\textbf{Retry Strategy:}
\begin{itemize}
    \item Attempt 1: Immediate
    \item Attempt 2: After 1 minute
    \item Attempt 3: After 5 minutes
    \item Attempt 4: After 30 minutes
    \item Attempt 5+: After 1 hour (max 10 attempts)
    \item After max retries, mark webhook as failed
\end{itemize}

\textbf{Data Retention:}
\begin{itemize}
    \item Keep successful deliveries for 7 days
    \item Keep failed deliveries for 30 days
    \item Archive to cold storage after retention period
    \item Purge after 90 days
\end{itemize}

\newpage

\begin{tcolorbox}[colback=primaryBlue!10,colframe=primaryBlue,arc=3mm,boxrule=2mm]
\textbf{\Huge FULL SCHEMA OVERVIEW}



\vspace{0.5cm}

\textbf{\large Technical Specifications:}
\begin{itemize}
    \item \textbf{Database Engine:} MySQL 8.0+
    \item \textbf{Total Tables:} 80
    \item \textbf{Total Columns:} 2,000+ columns across all tables
    \item \textbf{Primary Keys:} BIGINT AUTO\_INCREMENT on all tables
    \item \textbf{Foreign Keys:} 200+ relationships with ON DELETE CASCADE/SET NULL
    \item \textbf{Indexes:} 400+ indexes for query optimization
    \item \textbf{ENUM Types:} 200+ enumerated types for data integrity
    \item \textbf{JSON Fields:} 100+ JSON columns for flexible data structures
    \item \textbf{Timestamps:} created\_at, updated\_at on all tables
    \item \textbf{Soft Deletes:} deleted\_at on applicable tables
    \item \textbf{Encryption:} Sensitive fields marked ENCRYPTED
\end{itemize}


\vspace{0.5cm}

\textbf{\large Security \& Compliance:}
\begin{itemize}
    \item GDPR compliant data handling
    \item PCI-DSS compliant payment processing
    \item Encrypted storage for sensitive data
    \item Role-based access control (RBAC)
    \item Two-factor authentication support
    \item Comprehensive audit trails
    \item Data retention policies
    \item Privacy by design principles
\end{itemize}

\vspace{0.5cm}

\textbf{\large Next Steps for Development:}
\begin{enumerate}
    \item Create database migration scripts for all 80 tables
    \item Implement stored procedures for complex queries
    \item Set up database indexes and optimization
    \item Configure replication and backup strategies
    \item Implement data seeding scripts for testing
    \item Set up monitoring and alerting
    \item Document API endpoints based on schema
    \item Create ORM models/entities for backend
    \item Implement data validation layers
    \item Set up automated testing for data integrity
\end{enumerate}

\vspace{0.5cm}



\end{tcolorbox}

\end{document}
